# HDSP Agent - Plan-and-Execute ì•„í‚¤í…ì²˜ íë¦„

## ê°œìš”

HDSP AgentëŠ” HuggingFace Jupyter Agentì—ì„œ ì˜ê°ì„ ë°›ì€ **Plan-and-Execute íŒ¨í„´**ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
ì‚¬ìš©ì ìš”ì²­ì„ ë°›ì•„ ê³„íšì„ ìˆ˜ë¦½í•˜ê³ , ë‹¨ê³„ë³„ë¡œ ì‹¤í–‰í•˜ë©°, ì˜¤ë¥˜ ë°œìƒ ì‹œ ì ì‘ì ìœ¼ë¡œ ì¬ê³„íší•©ë‹ˆë‹¤.

---

## ì „ì²´ íë¦„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ì‚¬ìš©ì ìš”ì²­ (User Request)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Knowledge Base ë™ì  ë¡œë”© (Mini RAG)                                  â”‚
â”‚     - ìš”ì²­ì—ì„œ ë¼ì´ë¸ŒëŸ¬ë¦¬ í‚¤ì›Œë“œ ê°ì§€ (dask, polars, pyspark ë“±)            â”‚
â”‚     - í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ API ê°€ì´ë“œ ìë™ ë¡œë“œ                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Planning (ê³„íš ìˆ˜ë¦½)                                                  â”‚
â”‚     - System Prompt + ì‚¬ìš©ì ìš”ì²­ + ë…¸íŠ¸ë¶ ì»¨í…ìŠ¤íŠ¸ + ë¼ì´ë¸ŒëŸ¬ë¦¬ ì§€ì‹        â”‚
â”‚     - LLMì´ ì‹¤í–‰ ê³„íš(steps) ìƒì„±                                         â”‚
â”‚     - ê° stepì€ tool í˜¸ì¶œ ì •ì˜ í¬í•¨                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Pre-Validation (ì‚¬ì „ ê²€ì¦)                                           â”‚
â”‚     - Pyflakes ê¸°ë°˜ ì •ì  ë¶„ì„                                             â”‚
â”‚     - AST íŒŒì‹±ìœ¼ë¡œ êµ¬ë¬¸ ì˜¤ë¥˜ ê²€ì‚¬                                          â”‚
â”‚     - ë¯¸ì •ì˜ ë³€ìˆ˜, ë¯¸ì‚¬ìš© import ê²€ì¶œ                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. Step-by-Step Execution (ë‹¨ê³„ë³„ ì‹¤í–‰)                                  â”‚
â”‚     - jupyter_cell: ì…€ ìƒì„± ë° ì‹¤í–‰                                       â”‚
â”‚     - markdown: ë§ˆí¬ë‹¤ìš´ ì…€ ìƒì„±                                          â”‚
â”‚     - final_answer: ìµœì¢… ë‹µë³€ ì œê³µ                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                               â”‚
                    â–¼                               â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   ì„±ê³µ (âœ“)    â”‚                â”‚   ì˜¤ë¥˜ (âœ—)    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                               â”‚
                    â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. Reflection (ì‹¤í–‰ ê²°ê³¼ ë¶„ì„)                                           â”‚
â”‚     - ì²´í¬í¬ì¸íŠ¸ í‰ê°€ (ë¶€ë¶„ ì„±ê³µ/ì™„ì „ ì„±ê³µ)                                 â”‚
â”‚     - ì‹ ë¢°ë„ ì ìˆ˜ ê³„ì‚°                                                    â”‚
â”‚     - ë‹¤ìŒ í–‰ë™ ê¶Œê³ : continue / adjust / retry / replan                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                               â”‚
                    â–¼                               â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  ê³„ì† ì§„í–‰    â”‚                â”‚   ì¬ê³„íš í•„ìš”  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                               â”‚
                    â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6. Adaptive Replanning (ì ì‘ì  ì¬ê³„íš)                                   â”‚
â”‚     - refine: í˜„ì¬ step ìˆ˜ì •                                             â”‚
â”‚     - insert_steps: ìƒˆë¡œìš´ step ì‚½ì…                                     â”‚
â”‚     - replace_step: step êµì²´                                            â”‚
â”‚     - replan_remaining: ë‚˜ë¨¸ì§€ ì „ì²´ ì¬ê³„íš                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   ì™„ë£Œ/ì‹¤íŒ¨   â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ìƒì„¸ ë‹¨ê³„ ì„¤ëª…

### 1. Knowledge Base ë™ì  ë¡œë”© (Mini RAG)

ì‚¬ìš©ì ìš”ì²­ì—ì„œ íŠ¹ì • ë¼ì´ë¸ŒëŸ¬ë¦¬ í‚¤ì›Œë“œë¥¼ ê°ì§€í•˜ë©´, í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ API ê°€ì´ë“œë¥¼ ìë™ìœ¼ë¡œ ë¡œë“œí•©ë‹ˆë‹¤.

**ì§€ì› ë¼ì´ë¸ŒëŸ¬ë¦¬:**
| íŠ¸ë¦¬ê±° í‚¤ì›Œë“œ | ë¡œë“œë˜ëŠ” ê°€ì´ë“œ |
|--------------|----------------|
| `dask`, `dask.dataframe`, `dd.read` | `dask.md` |
| `polars`, `pl.read` | `polars.md` |
| `pyspark`, `spark` | `pyspark.md` |
| `vaex` | `vaex.md` |
| `modin` | `modin.md` |
| `ray` | `ray.md` |

**ì˜ˆì‹œ: Dask ìš”ì²­ ì²˜ë¦¬**
```
ì‚¬ìš©ì: "daskë¡œ ëŒ€ìš©ëŸ‰ CSV íŒŒì¼ì„ ë³‘ë ¬ ì²˜ë¦¬í•´ì¤˜"
         â†“
1. "dask" í‚¤ì›Œë“œ ê°ì§€
2. backend/knowledge/libraries/dask.md ë¡œë“œ
3. í”Œë˜ë‹ í”„ë¡¬í”„íŠ¸ì— Dask API ê°€ì´ë“œ í¬í•¨
4. LLMì´ ì˜¬ë°”ë¥¸ Dask ë¬¸ë²•ìœ¼ë¡œ ê³„íš ìƒì„±
```

**ì½”ë“œ ìœ„ì¹˜:** `backend/knowledge/loader.py`

---

### 2. Planning (ê³„íš ìˆ˜ë¦½)

LLMì— ì „ë‹¬ë˜ëŠ” í”„ë¡¬í”„íŠ¸ êµ¬ì„±:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  System Prompt (ì—­í•  ë° ë„êµ¬ ì •ì˜)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“š ë¼ì´ë¸ŒëŸ¬ë¦¬ API ì°¸ì¡° (ìë™ ë¡œë“œë¨)          â”‚
â”‚     - Mini RAGì—ì„œ ë¡œë“œëœ ê°€ì´ë“œ              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ë…¸íŠ¸ë¶ ì»¨í…ìŠ¤íŠ¸                              â”‚
â”‚     - í˜„ì¬ ì…€ ì½”ë“œ                            â”‚
â”‚     - ì‹¤í–‰ ê²°ê³¼/ì˜¤ë¥˜                          â”‚
â”‚     - ì„í¬íŠ¸ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª©ë¡                 â”‚
â”‚     - ì •ì˜ëœ ë³€ìˆ˜/í•¨ìˆ˜                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ì‚¬ìš©ì ìš”ì²­                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì¶œë ¥ í˜•ì‹:**
```json
{
  "steps": [
    {
      "step_number": 1,
      "description": "ë°ì´í„° ë¡œë“œ",
      "tool": "jupyter_cell",
      "tool_input": "import dask.dataframe as dd\ndf = dd.read_csv('data.csv')"
    },
    {
      "step_number": 2,
      "description": "ê²°ê³¼ ì„¤ëª…",
      "tool": "final_answer",
      "tool_input": "ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤."
    }
  ]
}
```

**ì½”ë“œ ìœ„ì¹˜:** `backend/prompts/auto_agent_prompts.py` â†’ `format_plan_prompt()`

---

### 3. Pre-Validation (ì‚¬ì „ ê²€ì¦)

ì‹¤í–‰ ì „ ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬:

| ê²€ì‚¬ í•­ëª© | ë„êµ¬ | ì„¤ëª… |
|----------|------|------|
| êµ¬ë¬¸ ì˜¤ë¥˜ | AST Parser | Python ë¬¸ë²• ì˜¤ë¥˜ ê²€ì¶œ |
| ë¯¸ì •ì˜ ë³€ìˆ˜ | Pyflakes | ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë³€ìˆ˜ ì°¸ì¡° ê²€ì¶œ |
| ë¯¸ì‚¬ìš© import | Pyflakes | ë¶ˆí•„ìš”í•œ import ê²€ì¶œ |
| íƒ€ì… íŒíŠ¸ | AST | ì˜ëª»ëœ íƒ€ì… ì–´ë…¸í…Œì´ì…˜ ê²€ì¶œ |

**ê²€ì¦ ê²°ê³¼:**
```json
{
  "is_valid": false,
  "errors": [
    {"line": 3, "message": "undefined name 'unknown_var'", "severity": "error"}
  ],
  "warnings": [
    {"line": 1, "message": "'pandas' imported but unused", "severity": "warning"}
  ]
}
```

**ì½”ë“œ ìœ„ì¹˜:** `backend/services/code_validator.py`

---

### 4. Step-by-Step Execution (ë‹¨ê³„ë³„ ì‹¤í–‰)

**ì‚¬ìš© ê°€ëŠ¥í•œ ë„êµ¬:**

| ë„êµ¬ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| `jupyter_cell` | Python ì½”ë“œ ì…€ ìƒì„± ë° ì‹¤í–‰ | ë°ì´í„° ì²˜ë¦¬, ì‹œê°í™” |
| `markdown` | ë§ˆí¬ë‹¤ìš´ ì…€ ìƒì„± | ì„¤ëª…, ì œëª©, ë¬¸ì„œí™” |
| `final_answer` | ìµœì¢… ì‘ë‹µ ì œê³µ | ì‘ì—… ì™„ë£Œ ë©”ì‹œì§€ |

**ì‹¤í–‰ íë¦„:**
```
Step 1 ì‹¤í–‰ â†’ ê²°ê³¼ í™•ì¸ â†’ Step 2 ì‹¤í–‰ â†’ ... â†’ ì™„ë£Œ
      â†“              â†“
   ì˜¤ë¥˜ ë°œìƒ    â†’  Reflectionìœ¼ë¡œ ë¶„ê¸°
```

**ì½”ë“œ ìœ„ì¹˜:** `frontend/services/AgentOrchestrator.ts` â†’ `executeStepWithRetry()`

---

### 5. Reflection (ì‹¤í–‰ ê²°ê³¼ ë¶„ì„)

ì‹¤í–‰ ê²°ê³¼ë¥¼ ë¶„ì„í•˜ì—¬ ë‹¤ìŒ í–‰ë™ì„ ê²°ì •í•©ë‹ˆë‹¤.

**ë¶„ì„ í•­ëª©:**
- ì²´í¬í¬ì¸íŠ¸ ë‹¬ì„± ì—¬ë¶€
- ì˜¤ë¥˜ íŒ¨í„´ ë¶„ì„
- ì‹ ë¢°ë„ ì ìˆ˜ ê³„ì‚°

**ê¶Œê³  í–‰ë™:**
| í–‰ë™ | ì¡°ê±´ | ì„¤ëª… |
|------|------|------|
| `continue` | ì„±ê³µ | ë‹¤ìŒ step ì§„í–‰ |
| `adjust` | ê²½ë¯¸í•œ ì˜¤ë¥˜ | í˜„ì¬ step ìˆ˜ì • í›„ ì¬ì‹œë„ |
| `retry` | ì¼ì‹œì  ì˜¤ë¥˜ | ë™ì¼ step ì¬ì‹œë„ |
| `replan` | ì‹¬ê°í•œ ì˜¤ë¥˜ | ì „ì²´ ê³„íš ì¬ìˆ˜ë¦½ |

**ì½”ë“œ ìœ„ì¹˜:** `backend/services/reflection_engine.py`

---

### 6. Adaptive Replanning (ì ì‘ì  ì¬ê³„íš)

ì˜¤ë¥˜ ë°œìƒ ì‹œ ê³„íšì„ ë™ì ìœ¼ë¡œ ìˆ˜ì •í•©ë‹ˆë‹¤.

**ì¬ê³„íš ìœ í˜•:**
| ìœ í˜• | ì„¤ëª… | ì‚¬ìš© ì‹œì  |
|------|------|----------|
| `refine` | í˜„ì¬ stepì˜ ì½”ë“œë§Œ ìˆ˜ì • | êµ¬ë¬¸ ì˜¤ë¥˜, ì‘ì€ ë²„ê·¸ |
| `insert_steps` | ëˆ„ë½ëœ step ì¶”ê°€ | ì „ì²˜ë¦¬ ëˆ„ë½, ì˜ì¡´ì„± ëˆ„ë½ |
| `replace_step` | step ì „ì²´ êµì²´ | ì ‘ê·¼ ë°©ì‹ ë³€ê²½ í•„ìš” |
| `replan_remaining` | ë‚¨ì€ ëª¨ë“  step ì¬ê³„íš | ê·¼ë³¸ì ì¸ ë°©í–¥ ìˆ˜ì • |

**ì¬ê³„íš í”„ë¡¬í”„íŠ¸ì— í¬í•¨ë˜ëŠ” ì •ë³´:**
- í˜„ì¬ê¹Œì§€ ì‹¤í–‰ëœ stepë“¤
- ë°œìƒí•œ ì˜¤ë¥˜ ë©”ì‹œì§€
- ë…¸íŠ¸ë¶ í˜„ì¬ ìƒíƒœ
- ì‚¬ìš© ê°€ëŠ¥í•œ ë³€ìˆ˜/í•¨ìˆ˜

**ì½”ë“œ ìœ„ì¹˜:** `backend/prompts/auto_agent_prompts.py` â†’ `format_replan_prompt()`

---

## Frontend ìƒíƒœ ë¨¸ì‹ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  planning  â”‚ â”€â”€â–¶ â”‚  validating â”‚ â”€â”€â–¶ â”‚ executing â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
                   â”‚  replanning â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                          â”‚                  â–¼
                          â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â””â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚  reflecting â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â–¼                                 â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ completed â”‚                     â”‚  failed  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì½”ë“œ ìœ„ì¹˜:** `frontend/services/AgentOrchestrator.ts`

---

## í•µì‹¬ íŒŒì¼ ìœ„ì¹˜

| ì»´í¬ë„ŒíŠ¸ | íŒŒì¼ ê²½ë¡œ |
|----------|----------|
| API í•¸ë“¤ëŸ¬ | `backend/handlers/auto_agent.py` |
| í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ | `backend/prompts/auto_agent_prompts.py` |
| Knowledge Base | `backend/knowledge/loader.py` |
| ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°€ì´ë“œ | `backend/knowledge/libraries/*.md` |
| ì½”ë“œ ê²€ì¦ê¸° | `backend/services/code_validator.py` |
| Reflection ì—”ì§„ | `backend/services/reflection_engine.py` |
| Frontend ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„° | `frontend/services/AgentOrchestrator.ts` |

---

## ì•„í‚¤í…ì²˜ íŠ¹ì§•

1. **Self-Healing**: ì˜¤ë¥˜ ë°œìƒ ì‹œ ìë™ìœ¼ë¡œ ì½”ë“œ ìˆ˜ì • ì‹œë„
2. **Context-Aware**: ë…¸íŠ¸ë¶ ìƒíƒœë¥¼ ì§€ì†ì ìœ¼ë¡œ ì¶”ì 
3. **Knowledge-Enhanced**: ë¼ì´ë¸ŒëŸ¬ë¦¬ë³„ ì „ë¬¸ ì§€ì‹ ë™ì  ë¡œë”©
4. **Fail-Fast Validation**: ì‹¤í–‰ ì „ ì½”ë“œ í’ˆì§ˆ ì‚¬ì „ ê²€ì¦
5. **Adaptive Planning**: ìƒí™©ì— ë”°ë¥¸ ìœ ì—°í•œ ê³„íš ìˆ˜ì •
