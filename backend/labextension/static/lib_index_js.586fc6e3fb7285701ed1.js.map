{"version":3,"file":"lib_index_js.586fc6e3fb7285701ed1.js","mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACyG;AACjD;AACR;AACkB;AACD;AACA;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,iDAAU,IAAI,6BAA6B;AAC7D;AACA,oCAAoC,+CAAQ;AAC5C,8BAA8B,+CAAQ;AACtC,sCAAsC,+CAAQ;AAC9C,0CAA0C,+CAAQ;AAClD,wDAAwD,+CAAQ;AAChE,gDAAgD,+CAAQ;AACxD,4CAA4C,+CAAQ;AACpD,sCAAsC,+CAAQ;AAC9C;AACA,gDAAgD,+CAAQ;AACxD,8DAA8D,+CAAQ;AACtE,gDAAgD,+CAAQ;AACxD;AACA,sCAAsC,+CAAQ;AAC9C,oDAAoD,+CAAQ;AAC5D,2BAA2B,6CAAM;AACjC,gCAAgC,6CAAM;AACtC,6BAA6B,6CAAM;AACnC,6BAA6B,6CAAM;AACnC,gCAAgC,6CAAM;AACtC,4BAA4B,6CAAM;AAClC;AACA,IAAI,0DAAmB;AACvB;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,IAAI,gDAAS;AACb;AACA,KAAK;AACL;AACA,IAAI,gDAAS;AACb;AACA;AACA;AACA,6BAA6B,GAAG,wEAAyB;AACzD,0CAA0C,0EAAiB;AAC3D;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,iCAAiC,kDAAW;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA,sBAAsB,6CAA6C;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,mCAAmC;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,yDAAyD;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,sCAAsC;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,gDAAS;AACb,iDAAiD,oBAAoB;AACrE,KAAK;AACL;AACA,IAAI,gDAAS;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,mBAAmB;AACjE;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,QAAQ;AACxE;AACA,+DAA+D,SAAS;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA,+CAA+C,mBAAmB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8FAA8F,QAAQ;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG,kBAAkB;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,QAAQ;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,kCAAkC;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,WAAW,GAAG,wCAAwC;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,oBAAoB;AACtE;AACA,mEAAmE,GAAG;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,qBAAqB,UAAU,mBAAmB;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,UAAU;AAC9B;AACA,yCAAyC,gBAAgB,iCAAiC,qBAAqB,kBAAkB,wBAAwB;AACzJ,gBAAgB,oBAAoB,EAAE;AACtC;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,wCAAwC;AACxC,wCAAwC,gBAAgB,iBAAiB,iBAAiB;AAC1F;AACA;AACA,+BAA+B,gBAAgB,gBAAgB;AAC/D;AACA;AACA;AACA,mEAAmE;AACnE,YAAY;AACZ;AACA,mCAAmC,WAAW,0BAA0B;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,aAAa;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,sFAAsF;AAC1I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,kEAAkE;AAC/H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,6DAA6D;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,0DAAmB,UAAU,yCAAyC;AACtF,YAAY,0DAAmB,UAAU,wCAAwC;AACjF,gBAAgB,0DAAmB,UAAU,uCAAuC;AACpF,oBAAoB,0DAAmB,UAAU,uEAAuE;AACxH,wBAAwB,0DAAmB,WAAW,+EAA+E;AACrI,wBAAwB,0DAAmB,WAAW,sGAAsG;AAC5J;AACA,gBAAgB,0DAAmB,WAAW,yCAAyC;AACvF,YAAY,0DAAmB,UAAU,mEAAmE,aAAa,GAAG;AAC5H,4BAA4B,0DAAmB,UAAU,yCAAyC;AAClG,iDAAiD,0DAAmB,UAAU,2FAA2F;AACzK,oBAAoB,0DAAmB,WAAW,sIAAsI;AACxL,8CAA8C,0DAAmB,UAAU,yFAAyF;AACpK,oBAAoB,0DAAmB,WAAW,4LAA4L;AAC9O,gBAAgB,0DAAmB,WAAW,6CAA6C;AAC3F,yDAAyD,0DAAmB,WAAW,4CAA4C;AACnI;AACA;AACA,qBAAqB,0DAAmB,UAAU,sCAAsC;AACxF,gBAAgB,0DAAmB,UAAU,6CAA6C;AAC1F,oBAAoB,0DAAmB;AACvC,oBAAoB,0DAAmB,WAAW,+CAA+C;AACjG;AACA;AACA;AACA,gBAAgB,0DAAmB,UAAU,8CAA8C;AAC3F,oBAAoB,0DAAmB,UAAU,wDAAwD,UAAU,gBAAgB,MAAM;AACzI,gBAAgB,0DAAmB,UAAU,uCAAuC;AACpF;AACA,4BAA4B,0DAAmB,UAAU,qFAAqF,WAAW,GAAG;AAC5J,wBAAwB,0DAAmB,UAAU,gDAAgD;AACrG,2DAA2D,0DAAmB,UAAU,4CAA4C;AACpI,gCAAgC,0DAAmB,WAAW,sIAAsI;AACpM,wDAAwD,0DAAmB,UAAU,4CAA4C;AACjI,gCAAgC,0DAAmB,WAAW,4LAA4L;AAC1P,wDAAwD,0DAAmB,UAAU,8CAA8C;AACnI,wDAAwD,0DAAmB;AAC3E,wBAAwB,0DAAmB,UAAU,8CAA8C;AACnG,4BAA4B,0DAAmB,WAAW,2CAA2C,uEAAuE,GAAG;AAC/K,4BAA4B,0DAAmB,UAAU,4CAA4C,iCAAiC,0DAAmB,WAAW,kDAAkD;AACtN,iBAAiB;AACjB,uBAAuB,0DAAmB,UAAU,mEAAmE,qCAAqC,GAAG;AAC/J,uCAAuC,0DAAmB,QAAQ,gDAAgD;AAClH,iCAAiC,0DAAmB,QAAQ,8CAA8C;AAC1G,gBAAgB,0DAAmB,UAAU,8CAA8C;AAC3F,oBAAoB,0DAAmB;AACvC;AACA;AACA,oBAAoB,0DAAmB;AACvC;AACA;AACA,6CAA6C,0DAAmB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,0DAAmB,UAAU,6BAA6B;AACtE,yBAAyB,0DAAmB,CAAC,yDAAa,IAAI,wGAAwG;AACtK,QAAQ,0DAAmB,UAAU,8BAA8B;AACnE,YAAY,0DAAmB;AAC/B,YAAY,0DAAmB,UAAU,sCAAsC;AAC/E,gBAAgB,0DAAmB,aAAa,kGAAkG;AAClJ,oBAAoB,0DAAmB,UAAU,0JAA0J;AAC3M,wBAAwB,0DAAmB,eAAe,wBAAwB;AAClF,wBAAwB,0DAAmB,WAAW,qFAAqF;AAC3I,wBAAwB,0DAAmB,WAAW,wCAAwC;AAC9F,wBAAwB,0DAAmB,WAAW,wCAAwC;AAC9F,gBAAgB,0DAAmB,aAAa,yGAAyG;AACzJ,oBAAoB,0DAAmB,UAAU,0JAA0J;AAC3M,wBAAwB,0DAAmB,WAAW,sCAAsC;AAC5F,wBAAwB,0DAAmB,WAAW,qCAAqC;AAC3F,wBAAwB,0DAAmB,WAAW,wCAAwC;AAC9F,wBAAwB,0DAAmB,WAAW,sCAAsC;AAC5F,wBAAwB,0DAAmB,WAAW,wCAAwC;AAC9F,wBAAwB,0DAAmB,WAAW,uCAAuC;AAC7F,wBAAwB,0DAAmB,WAAW,sCAAsC;AAC5F,wBAAwB,0DAAmB,WAAW,qCAAqC;AAC3F,wBAAwB,0DAAmB,WAAW,wCAAwC;AAC9F,QAAQ,0DAAmB,UAAU,gCAAgC;AACrE,qCAAqC,0DAAmB,UAAU,mCAAmC;AACrG,gBAAgB,0DAAmB;AACnC,gBAAgB,0DAAmB,QAAQ,kCAAkC;AAC7E;AACA;AACA;AACA;AACA,4BAA4B,0DAAmB,UAAU,6DAA6D,SAAS,GAAG;AAClI,wBAAwB,0DAAmB,UAAU,sCAAsC;AAC3F,4BAA4B,0DAAmB,WAAW,oCAAoC;AAC9F,4BAA4B,0DAAmB,WAAW,oCAAoC;AAC9F,wBAAwB,0DAAmB,UAAU,sCAAsC,kDAAkD;AAC7I;AACA,sCAAsC,6EAAoB;AAC1D;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,4BAA4B,0DAAmB,UAAU,6EAA6E;AACtI;AACA,aAAa;AACb,6DAA6D,0DAAmB,UAAU,0DAA0D;AACpJ,gBAAgB,0DAAmB,UAAU,sCAAsC;AACnF,oBAAoB,0DAAmB,WAAW,oCAAoC;AACtF,gBAAgB,0DAAmB,UAAU,wDAAwD;AACrG,oBAAoB,0DAAmB,WAAW,mCAAmC;AACrF,oBAAoB,0DAAmB,WAAW,mCAAmC;AACrF,oBAAoB,0DAAmB,WAAW,mCAAmC;AACrF,YAAY,0DAAmB,UAAU,qBAAqB;AAC9D,QAAQ,0DAAmB,UAAU,uCAAuC;AAC5E,YAAY,0DAAmB,UAAU,qCAAqC;AAC9E,gBAAgB,0DAAmB,eAAe,6BAA6B,0DAA0D;AACzI;AACA,2FAA2F;AAC3F,gBAAgB,0DAAmB,aAAa,qKAAqK;AACrN,YAAY,0DAAmB,UAAU,gCAAgC;AACzE,gBAAgB,0DAAmB,UAAU,6CAA6C;AAC1F,oBAAoB,0DAAmB,aAAa,mCAAmC,4DAA4D,kCAAkC,0CAA0C,YAAY;AAC3O,wBAAwB,0DAAmB,UAAU,wGAAwG;AAC7J;AACA,wBAAwB,0DAAmB,WAAW,siBAAsiB;AAC5lB;AACA,wBAAwB,0DAAmB,WAAW,kNAAkN;AACxQ,wBAAwB,0DAAmB,WAAW,kCAAkC;AACxF,wBAAwB,0DAAmB,UAAU,2GAA2G;AAChK,4BAA4B,0DAAmB,WAAW,yHAAyH;AACnL,yCAAyC,0DAAmB,UAAU,qCAAqC;AAC3G,wBAAwB,0DAAmB,aAAa,mCAAmC,6DAA6D,oBAAoB,sBAAsB,+BAA+B;AACjO,4BAA4B,0DAAmB,UAAU,uEAAuE;AAChI,gCAAgC,0DAAmB,WAAW,kNAAkN;AAChR,4BAA4B,0DAAmB;AAC/C,4BAA4B,0DAAmB,WAAW,qCAAqC;AAC/F,wBAAwB,0DAAmB,aAAa,mCAAmC,8DAA8D,oBAAoB,uBAAuB,+BAA+B;AACnO,4BAA4B,0DAAmB,UAAU,uEAAuE;AAChI,gCAAgC,0DAAmB,WAAW,0HAA0H;AACxL,4BAA4B,0DAAmB;AAC/C,4BAA4B,0DAAmB,WAAW,qCAAqC;AAC/F,gBAAgB,0DAAmB,UAAU,kCAAkC;AAC/E,oBAAoB,0DAAmB,WAAW,iCAAiC;AACnF,CAAC;AACD;AACA;AACA;AACA;AACO,+BAA+B,kEAAW;AACjD;AACA;AACA,4BAA4B,sDAAe;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,0DAAmB,cAAc,4FAA4F;AAC7I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,+CAA+C,WAAW;AAC1D;AACA;;AAEA;AACA,YAAY,WAAW;AACvB,cAAc,gBAAgB;AAC9B,kBAAkB,iBAAiB;AACnC,kBAAkB,aAAa;;AAE/B;;AAEA;AACA;AACA,kCAAkC,WAAW,OAAO,QAAQ;AAC5D;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW,MAAM,gCAAgC;AACzF,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;;;;;;;;;;;;;;;;;;;;ACrvCA;AACA;AACA;AACA;AACwC;AACoF;AAC9D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACO,kCAAkC,2BAA2B;AACpE,gCAAgC,+CAAQ;AACxC,4CAA4C,+CAAQ;AACpD,oCAAoC,+CAAQ;AAC5C,8CAA8C,+CAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,0DAAmB,CAAC,iDAAM,IAAI;AAC1C;AACA;AACA;AACA;AACA,WAAW;AACX,QAAQ,0DAAmB,CAAC,sDAAW;AACvC,YAAY,0DAAmB,CAAC,8CAAG,IAAI,+CAA+C;AACtF,gBAAgB,0DAAmB,CAAC,uEAAe,IAAI,kBAAkB;AACzE,gBAAgB,0DAAmB,CAAC,qDAAU,IAAI,eAAe;AACjE,QAAQ,0DAAmB,CAAC,wDAAa;AACzC,YAAY,0DAAmB,CAAC,8CAAG,IAAI,yDAAyD;AAChG,gBAAgB,0DAAmB,CAAC,qDAAU,IAAI,2CAA2C;AAC7F,gBAAgB,0DAAmB,CAAC,oDAAS,IAAI;AACjD;AACA;AACA;AACA,uBAAuB;AACvB,gBAAgB,0DAAmB,CAAC,8CAAG;AACvC,oBAAoB,0DAAmB,CAAC,qDAAU,IAAI,sEAAsE;AAC5H,oBAAoB,0DAAmB,CAAC,8CAAG,IAAI,2CAA2C,2CAA2C,0DAAmB,CAAC,+CAAI,IAAI;AACjK;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,gBAAgB,0DAAmB,CAAC,8CAAG,IAAI;AAC3C;AACA;AACA;AACA,uBAAuB;AACvB,oBAAoB,0DAAmB,CAAC,qDAAU,IAAI,6CAA6C;AACnG;AACA,wBAAwB,0DAAmB;AAC3C,wBAAwB,0DAAmB;AAC3C;AACA,wBAAwB,0DAAmB;AAC3C;AACA,wBAAwB,0DAAmB;AAC3C;AACA,wBAAwB,0DAAmB;AAC3C;AACA,QAAQ,0DAAmB,CAAC,wDAAa,IAAI,MAAM,6BAA6B;AAChF,YAAY,0DAAmB,CAAC,iDAAM,IAAI,0CAA0C;AACpF,YAAY,0DAAmB,CAAC,iDAAM,IAAI,oGAAoG,0DAAmB,CAAC,uEAAe,SAAS;AAC1L;;;;;;;;;;;;;;;;;AChFA;AACA;AACA;AACA;AACmD;AAC5C,yBAAyB,gCAAgC;AAChE,oCAAoC,+CAAQ;AAC5C,sCAAsC,+CAAQ;AAC9C,wCAAwC,+CAAQ;AAChD;AACA,4CAA4C,+CAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,MAAM;AACpE;AACA;AACA,0CAA0C,+CAAQ;AAClD;AACA,4CAA4C,+CAAQ;AACpD,wCAAwC,+CAAQ;AAChD,sCAAsC,+CAAQ;AAC9C;AACA,4CAA4C,+CAAQ;AACpD,0CAA0C,+CAAQ;AAClD;AACA,IAAI,gDAAS;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,yBAAyB,EAAE,gBAAgB;AAC3C,qCAAqC,EAAE,KAAK;AAC5C;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA,uCAAuC,aAAa;AACpD;AACA;AACA;AACA,uCAAuC,YAAY;AACnD;AACA;AACA;AACA,mCAAmC,qDAAqD;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,0DAAmB,UAAU,wCAAwC;AACjF,QAAQ,0DAAmB,UAAU,uCAAuC;AAC5E,YAAY,0DAAmB,UAAU,uCAAuC;AAChF,gBAAgB,0DAAmB;AACnC,gBAAgB,0DAAmB,aAAa,+EAA+E;AAC/H,YAAY,0DAAmB,UAAU,wCAAwC;AACjF,gBAAgB,0DAAmB,UAAU,sCAAsC;AACnF,oBAAoB,0DAAmB,YAAY,sCAAsC;AACzF,oBAAoB,0DAAmB,aAAa,sGAAsG;AAC1J,wBAAwB,0DAAmB,aAAa,iBAAiB;AACzE,wBAAwB,0DAAmB,aAAa,eAAe;AACvE,wBAAwB,0DAAmB,aAAa,iBAAiB;AACzE,0CAA0C,0DAAmB,UAAU,yCAAyC;AAChH,oBAAoB,0DAAmB;AACvC,oBAAoB,0DAAmB,UAAU,sCAAsC;AACvF,wBAAwB,0DAAmB,YAAY,sCAAsC;AAC7F,wBAAwB,0DAAmB,YAAY,sMAAsM;AAC7P,oBAAoB,0DAAmB,UAAU,sCAAsC;AACvF,wBAAwB,0DAAmB,YAAY,sCAAsC;AAC7F,wBAAwB,0DAAmB,aAAa,4GAA4G;AACpK,4BAA4B,0DAAmB,aAAa,+BAA+B;AAC3F,4BAA4B,0DAAmB,aAAa,yBAAyB;AACrF,4BAA4B,0DAAmB,aAAa,2BAA2B;AACvF,wCAAwC,0DAAmB,UAAU,yCAAyC;AAC9G,oBAAoB,0DAAmB;AACvC,oBAAoB,0DAAmB,UAAU,sCAAsC;AACvF,wBAAwB,0DAAmB,YAAY,sCAAsC;AAC7F,wBAAwB,0DAAmB,YAAY,iKAAiK;AACxN,oBAAoB,0DAAmB,UAAU,sCAAsC;AACvF,wBAAwB,0DAAmB,YAAY,sCAAsC;AAC7F,wBAAwB,0DAAmB,YAAY,yMAAyM;AAChQ,oBAAoB,0DAAmB,UAAU,sCAAsC;AACvF,wBAAwB,0DAAmB,YAAY,sCAAsC;AAC7F,wBAAwB,0DAAmB,YAAY,mKAAmK;AAC1N,0CAA0C,0DAAmB,UAAU,yCAAyC;AAChH,oBAAoB,0DAAmB;AACvC,oBAAoB,0DAAmB,UAAU,sCAAsC;AACvF,wBAAwB,0DAAmB,YAAY,sCAAsC;AAC7F,wBAAwB,0DAAmB,YAAY,sJAAsJ;AAC7M,oBAAoB,0DAAmB,UAAU,sCAAsC;AACvF,wBAAwB,0DAAmB,YAAY,sCAAsC;AAC7F,wBAAwB,0DAAmB,aAAa,4GAA4G;AACpK,4BAA4B,0DAAmB,aAAa,gBAAgB;AAC5E,4BAA4B,0DAAmB,aAAa,sBAAsB;AAClF,4BAA4B,0DAAmB,aAAa,wBAAwB;AACpF,2BAA2B,0DAAmB,UAAU,4CAA4C;AACpG,YAAY,0DAAmB,UAAU,uCAAuC;AAChF,gBAAgB,0DAAmB,aAAa,4FAA4F;AAC5I,gBAAgB,0DAAmB,aAAa,+GAA+G;AAC/J,gBAAgB,0DAAmB,aAAa,6FAA6F;AAC7I;;;;;;;;;;;;;;;;;;;;;;;;;ACxJA;AACA;AACA;AACA;AACwC;AAC+E;AACrE;AACU;AACA;AACE;AACZ;AACE;AAC7C,8BAA8B,+CAA+C;AACpF,oCAAoC,+CAAQ;AAC5C,0CAA0C,+CAAQ;AAClD,YAAY,yDAAyD;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,0DAAmB,CAAC,uEAAe,IAAI,mBAAmB;AAC/F,kCAAkC,0DAAmB,CAAC,iEAAS,IAAI,mBAAmB;AACtF,qCAAqC,0DAAmB,CAAC,kEAAU,IAAI,mBAAmB;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,0DAAmB,CAAC,+CAAI,IAAI;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,QAAQ,0DAAmB,CAAC,sDAAW,IAAI,MAAM,8BAA8B,sBAAsB;AACrG,YAAY,0DAAmB,CAAC,8CAAG,IAAI,+EAA+E;AACtH,gBAAgB,0DAAmB,CAAC,8CAAG,IAAI,+CAA+C;AAC1F,oBAAoB,0DAAmB,CAAC,qDAAU,IAAI,0CAA0C;AAChG,oBAAoB,0DAAmB,CAAC,+CAAI,IAAI,sHAAsH;AACtK,gBAAgB,0DAAmB,CAAC,8CAAG,IAAI,iBAAiB;AAC5D,oBAAoB,0DAAmB,CAAC,qDAAU,IAAI,4DAA4D,iBAAiB,0DAAmB,CAAC,sEAAc,IAAI,mBAAmB,MAAM,0DAAmB,CAAC,sEAAc,IAAI,mBAAmB;AAC3P,oBAAoB,0DAAmB,CAAC,qDAAU,IAAI,iCAAiC;AACvF,wBAAwB,0DAAmB,CAAC,iEAAS,IAAI,mBAAmB;AAC5E,wBAAwB,0DAAmB,CAAC,8CAAG,IAAI,OAAO;AAC1D,gBAAgB,0DAAmB,CAAC,yDAAc,IAAI,+CAA+C,8BAA8B;AACnI,gBAAgB,0DAAmB,CAAC,8CAAG,IAAI,2DAA2D;AACtG,oBAAoB,0DAAmB,CAAC,qDAAU,IAAI,6CAA6C;AACnG,oBAAoB,0DAAmB,CAAC,qDAAU,IAAI,6CAA6C;AACnG;AACA;AACA,2BAA2B,0DAAmB,CAAC,8CAAG,IAAI,OAAO;AAC7D,gBAAgB,0DAAmB,CAAC,qDAAU,IAAI,yCAAyC;AAC3F;AACA;AACA,kCAAkC,0DAAmB,CAAC,8CAAG,IAAI,OAAO;AACpE,gBAAgB,0DAAmB,CAAC,qDAAU,IAAI,uCAAuC;AACzF;AACA;AACA,YAAY,0DAAmB,CAAC,mDAAQ,IAAI,iBAAiB;AAC7D,gBAAgB,0DAAmB,CAAC,8CAAG,IAAI;AAC3C;AACA;AACA;AACA;AACA,uBAAuB;AACvB,oBAAoB,0DAAmB,CAAC,qDAAU,IAAI,wEAAwE;AAC9H,oBAAoB,0DAAmB,CAAC,qDAAU,IAAI,wBAAwB,2BAA2B;AACzG,qCAAqC,0DAAmB,CAAC,uDAAc;AACvE,wBAAwB,0DAAmB,CAAC,qDAAU,IAAI,+EAA+E;AACzI,wBAAwB,0DAAmB,CAAC,qDAAU,IAAI,0BAA0B,mDAAmD;AACvI,YAAY,0DAAmB,CAAC,8CAAG,IAAI,qDAAqD;AAC5F,8BAA8B,0DAAmB,CAAC,iDAAM,IAAI,uDAAuD;AACnH,+CAA+C,0DAAmB,CAAC,iDAAM,IAAI,8DAA8D;AAC3I,2BAA2B,0DAAmB,CAAC,iDAAM,IAAI,kDAAkD;AAC3G;;;;;;;;;;;;;;;;;;;ACpGA;AACA;AACA;AACA;AACyD;AACS;AACU;AACF;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,kEAAa;AACjB,IAAI,2EAAiB;AACrB,IAAI,qFAAsB;AAC1B,IAAI,mFAAqB;AACzB;AACA,iEAAe,OAAO,EAAC;;;;;;;;;;;;;;;;;;ACrBvB;AACA;AACA;AACA;AACA;AACwD;AAClB;AACtC;AACA;AACA;AACO;AACP;AACA;AACA,eAAe,kEAAgB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,6BAA6B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,YAAY;AAChC;AACA;AACA;AACA;AACA,yBAAyB,8CAAU;AACnC,KAAK;AACL;AACA;AACA,yBAAyB,8CAAU;AACnC,KAAK;AACL;AACA;AACA,yBAAyB,8CAAU;AACnC,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,8CAAU;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,8CAAU;AAC3B,6BAA6B,UAAU;AACvC;AACA;AACA,iBAAiB,8CAAU;AAC3B,6BAA6B,UAAU;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,oBAAoB;AACxC;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,oBAAoB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,WAAW,GAAG,wCAAwC;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,8CAAU;AACvB;AACA,+BAA+B,UAAU;AACzC;AACA;;AAEA;AACA,EAAE;AACF;AACA;AACA,aAAa,8CAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,UAAU;AAC7C;;AAEA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,EAAE;AACF;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mCAAmC,UAAU;AAC7C;;AAEA;AACA;AACA,EAAE;AACF;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,UAAU;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC,uCAAuC,gBAAgB,iBAAiB,iBAAiB;AACzF,YAAY;AACZ;AACA,6BAA6B,gBAAgB,iBAAiB,iBAAiB;AAC/E,YAAY;AACZ;AACA;AACA,iCAAiC,WAAW,0BAA0B;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC,oCAAoC,gBAAgB,iBAAiB,iBAAiB;AACtF;AACA;AACA,2BAA2B,gBAAgB,gBAAgB;AAC3D,oBAAoB,cAAc;AAClC;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,WAAW,0BAA0B;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,UAAU,QAAQ,WAAW;AAC9D;AACA,2BAA2B,WAAW,qBAAqB,YAAY;AACvE;AACA,gDAAgD,WAAW;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,8CAAU;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5xBA;AACA;AACA;AACA;AACiD;AACiC;AACxB;AACN;AACX;AACf;AACiC;AACH;AACsB;AACR;AAChB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,8DAAO;AAC5B;AACA,YAAY,wDAAW;AACvB,CAAC;AACD;AACA;AACA;AACA;AACA,gCAAgC,6DAAW;AAC3C;AACA;AACA;AACA;AACA,+BAA+B,+DAAW;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,QAAQ;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,8DAAY,uBAAuB,qCAAqC;AAC5F;AACA,qBAAqB;AACrB;AACA;AACA,oBAAoB,8DAAY,qBAAqB,aAAa;AAClE;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA,gBAAgB,8DAAY,uBAAuB,iBAAiB;AACpE,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA,YAAY,8DAAY,0BAA0B,iBAAiB;AACnE;AACA;AACA;AACA;AACA,YAAY,8DAAY,oBAAoB,cAAc;AAC1D;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,8DAAY,sBAAsB,iBAAiB;AAC/D;AACA;AACA;AACA,YAAY,8DAAY,iBAAiB,cAAc,KAAK,iBAAiB;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,8DAAY,wBAAwB,SAAS;AACzD;AACA,aAAa;AACb;AACA;AACA;AACA,YAAY,8DAAY,qBAAqB,cAAc;AAC3D;AACA,aAAa;AACb;AACA;AACA;AACA,sBAAsB,0DAAW;AACjC;AACA,gBAAgB,0DAAmB,CAAC,wDAAa,IAAI,cAAc;AACnE,YAAY,0DAAmB,UAAU,SAAS,wDAAwD,0CAA0C,0DAAmB,UAAU;AACjL;AACA,mBAAmB;AACnB,gBAAgB,0DAAmB,CAAC,8EAAkB,IAAI;AAC1D,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,6DAAW;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,0DAAW;AACjC,gBAAgB,0DAAmB,CAAC,wDAAa,IAAI,cAAc;AACnE,YAAY,0DAAmB,CAAC,sFAAsB,IAAI,kEAAkE;AAC5H;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA,eAAe,oEAAgB;AAC/B,eAAe,2DAAS,EAAE,iEAAe;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mDAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;AC/NA;AACA;AACA;AACA;AACA;AACwD;AACD;AACvD;AACA;AACA;AACO;AACP;AACA;AACA,eAAe,kEAAgB;AAC/B,eAAe,iEAAe;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,SAAS;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC,uCAAuC,iCAAiC,iBAAiB,iBAAiB;AAC1G;AACA;AACA,6BAA6B,iCAAiC,iBAAiB,iBAAiB;AAChG;AACA;AACA;AACA,iCAAiC,WAAW,0BAA0B;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,6BAA6B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,YAAY;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,qDAAqD,cAAc;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,WAAW,GAAG,wCAAwC;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,oBAAoB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;ACljBA;AACA;AACA;AACA;AAC0D;AACY;AACd;AACI;AACR;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA,eAAe,oEAAe,EAAE,iEAAe,EAAE,kEAAgB;AACjE;AACA;AACA;AACA;AACA,mCAAmC,4DAAU;AAC7C;AACA,mCAAmC,oEAAgB;AACnD;AACA;AACA,oCAAoC,+DAAa;AACjD;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iDAAiD,WAAW;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC0C;AACI;AACS;AACkC;AAClF;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,mDAAU;AACtD,gCAAgC,uDAAY;AAC5C,iCAAiC,+DAAa;AAC9C;AACA;AACA,SAAS;AACT,wBAAwB,GAAG,wEAAyB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,6CAA6C;AACtE;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,4BAA4B,gBAAgB;AAC5C,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,oBAAoB;AACzE,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,iBAAiB,MAAM,iBAAiB;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,qDAAqD;AACrG;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,iBAAiB,eAAe,iBAAiB;AAC9F,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,iBAAiB,MAAM,iBAAiB;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,gCAAgC,iCAAiC;AACjE,6EAA6E,gCAAgC;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,kBAAkB;AAC1E,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,OAAO;AAC1D,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,cAAc,oEAAoE;AAClF,cAAc,0DAA0D;AACxE,cAAc,2DAA2D;AACzE,cAAc,qDAAqD;AACnE;AACA,cAAc,8FAA8F;AAC5G;AACA,cAAc,mFAAmF;AACjG,cAAc,4CAA4C;AAC1D,cAAc,6CAA6C;AAC3D,cAAc,wCAAwC;AACtD,cAAc,wCAAwC;AACtD,cAAc,6CAA6C;AAC3D;AACA,cAAc,qDAAqD;AACnE,cAAc,uEAAuE;AACrF;AACA,cAAc,gEAAgE;AAC9E;AACA,qBAAqB,kBAAkB;AACvC;AACA;AACA,yBAAyB;AACzB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,yCAAyC;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,mBAAmB;AACtE,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,mBAAmB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,yBAAyB;AAC5E,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,eAAe;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,oBAAoB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,UAAU;AACvD,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,qEAAsB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,wBAAwB,SAAS,2BAA2B;AACrF,gCAAgC,2BAA2B;AAC3D;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,gBAAgB,8BAA8B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,iBAAiB,EAAC;;;;;;;;;;;;;;;;;ACrhCjC;AACA;AACA;AACA;AAC2D;AACpD;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,6DAAU;AACzC;AACA;AACA,2BAA2B,yDAAM;AACjC;AACA,yEAAyE;AACzE;AACA;AACA;AACA;AACA;AACA,yBAAyB,EAAE,gBAAgB;AAC3C,qCAAqC,EAAE,KAAK;AAC5C;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,aAAa;AACrD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,+DAA+D,+BAA+B;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,aAAa;AACrD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,oDAAoD,gBAAgB;AACpE,+BAA+B,gBAAgB,IAAI,oBAAoB;AACvE,aAAa;AACb;AACA;AACA;AACA,uFAAuF,gBAAgB;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,aAAa;AACrD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,uDAAuD,MAAM;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,cAAc;AACtC;AACA;AACA,kDAAkD,cAAc;AAChE;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,aAAa;AACrD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,+DAA+D,yCAAyC;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,aAAa;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,aAAa;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,aAAa;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,aAAa;AACrD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,aAAa;AACrC,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,aAAa;AACrD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,aAAa;AACrC,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,aAAa;AACrD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,aAAa;AACrC,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,aAAa;AACrD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,aAAa;AACrC,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,aAAa;AACrD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,aAAa;AACrC,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,aAAa;AACrD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,wDAAwD,MAAM;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,cAAc;AACtC;AACA;AACA,kDAAkD,cAAc;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC/aA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,EAAE,gBAAgB;AAC3C,qCAAqC,EAAE,KAAK;AAC5C;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,aAAa;AACrD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,gCAAgC,gDAAgD;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,aAAa,QAAQ,OAAO;AACpE;AACA;AACA;AACA,gCAAgC,sCAAsC;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,aAAa,QAAQ,OAAO;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,aAAa,QAAQ,OAAO;AACpE;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,gCAAgC,kCAAkC;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACxIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACuD;AAChD;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,UAAU;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,WAAW;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,WAAW;AACxD;AACA;AACA;AACA;AACA;AACA,8BAA8B,iEAAe;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,oBAAoB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,wBAAwB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,kBAAkB,IAAI,mBAAmB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,iEAAe,YAAY,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;;AC3X5B;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACrBA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA,CAAC,gCAAgC;AAC1B;AACP;AACA;AACA;AACA;AACA;AACA,CAAC,gCAAgC;;;;;;;;;;;;;;;;ACfjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,oCAAoC,iCAAiC,IAAI,sBAAsB;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA,sEAAsE,MAAM,IAAI,EAAE;AAClF;AACA,wFAAwF,MAAM,IAAI,EAAE;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,EAAE;AACtE;AACA;AACA;AACA,6DAA6D,EAAE;AAC/D;AACA;AACA;AACA;AACA,iEAAe,aAAa,EAAC;;;;;;;;;;;;;;;;;;;;;AC9Q7B;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA,kCAAkC,mBAAmB;AACrD,gCAAgC;AAChC,gCAAgC;AAChC,kCAAkC,kBAAkB;AACpD,iCAAiC;AACjC,mCAAmC,kBAAkB;AACrD,kCAAkC;AAClC,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,mBAAmB;AAC7C;AACA;AACA,kCAAkC,eAAe,IAAI,kBAAkB;AACvE,SAAS;AACT;AACA,KAAK;AACL;AACA,6CAA6C,EAAE;AAC/C,0BAA0B,mBAAmB;AAC7C;AACA;AACA,kCAAkC,cAAc,IAAI,kBAAkB;AACtE,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,0BAA0B,mBAAmB;AAC7C;AACA;AACA,kCAAkC,cAAc,IAAI,kBAAkB;AACtE,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,0BAA0B,mBAAmB;AAC7C;AACA;AACA,kCAAkC,cAAc,IAAI,MAAM;AAC1D,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,QAAQ;AAC/C;AACA,8BAA8B,mBAAmB;AACjD;AACA;AACA,sCAAsC,eAAe,IAAI,MAAM;AAC/D,aAAa;AACb;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,QAAQ;AAC/C;AACA,8BAA8B,mBAAmB;AACjD;AACA;AACA,sCAAsC,eAAe,IAAI,MAAM;AAC/D,aAAa;AACb;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA,8BAA8B,mBAAmB;AACjD;AACA;AACA,sCAAsC,gBAAgB,IAAI,SAAS;AACnE,aAAa;AACb;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,oEAAoE,gBAAgB;AACpF;AACA,sCAAsC,sBAAsB,eAAe;AAC3E;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,mBAAmB,IAAI,gCAAgC;AAC5G;AACA;AACA,iDAAiD,mBAAmB,IAAI,KAAK;AAC7E;AACA;AACA;AACA;AACA,mEAAmE,mBAAmB,IAAI,gBAAgB;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,mBAAmB,IAAI,uDAAuD;AAChI;AACA;AACA;AACA;AACA;AACA,kDAAkD,mBAAmB,IAAI,kCAAkC;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,mBAAmB,IAAI,6BAA6B;AAClG;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,8CAA8C,OAAO,IAAI,kCAAkC;AAC3F,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,kDAAkD,OAAO,IAAI,kCAAkC;AAC/F,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;;;;;;;;;;ACljBA;;AAEqD;AACL;AAChD,iEAAe,mEAAa,cAAc,sDAAI;AAC9C;AACA,CAAC,iBAAiB,E;;;;;;;;;;;;;;;;ACNlB;;AAEqD;AACL;AAChD,iEAAe,mEAAa,cAAc,sDAAI;AAC9C;AACA,CAAC,YAAY,E;;;;;;;;;;;;;;;;ACNb;;AAEqD;AACL;AAChD,iEAAe,mEAAa,cAAc,sDAAI;AAC9C;AACA,CAAC,iBAAiB,E;;;;;;;;;;;;;;;;ACNlB;;AAEqD;AACL;AAChD,iEAAe,mEAAa,cAAc,sDAAI;AAC9C;AACA,CAAC,WAAW,E;;;;;;;;;;;;;;;;ACNZ;;AAEqD;AACL;AAChD,iEAAe,mEAAa,cAAc,sDAAI;AAC9C;AACA,CAAC,WAAW,E;;;;;;;;;;;;;;;;ACNZ;;AAEqD;AACL;AAChD,iEAAe,mEAAa,cAAc,sDAAI;AAC9C;AACA,CAAC,gBAAgB,E;;;;;;;;;;;;;;;;ACNjB;;AAEqD;AACL;AAChD,iEAAe,mEAAa,cAAc,sDAAI;AAC9C;AACA,CAAC,gBAAgB,E","sources":["webpack://@hdsp-agent/extension/./lib/components/AgentPanel.js","webpack://@hdsp-agent/extension/./lib/components/PromptGenerationDialog.js","webpack://@hdsp-agent/extension/./lib/components/SettingsPanel.js","webpack://@hdsp-agent/extension/./lib/components/TaskProgressWidget.js","webpack://@hdsp-agent/extension/./lib/index.js","webpack://@hdsp-agent/extension/./lib/plugins/cell-buttons-plugin.js","webpack://@hdsp-agent/extension/./lib/plugins/prompt-generation-plugin.js","webpack://@hdsp-agent/extension/./lib/plugins/save-interceptor-plugin.js","webpack://@hdsp-agent/extension/./lib/plugins/sidebar-plugin.js","webpack://@hdsp-agent/extension/./lib/services/AgentOrchestrator.js","webpack://@hdsp-agent/extension/./lib/services/ApiService.js","webpack://@hdsp-agent/extension/./lib/services/TaskService.js","webpack://@hdsp-agent/extension/./lib/services/ToolExecutor.js","webpack://@hdsp-agent/extension/./lib/types/auto-agent.js","webpack://@hdsp-agent/extension/./lib/types/index.js","webpack://@hdsp-agent/extension/./lib/utils/SafetyChecker.js","webpack://@hdsp-agent/extension/./lib/utils/markdownRenderer.js","webpack://@hdsp-agent/extension/./node_modules/@mui/icons-material/esm/AutoFixHigh.js","webpack://@hdsp-agent/extension/./node_modules/@mui/icons-material/esm/Cancel.js","webpack://@hdsp-agent/extension/./node_modules/@mui/icons-material/esm/CheckCircle.js","webpack://@hdsp-agent/extension/./node_modules/@mui/icons-material/esm/Close.js","webpack://@hdsp-agent/extension/./node_modules/@mui/icons-material/esm/Error.js","webpack://@hdsp-agent/extension/./node_modules/@mui/icons-material/esm/ExpandLess.js","webpack://@hdsp-agent/extension/./node_modules/@mui/icons-material/esm/ExpandMore.js"],"sourcesContent":["/**\n * Agent Panel - Main sidebar panel for Jupyter Agent\n * Cursor AI Style: Unified Chat + Agent Interface\n */\nimport React, { useState, useEffect, useRef, useImperativeHandle, forwardRef, useCallback } from 'react';\nimport { ReactWidget } from '@jupyterlab/ui-components';\nimport { SettingsPanel } from './SettingsPanel';\nimport { AgentOrchestrator } from '../services/AgentOrchestrator';\nimport { DEFAULT_AUTO_AGENT_CONFIG, } from '../types/auto-agent';\nimport { formatMarkdownToHtml } from '../utils/markdownRenderer';\n// Agent 명령어 감지 함수\nconst isAgentCommand = (input) => {\n    const trimmed = input.trim().toLowerCase();\n    return trimmed.startsWith('/run ') ||\n        trimmed.startsWith('@agent ') ||\n        trimmed.startsWith('/agent ') ||\n        trimmed.startsWith('/execute ');\n};\n// Agent 명령어에서 실제 요청 추출\nconst extractAgentRequest = (input) => {\n    const trimmed = input.trim();\n    if (trimmed.toLowerCase().startsWith('/run ')) {\n        return trimmed.slice(5).trim();\n    }\n    if (trimmed.toLowerCase().startsWith('@agent ')) {\n        return trimmed.slice(7).trim();\n    }\n    if (trimmed.toLowerCase().startsWith('/agent ')) {\n        return trimmed.slice(7).trim();\n    }\n    if (trimmed.toLowerCase().startsWith('/execute ')) {\n        return trimmed.slice(9).trim();\n    }\n    return trimmed;\n};\nconst ChatPanel = forwardRef(({ apiService, notebookTracker }, ref) => {\n    // 통합 메시지 목록 (Chat + Agent 실행)\n    const [messages, setMessages] = useState([]);\n    const [input, setInput] = useState('');\n    const [isLoading, setIsLoading] = useState(false);\n    const [isStreaming, setIsStreaming] = useState(false);\n    const [streamingMessageId, setStreamingMessageId] = useState(null);\n    const [conversationId, setConversationId] = useState('');\n    const [showSettings, setShowSettings] = useState(false);\n    const [llmConfig, setLlmConfig] = useState(null);\n    // Agent 실행 상태\n    const [isAgentRunning, setIsAgentRunning] = useState(false);\n    const [currentAgentMessageId, setCurrentAgentMessageId] = useState(null);\n    const [executionSpeed, setExecutionSpeed] = useState('normal');\n    // 입력 모드 (Cursor AI 스타일)\n    const [inputMode, setInputMode] = useState('chat');\n    const [showModeDropdown, setShowModeDropdown] = useState(false);\n    const messagesEndRef = useRef(null);\n    const pendingLlmPromptRef = useRef(null);\n    const allCodeBlocksRef = useRef([]);\n    const currentCellIdRef = useRef(null);\n    const currentCellIndexRef = useRef(null);\n    const orchestratorRef = useRef(null);\n    // Expose handleSendMessage via ref\n    useImperativeHandle(ref, () => ({\n        handleSendMessage: async () => {\n            await handleSendMessage();\n        },\n        setInput: (value) => {\n            setInput(value);\n        },\n        setLlmPrompt: (prompt) => {\n            pendingLlmPromptRef.current = prompt;\n            // Find textarea and set data attribute\n            const textarea = messagesEndRef.current?.parentElement?.querySelector('.jp-agent-input');\n            if (textarea) {\n                textarea.setAttribute('data-llm-prompt', prompt);\n            }\n        },\n        setCurrentCellId: (cellId) => {\n            console.log('[AgentPanel] setCurrentCellId called with:', cellId);\n            currentCellIdRef.current = cellId;\n        },\n        setCurrentCellIndex: (cellIndex) => {\n            console.log('[AgentPanel] setCurrentCellIndex called with:', cellIndex);\n            currentCellIndexRef.current = cellIndex;\n        }\n    }));\n    // Load config on mount\n    useEffect(() => {\n        loadConfig();\n    }, []);\n    // Initialize AgentOrchestrator when notebook is available\n    useEffect(() => {\n        const notebook = notebookTracker?.currentWidget;\n        const sessionContext = notebook?.sessionContext;\n        if (notebook && sessionContext) {\n            const config = { ...DEFAULT_AUTO_AGENT_CONFIG, executionSpeed };\n            orchestratorRef.current = new AgentOrchestrator(notebook, sessionContext, apiService, config);\n        }\n        return () => {\n            orchestratorRef.current = null;\n        };\n    }, [notebookTracker?.currentWidget, apiService, executionSpeed]);\n    // Agent 실행 핸들러\n    const handleAgentExecution = useCallback(async (request) => {\n        const notebook = notebookTracker?.currentWidget;\n        if (!orchestratorRef.current || !notebook) {\n            // 노트북이 없으면 에러 메시지 표시\n            const errorMessage = {\n                id: Date.now().toString(),\n                role: 'assistant',\n                content: '노트북을 먼저 열어주세요. Agent 실행은 활성 노트북이 필요합니다.',\n                timestamp: Date.now(),\n            };\n            setMessages(prev => [...prev, errorMessage]);\n            return;\n        }\n        // Agent 실행 메시지 생성\n        const agentMessageId = `agent-${Date.now()}`;\n        const agentMessage = {\n            id: agentMessageId,\n            type: 'agent_execution',\n            request,\n            status: { phase: 'planning', message: '실행 계획 생성 중...' },\n            plan: null,\n            result: null,\n            completedSteps: [],\n            failedSteps: [],\n            timestamp: Date.now(),\n        };\n        setMessages(prev => [...prev, agentMessage]);\n        setCurrentAgentMessageId(agentMessageId);\n        setIsAgentRunning(true);\n        try {\n            const result = await orchestratorRef.current.executeTask(request, notebook, (newStatus) => {\n                // 실시간 상태 업데이트\n                setMessages(prev => prev.map(msg => msg.id === agentMessageId && 'type' in msg && msg.type === 'agent_execution'\n                    ? {\n                        ...msg,\n                        status: newStatus,\n                        plan: newStatus.plan || msg.plan,\n                        completedSteps: newStatus.currentStep && newStatus.currentStep > 1\n                            ? Array.from({ length: newStatus.currentStep - 1 }, (_, i) => i + 1)\n                            : msg.completedSteps,\n                        failedSteps: newStatus.phase === 'failed' && newStatus.currentStep\n                            ? [...msg.failedSteps, newStatus.currentStep]\n                            : msg.failedSteps,\n                    }\n                    : msg));\n            });\n            // 최종 결과 업데이트\n            setMessages(prev => prev.map(msg => msg.id === agentMessageId && 'type' in msg && msg.type === 'agent_execution'\n                ? {\n                    ...msg,\n                    status: {\n                        phase: result.success ? 'completed' : 'failed',\n                        message: result.finalAnswer || (result.success ? '작업 완료' : '작업 실패'),\n                    },\n                    result,\n                    completedSteps: result.plan?.steps.map(s => s.stepNumber) || [],\n                }\n                : msg));\n        }\n        catch (error) {\n            setMessages(prev => prev.map(msg => msg.id === agentMessageId && 'type' in msg && msg.type === 'agent_execution'\n                ? {\n                    ...msg,\n                    status: { phase: 'failed', message: error.message || '실행 중 오류 발생' },\n                }\n                : msg));\n        }\n        finally {\n            setIsAgentRunning(false);\n            setCurrentAgentMessageId(null);\n        }\n    }, [notebookTracker, apiService]);\n    const loadConfig = async () => {\n        try {\n            const config = await apiService.getConfig();\n            // If config doesn't have provider, use default\n            if (!config || !config.provider) {\n                console.warn('Config missing provider, using default');\n                const defaultConfig = {\n                    provider: 'gemini',\n                    gemini: {\n                        apiKey: '',\n                        model: 'gemini-2.5-pro'\n                    },\n                    vllm: {\n                        endpoint: 'http://localhost:8000',\n                        apiKey: 'test',\n                        model: 'gpt-oss-120b'\n                    },\n                    openai: {\n                        apiKey: '',\n                        model: 'gpt-4'\n                    }\n                };\n                setLlmConfig(defaultConfig);\n                return;\n            }\n            setLlmConfig(config);\n            // Log loaded model configuration\n            const configData = config;\n            console.log('=== HDSP Agent Model Configuration ===');\n            console.log('Provider:', configData.provider);\n            if (configData.provider === 'gemini') {\n                console.log('Gemini Model:', configData.gemini?.model || 'gemini-pro (default)');\n                console.log('Gemini API Key:', configData.gemini?.apiKey ? '✓ Configured' : '✗ Not configured');\n            }\n            else if (configData.provider === 'vllm') {\n                console.log('vLLM Model:', configData.vllm?.model || 'default');\n                console.log('vLLM Endpoint:', configData.vllm?.endpoint || 'http://localhost:8000');\n                console.log('vLLM API Key:', configData.vllm?.apiKey ? '✓ Configured' : '✗ Not configured');\n            }\n            else if (configData.provider === 'openai') {\n                console.log('OpenAI Model:', configData.openai?.model || 'gpt-4');\n                console.log('OpenAI API Key:', configData.openai?.apiKey ? '✓ Configured' : '✗ Not configured');\n            }\n            console.log('=====================================');\n        }\n        catch (error) {\n            console.error('Failed to load config:', error);\n        }\n    };\n    const handleSaveConfig = async (config) => {\n        try {\n            console.log('=== handleSaveConfig 시작 ===');\n            console.log('전송할 config:', JSON.stringify(config, null, 2));\n            console.log('Provider:', config.provider);\n            console.log('Gemini API Key:', config.gemini?.apiKey ? `${config.gemini.apiKey.substring(0, 10)}...` : 'empty');\n            await apiService.saveConfig(config);\n            console.log('서버 저장 완료, state 업데이트 중...');\n            setLlmConfig(config);\n            // Reload config from server to ensure consistency\n            await loadConfig();\n            console.log('=== handleSaveConfig 완료 ===');\n            alert('설정이 성공적으로 저장되었습니다!');\n        }\n        catch (error) {\n            console.error('=== handleSaveConfig 실패 ===');\n            console.error('Error:', error);\n            alert('설정 저장 실패. 다시 시도해주세요.');\n        }\n    };\n    // Auto-scroll to bottom when messages change\n    useEffect(() => {\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n    }, [messages]);\n    // Extract and store code blocks from messages, setup button listeners\n    useEffect(() => {\n        // Use a small delay to ensure DOM is updated after message rendering\n        const timeoutId = setTimeout(() => {\n            // Find messages container - try multiple selectors\n            const messagesContainer = document.querySelector('.jp-agent-messages') ||\n                messagesEndRef.current?.parentElement ||\n                document.querySelector('[class*=\"jp-agent-messages\"]');\n            if (!messagesContainer) {\n                console.log('[AgentPanel] Messages container not found');\n                return;\n            }\n            // Extract code blocks from all assistant messages\n            const codeBlocks = [];\n            const containers = messagesContainer.querySelectorAll('.code-block-container');\n            console.log(`[AgentPanel] Found ${containers.length} code block containers`);\n            containers.forEach(container => {\n                const blockId = container.getAttribute('data-block-id');\n                if (!blockId) {\n                    console.warn('[AgentPanel] Code block container missing data-block-id');\n                    return;\n                }\n                const codeElement = container.querySelector(`#${blockId}`);\n                if (!codeElement) {\n                    console.warn(`[AgentPanel] Code element #${blockId} not found`);\n                    return;\n                }\n                const codeText = codeElement.textContent || '';\n                const langElement = container.querySelector('.code-block-language');\n                const language = langElement?.textContent?.toLowerCase() || 'python';\n                codeBlocks.push({\n                    id: blockId,\n                    code: codeText,\n                    language: language\n                });\n            });\n            // Update code blocks ref\n            allCodeBlocksRef.current = codeBlocks;\n            console.log(`[AgentPanel] Stored ${codeBlocks.length} code blocks`);\n            // Use event delegation - attach single listener to container\n            const handleContainerClick = async (e) => {\n                const target = e.target;\n                // Handle copy button\n                if (target.classList.contains('code-block-copy') || target.closest('.code-block-copy')) {\n                    const button = target.classList.contains('code-block-copy')\n                        ? target\n                        : target.closest('.code-block-copy');\n                    e.stopPropagation();\n                    e.preventDefault();\n                    const blockId = button.getAttribute('data-block-id');\n                    if (!blockId)\n                        return;\n                    const block = allCodeBlocksRef.current.find(b => b.id === blockId);\n                    if (!block)\n                        return;\n                    try {\n                        await navigator.clipboard.writeText(block.code);\n                        const originalText = button.textContent;\n                        button.textContent = '복사됨!';\n                        setTimeout(() => {\n                            button.textContent = originalText || '복사';\n                        }, 2000);\n                    }\n                    catch (error) {\n                        console.error('Failed to copy code:', error);\n                        showNotification('복사에 실패했습니다.', 'error');\n                    }\n                    return;\n                }\n                // Handle apply button\n                if (target.classList.contains('code-block-apply') || target.closest('.code-block-apply')) {\n                    const button = target.classList.contains('code-block-apply')\n                        ? target\n                        : target.closest('.code-block-apply');\n                    e.stopPropagation();\n                    e.preventDefault();\n                    const blockId = button.getAttribute('data-block-id');\n                    console.log(`[AgentPanel] Apply button clicked via delegation, blockId: ${blockId}`);\n                    if (!blockId) {\n                        showNotification('코드 블록 ID를 찾을 수 없습니다.', 'error');\n                        return;\n                    }\n                    const block = allCodeBlocksRef.current.find(b => b.id === blockId);\n                    if (!block) {\n                        showNotification('코드를 찾을 수 없습니다.', 'error');\n                        return;\n                    }\n                    console.log(`[AgentPanel] Applying code to cell via delegation, code length: ${block.code.length}`);\n                    await applyCodeToCell(block.code, blockId, button);\n                    return;\n                }\n            };\n            // Attach single event listener to container\n            messagesContainer.addEventListener('click', handleContainerClick);\n            // Cleanup - store handler reference for cleanup\n            messagesContainer._agentPanelClickHandler = handleContainerClick;\n        }, 100); // Small delay to ensure DOM is ready\n        // Cleanup\n        return () => {\n            clearTimeout(timeoutId);\n            // Remove event listener on cleanup\n            const messagesContainer = document.querySelector('.jp-agent-messages') ||\n                messagesEndRef.current?.parentElement ||\n                document.querySelector('[class*=\"jp-agent-messages\"]');\n            if (messagesContainer && messagesContainer._agentPanelClickHandler) {\n                messagesContainer.removeEventListener('click', messagesContainer._agentPanelClickHandler);\n                delete messagesContainer._agentPanelClickHandler;\n            }\n        };\n    }, [messages]);\n    // Helper: Get notification background color\n    const getNotificationColor = (type) => {\n        switch (type) {\n            case 'error': return '#f56565';\n            case 'warning': return '#ed8936';\n            default: return '#4299e1';\n        }\n    };\n    // Helper: Create and show notification element\n    const createNotificationElement = (message, backgroundColor) => {\n        const notification = document.createElement('div');\n        notification.style.cssText = `\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      padding: 12px 16px;\n      border-radius: 6px;\n      color: white;\n      font-size: 14px;\n      font-weight: 500;\n      z-index: 10001;\n      opacity: 0;\n      transition: opacity 0.3s ease;\n      max-width: 300px;\n      word-wrap: break-word;\n      background: ${backgroundColor};\n    `;\n        notification.textContent = message;\n        return notification;\n    };\n    // Helper: Animate notification in and out\n    const animateNotification = (notification) => {\n        setTimeout(() => notification.style.opacity = '1', 10);\n        setTimeout(() => {\n            notification.style.opacity = '0';\n            setTimeout(() => {\n                if (notification.parentNode) {\n                    notification.parentNode.removeChild(notification);\n                }\n            }, 300);\n        }, 3000);\n    };\n    // Show notification\n    const showNotification = (message, type = 'info') => {\n        const notification = createNotificationElement(message, getNotificationColor(type));\n        document.body.appendChild(notification);\n        animateNotification(notification);\n    };\n    // Apply code to Jupyter cell\n    const applyCodeToCell = async (code, blockId, button) => {\n        console.log('[AgentPanel] applyCodeToCell called', { codeLength: code.length, blockId });\n        const originalText = button.textContent;\n        try {\n            button.disabled = true;\n            button.textContent = '적용 중...';\n            const app = window.jupyterapp;\n            if (!app) {\n                console.error('[AgentPanel] jupyterapp not found in window');\n                showNotification('JupyterLab을 찾을 수 없습니다.', 'error');\n                button.disabled = false;\n                button.textContent = originalText || '셀에 적용';\n                return;\n            }\n            console.log('[AgentPanel] Found jupyterapp');\n            // Try to get notebook tracker from app\n            // The notebookTracker is passed to cellButtonsPlugin, so we need to access it differently\n            // Use shell to find current notebook widget\n            const shell = app.shell;\n            const currentWidget = shell.currentWidget;\n            // Check if current widget is a notebook\n            if (currentWidget && 'content' in currentWidget) {\n                const notebook = currentWidget.content;\n                // Check if it's a notebook (has model and cells)\n                if (notebook && 'model' in notebook && notebook.model && 'cells' in notebook.model) {\n                    await applyCodeToNotebookCell(code, notebook, blockId, button, originalText);\n                    return;\n                }\n            }\n            // Fallback: show cell selector dialog\n            showCellSelectorDialog(code, button, originalText);\n        }\n        catch (error) {\n            console.error('Failed to apply code to cell:', error);\n            showNotification('코드 적용에 실패했습니다.', 'error');\n            button.disabled = false;\n            button.textContent = originalText || '셀에 적용';\n        }\n    };\n    // Helper: Try different methods to set cell source\n    const setCellSource = (cellModel, code) => {\n        if (cellModel.sharedModel && typeof cellModel.sharedModel.setSource === 'function') {\n            cellModel.sharedModel.setSource(code);\n        }\n        else if (cellModel.setSource && typeof cellModel.setSource === 'function') {\n            cellModel.setSource(code);\n        }\n        else if (cellModel.value && typeof cellModel.value.setText === 'function') {\n            cellModel.value.setText(code);\n        }\n        else if (cellModel.value && cellModel.value.text !== undefined) {\n            cellModel.value.text = code;\n        }\n        else {\n            throw new Error('Unable to set cell source - no compatible method found');\n        }\n    };\n    // Helper: Reset button state\n    const resetButtonState = (button, originalText) => {\n        button.disabled = false;\n        button.textContent = originalText || '셀에 적용';\n    };\n    // Apply code to a specific notebook cell\n    const applyCodeToNotebookCell = async (code, notebook, blockId, button, originalText) => {\n        try {\n            console.log('[AgentPanel] applyCodeToNotebookCell called', {\n                currentCellIndex: currentCellIndexRef.current,\n                currentCellId: currentCellIdRef.current,\n                blockId\n            });\n            // Try cell index first (most reliable)\n            if (currentCellIndexRef.current !== null && currentCellIndexRef.current !== undefined) {\n                console.log('[AgentPanel] Using cell index:', currentCellIndexRef.current);\n                const cells = notebook.widgets || [];\n                if (currentCellIndexRef.current >= 0 && currentCellIndexRef.current < cells.length) {\n                    const cell = cells[currentCellIndexRef.current];\n                    const cellModel = cell.model || cell;\n                    console.log('[AgentPanel] Found cell at index, applying code...');\n                    try {\n                        setCellSource(cellModel, code);\n                        console.log('[AgentPanel] Code applied successfully!');\n                        showNotification('코드가 셀에 적용되었습니다!', 'info');\n                        resetButtonState(button, originalText);\n                        // Clear the cell index after successful application\n                        currentCellIndexRef.current = null;\n                        currentCellIdRef.current = null;\n                        return;\n                    }\n                    catch (updateError) {\n                        console.error('Failed to update cell content:', updateError);\n                        showNotification('셀 내용 업데이트 실패: ' + updateError.message, 'error');\n                        resetButtonState(button, originalText);\n                        return;\n                    }\n                }\n                else {\n                    console.error('[AgentPanel] Cell index out of bounds:', currentCellIndexRef.current, 'cells.length:', cells.length);\n                    showNotification('대상 셀을 찾을 수 없습니다. 셀이 삭제되었거나 이동했을 수 있습니다.', 'error');\n                    resetButtonState(button, originalText);\n                    currentCellIndexRef.current = null;\n                    currentCellIdRef.current = null;\n                    return;\n                }\n            }\n            // Fallback: show selector dialog\n            console.log('[AgentPanel] No current cell index set, showing selector dialog');\n            showCellSelectorDialog(code, button, originalText);\n        }\n        catch (error) {\n            console.error('Failed to apply code:', error);\n            showNotification('코드 적용에 실패했습니다.', 'error');\n            resetButtonState(button, originalText);\n        }\n    };\n    // Show cell selector dialog (similar to chrome_agent)\n    const showCellSelectorDialog = (code, button, originalText) => {\n        try {\n            const app = window.jupyterapp;\n            if (!app) {\n                showNotification('JupyterLab을 찾을 수 없습니다.', 'error');\n                button.disabled = false;\n                button.textContent = originalText || '셀에 적용';\n                return;\n            }\n            // Find current notebook from shell\n            const shell = app.shell;\n            const currentWidget = shell.currentWidget;\n            if (!currentWidget || !('content' in currentWidget)) {\n                showNotification('활성 노트북을 찾을 수 없습니다.', 'warning');\n                button.disabled = false;\n                button.textContent = originalText || '셀에 적용';\n                return;\n            }\n            const notebook = currentWidget.content;\n            if (!notebook || !('model' in notebook) || !notebook.model || !('cells' in notebook.model)) {\n                showNotification('활성 노트북을 찾을 수 없습니다.', 'warning');\n                button.disabled = false;\n                button.textContent = originalText || '셀에 적용';\n                return;\n            }\n            const cells = notebook.widgets || [];\n            const codeCells = [];\n            // Collect code cells\n            cells.forEach((cell, index) => {\n                const cellModel = cell.model || cell;\n                if (cellModel.type === 'code') {\n                    const cellId = cellModel.metadata?.get?.('jupyterAgentCellId') ||\n                        cellModel.id ||\n                        `cell-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n                    // Ensure cell has ID\n                    try {\n                        if (!cellModel.metadata?.get?.('jupyterAgentCellId')) {\n                            if (cellModel.metadata?.set) {\n                                cellModel.metadata.set('jupyterAgentCellId', cellId);\n                            }\n                        }\n                    }\n                    catch (e) {\n                        // Metadata might not be accessible, continue anyway\n                    }\n                    const content = (cellModel.sharedModel?.getSource?.() ||\n                        cellModel.value?.text ||\n                        '').toString();\n                    const preview = content.substring(0, 100).replace(/\\n/g, ' ');\n                    codeCells.push({\n                        cell,\n                        index,\n                        id: cellId,\n                        preview\n                    });\n                }\n            });\n            if (codeCells.length === 0) {\n                showNotification('코드 셀을 찾을 수 없습니다.', 'warning');\n                button.disabled = false;\n                button.textContent = originalText || '셀에 적용';\n                return;\n            }\n            // Remove existing dialog\n            const existingDialog = document.querySelector('.jp-agent-cell-selector-dialog');\n            if (existingDialog) {\n                existingDialog.remove();\n            }\n            // Create dialog overlay\n            const dialogOverlay = document.createElement('div');\n            dialogOverlay.className = 'jp-agent-cell-selector-dialog';\n            dialogOverlay.style.cssText = `\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.3);\n        z-index: 10000;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      `;\n            // Create dialog container\n            const dialogContainer = document.createElement('div');\n            dialogContainer.style.cssText = `\n        background: #fafafa;\n        border: 1px solid #e0e0e0;\n        border-radius: 4px;\n        padding: 24px;\n        max-width: 500px;\n        width: 90%;\n        max-height: 80vh;\n        overflow-y: auto;\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      `;\n            // Create cell list HTML\n            const cellListHTML = codeCells.map(({ index, id, preview }) => {\n                return `\n          <div class=\"jp-agent-cell-selector-item\" data-cell-id=\"${id}\" style=\"\n            padding: 12px;\n            margin-bottom: 8px;\n            background: white;\n            border: 2px solid #e0e0e0;\n            border-radius: 4px;\n            cursor: pointer;\n            transition: all 0.2s ease;\n          \">\n            <div style=\"display: flex; align-items: center; gap: 8px; margin-bottom: 4px;\">\n              <span style=\"\n                background: #667eea;\n                color: white;\n                padding: 2px 8px;\n                border-radius: 12px;\n                font-size: 11px;\n                font-weight: 600;\n              \">셀 ${index + 1}</span>\n            </div>\n            <div style=\"font-size: 12px; color: #757575; font-family: 'Menlo', monospace; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">\n              ${escapeHtml(preview)}${preview.length >= 100 ? '...' : ''}\n            </div>\n          </div>\n        `;\n            }).join('');\n            // Dialog content\n            dialogContainer.innerHTML = `\n        <div style=\"margin-bottom: 20px;\">\n          <h3 style=\"margin: 0 0 8px 0; color: #424242; font-size: 16px; font-weight: 500;\">\n            코드를 적용할 셀 선택\n          </h3>\n          <p style=\"margin: 0; color: #757575; font-size: 13px;\">\n            AI가 생성한 코드를 적용할 셀을 선택하세요\n          </p>\n        </div>\n        <div class=\"jp-agent-cell-list\" style=\"margin-bottom: 20px;\">\n          ${cellListHTML}\n        </div>\n        <div style=\"display: flex; gap: 12px; justify-content: flex-end;\">\n          <button class=\"jp-agent-cell-selector-cancel-btn\" style=\"\n            background: transparent;\n            color: #616161;\n            border: 1px solid #d1d5db;\n            border-radius: 3px;\n            padding: 8px 16px;\n            font-size: 13px;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.15s ease;\n          \">취소</button>\n        </div>\n      `;\n            dialogOverlay.appendChild(dialogContainer);\n            document.body.appendChild(dialogOverlay);\n            // Cell item click handlers\n            const cellItems = dialogContainer.querySelectorAll('.jp-agent-cell-selector-item');\n            cellItems.forEach(item => {\n                item.addEventListener('click', () => {\n                    const cellId = item.getAttribute('data-cell-id');\n                    if (!cellId)\n                        return;\n                    // Find the cell\n                    const cellInfo = codeCells.find(c => c.id === cellId);\n                    if (!cellInfo)\n                        return;\n                    const cellModel = cellInfo.cell.model || cellInfo.cell;\n                    // Apply code to cell\n                    try {\n                        setCellSource(cellModel, code);\n                        showNotification('코드가 셀에 적용되었습니다!', 'info');\n                        dialogOverlay.remove();\n                        resetButtonState(button, originalText);\n                    }\n                    catch (error) {\n                        console.error('Failed to apply code to cell:', error);\n                        showNotification('코드 적용에 실패했습니다.', 'error');\n                        resetButtonState(button, originalText);\n                    }\n                });\n                // Hover effects\n                item.addEventListener('mouseenter', () => {\n                    item.style.borderColor = '#667eea';\n                    item.style.background = '#f8f9ff';\n                });\n                item.addEventListener('mouseleave', () => {\n                    item.style.borderColor = '#e0e0e0';\n                    item.style.background = 'white';\n                });\n            });\n            // Cancel button\n            const cancelBtn = dialogContainer.querySelector('.jp-agent-cell-selector-cancel-btn');\n            if (cancelBtn) {\n                cancelBtn.addEventListener('click', () => {\n                    dialogOverlay.remove();\n                    button.disabled = false;\n                    button.textContent = originalText || '셀에 적용';\n                });\n                cancelBtn.addEventListener('mouseenter', () => {\n                    cancelBtn.style.background = '#f5f5f5';\n                    cancelBtn.style.borderColor = '#9ca3af';\n                });\n                cancelBtn.addEventListener('mouseleave', () => {\n                    cancelBtn.style.background = 'transparent';\n                    cancelBtn.style.borderColor = '#d1d5db';\n                });\n            }\n            // Close on overlay click\n            dialogOverlay.addEventListener('click', (e) => {\n                if (e.target === dialogOverlay) {\n                    dialogOverlay.remove();\n                    button.disabled = false;\n                    button.textContent = originalText || '셀에 적용';\n                }\n            });\n            // ESC key to close\n            const handleEsc = (e) => {\n                if (e.key === 'Escape') {\n                    dialogOverlay.remove();\n                    document.removeEventListener('keydown', handleEsc);\n                    button.disabled = false;\n                    button.textContent = originalText || '셀에 적용';\n                }\n            };\n            document.addEventListener('keydown', handleEsc);\n        }\n        catch (error) {\n            console.error('Failed to show cell selector:', error);\n            showNotification('셀 선택 다이얼로그 표시에 실패했습니다.', 'error');\n            button.disabled = false;\n            button.textContent = originalText || '셀에 적용';\n        }\n    };\n    // Helper function to escape HTML\n    const escapeHtml = (text) => {\n        const div = document.createElement('div');\n        div.textContent = text;\n        return div.innerHTML;\n    };\n    const handleSendMessage = async () => {\n        // Check if there's an LLM prompt stored (from cell action)\n        const textarea = messagesEndRef.current?.parentElement?.querySelector('.jp-agent-input');\n        const llmPrompt = pendingLlmPromptRef.current || textarea?.getAttribute('data-llm-prompt');\n        // Allow execution if we have an LLM prompt even if input is empty (for auto-execution)\n        if ((!input.trim() && !llmPrompt) || isLoading || isStreaming || isAgentRunning)\n            return;\n        const currentInput = input.trim();\n        // Agent 모드이면 Agent 실행\n        if (inputMode === 'agent') {\n            // User 메시지 추가\n            const userMessage = {\n                id: Date.now().toString(),\n                role: 'user',\n                content: `@agent ${currentInput}`,\n                timestamp: Date.now(),\n            };\n            setMessages(prev => [...prev, userMessage]);\n            setInput('');\n            // Agent 실행\n            await handleAgentExecution(currentInput);\n            return;\n        }\n        // Chat 모드에서도 명령어로 Agent 실행 가능\n        if (isAgentCommand(currentInput)) {\n            const agentRequest = extractAgentRequest(currentInput);\n            if (agentRequest) {\n                // User 메시지 추가\n                const userMessage = {\n                    id: Date.now().toString(),\n                    role: 'user',\n                    content: currentInput,\n                    timestamp: Date.now(),\n                };\n                setMessages(prev => [...prev, userMessage]);\n                setInput('');\n                // Agent 실행\n                await handleAgentExecution(agentRequest);\n                return;\n            }\n        }\n        // Check if API key is configured before sending\n        if (!llmConfig) {\n            // Config not loaded yet, try to load it\n            await loadConfig();\n        }\n        // Check API key based on provider\n        const hasApiKey = (() => {\n            if (!llmConfig || !llmConfig.provider) {\n                return false;\n            }\n            const provider = llmConfig.provider;\n            if (provider === 'gemini') {\n                return !!(llmConfig.gemini?.apiKey && llmConfig.gemini.apiKey.trim());\n            }\n            else if (provider === 'vllm') {\n                // vLLM may not require API key, but check if endpoint is configured\n                return !!(llmConfig.vllm?.endpoint && llmConfig.vllm.endpoint.trim());\n            }\n            else if (provider === 'openai') {\n                return !!(llmConfig.openai?.apiKey && llmConfig.openai.apiKey.trim());\n            }\n            return false;\n        })();\n        if (!hasApiKey) {\n            // Show error message and open settings\n            const providerName = llmConfig?.provider || 'LLM';\n            const errorMessage = {\n                id: Date.now().toString(),\n                role: 'assistant',\n                content: `API Key가 설정되지 않았습니다.\\n\\n${providerName === 'gemini' ? 'Gemini' : providerName === 'openai' ? 'OpenAI' : 'vLLM'} API Key를 먼저 설정해주세요.\\n\\n설정 버튼을 클릭하여 API Key를 입력하세요.`,\n                timestamp: Date.now()\n            };\n            setMessages(prev => [...prev, errorMessage]);\n            setShowSettings(true);\n            return;\n        }\n        // Use the display prompt (input) for the user message, or use a fallback if input is empty\n        const displayContent = currentInput || (llmPrompt ? '셀 분석 요청' : '');\n        const userMessage = {\n            id: Date.now().toString(),\n            role: 'user',\n            content: displayContent,\n            timestamp: Date.now()\n        };\n        setMessages(prev => [...prev, userMessage]);\n        // Only clear input if it was manually entered, keep it for auto-execution display\n        if (currentInput) {\n            setInput('');\n        }\n        setIsLoading(true);\n        setIsStreaming(true);\n        // Clear the data attribute and ref after using it\n        if (textarea && llmPrompt) {\n            textarea.removeAttribute('data-llm-prompt');\n            pendingLlmPromptRef.current = null;\n        }\n        // Create assistant message ID for streaming updates\n        const assistantMessageId = Date.now().toString() + '-assistant';\n        let streamedContent = '';\n        setStreamingMessageId(assistantMessageId);\n        // Add empty assistant message that will be updated during streaming\n        const initialAssistantMessage = {\n            id: assistantMessageId,\n            role: 'assistant',\n            content: '',\n            timestamp: Date.now()\n        };\n        setMessages(prev => [...prev, initialAssistantMessage]);\n        try {\n            // Use LLM prompt if available, otherwise use the display content\n            const messageToSend = llmPrompt || displayContent;\n            await apiService.sendMessageStream({\n                message: messageToSend,\n                conversationId: conversationId || undefined\n            }, \n            // onChunk callback - update message content incrementally\n            (chunk) => {\n                streamedContent += chunk;\n                setMessages(prev => prev.map(msg => msg.id === assistantMessageId && isChatMessage(msg)\n                    ? { ...msg, content: streamedContent }\n                    : msg));\n            }, \n            // onMetadata callback - update conversationId and metadata\n            (metadata) => {\n                if (metadata.conversationId && !conversationId) {\n                    setConversationId(metadata.conversationId);\n                }\n                if (metadata.provider || metadata.model) {\n                    setMessages(prev => prev.map(msg => msg.id === assistantMessageId && isChatMessage(msg)\n                        ? {\n                            ...msg,\n                            metadata: {\n                                ...msg.metadata,\n                                provider: metadata.provider,\n                                model: metadata.model\n                            }\n                        }\n                        : msg));\n                }\n            });\n        }\n        catch (error) {\n            // Update the assistant message with error\n            setMessages(prev => prev.map(msg => msg.id === assistantMessageId && isChatMessage(msg)\n                ? {\n                    ...msg,\n                    content: streamedContent + `\\n\\nError: ${error instanceof Error ? error.message : 'Failed to send message'}`\n                }\n                : msg));\n        }\n        finally {\n            setIsLoading(false);\n            setIsStreaming(false);\n            setStreamingMessageId(null);\n        }\n    };\n    const handleKeyDown = (e) => {\n        // Enter: 전송\n        if (e.key === 'Enter' && !e.shiftKey) {\n            e.preventDefault();\n            handleSendMessage();\n        }\n        // Shift+Tab: 모드 전환 (chat ↔ agent)\n        if (e.key === 'Tab' && e.shiftKey) {\n            e.preventDefault();\n            setInputMode(prev => prev === 'chat' ? 'agent' : 'chat');\n            return;\n        }\n        // Cmd/Ctrl + . : 모드 전환 (대체 단축키)\n        if (e.key === '.' && (e.metaKey || e.ctrlKey)) {\n            e.preventDefault();\n            setInputMode(prev => prev === 'chat' ? 'agent' : 'chat');\n        }\n        // Tab (without Shift): Agent 모드일 때 드롭다운 토글\n        if (e.key === 'Tab' && !e.shiftKey && inputMode === 'agent') {\n            e.preventDefault();\n            setShowModeDropdown(prev => !prev);\n        }\n    };\n    // 모드 토글 함수\n    const toggleMode = () => {\n        setInputMode(prev => prev === 'chat' ? 'agent' : 'chat');\n        setShowModeDropdown(false);\n    };\n    const clearChat = () => {\n        setMessages([]);\n        setConversationId('');\n    };\n    // Agent 실행 메시지 렌더링\n    const renderAgentExecutionMessage = (msg) => {\n        const { status, plan, result, completedSteps, failedSteps, request } = msg;\n        const isActive = ['planning', 'executing', 'tool_calling', 'self_healing', 'replanning', 'validating', 'reflecting'].includes(status.phase);\n        const getStepStatus = (stepNumber) => {\n            if (failedSteps.includes(stepNumber))\n                return 'failed';\n            if (completedSteps.includes(stepNumber))\n                return 'completed';\n            if (status.currentStep === stepNumber)\n                return 'current';\n            return 'pending';\n        };\n        const progressPercent = plan ? (completedSteps.length / plan.totalSteps) * 100 : 0;\n        return (React.createElement(\"div\", { className: \"jp-agent-execution-message\" },\n            React.createElement(\"div\", { className: \"jp-agent-execution-header\" },\n                React.createElement(\"div\", { className: \"jp-agent-execution-badge\" },\n                    React.createElement(\"svg\", { viewBox: \"0 0 16 16\", fill: \"currentColor\", width: \"12\", height: \"12\" },\n                        React.createElement(\"path\", { d: \"M8 0a8 8 0 100 16A8 8 0 008 0zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13z\" }),\n                        React.createElement(\"path\", { d: \"M8 3a.75.75 0 01.75.75v3.5h2.5a.75.75 0 010 1.5h-3.25a.75.75 0 01-.75-.75v-4.25A.75.75 0 018 3z\" })),\n                    \"Agent\"),\n                React.createElement(\"span\", { className: \"jp-agent-execution-request\" }, request)),\n            React.createElement(\"div\", { className: `jp-agent-execution-status jp-agent-execution-status--${status.phase}` },\n                isActive && React.createElement(\"div\", { className: \"jp-agent-execution-spinner\" }),\n                status.phase === 'completed' && (React.createElement(\"svg\", { viewBox: \"0 0 16 16\", fill: \"currentColor\", className: \"jp-agent-execution-icon--success\" },\n                    React.createElement(\"path\", { d: \"M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z\" }))),\n                status.phase === 'failed' && (React.createElement(\"svg\", { viewBox: \"0 0 16 16\", fill: \"currentColor\", className: \"jp-agent-execution-icon--error\" },\n                    React.createElement(\"path\", { d: \"M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z\" }))),\n                React.createElement(\"span\", { className: \"jp-agent-execution-status-text\" }, status.message || status.phase),\n                status.confidenceScore !== undefined && (React.createElement(\"span\", { className: \"jp-agent-execution-confidence\" },\n                    status.confidenceScore,\n                    \"%\"))),\n            plan && (React.createElement(\"div\", { className: \"jp-agent-execution-plan\" },\n                React.createElement(\"div\", { className: \"jp-agent-execution-plan-header\" },\n                    React.createElement(\"span\", null, \"\\uC2E4\\uD589 \\uACC4\\uD68D\"),\n                    React.createElement(\"span\", { className: \"jp-agent-execution-plan-progress\" },\n                        completedSteps.length,\n                        \" / \",\n                        plan.totalSteps)),\n                React.createElement(\"div\", { className: \"jp-agent-execution-progress-bar\" },\n                    React.createElement(\"div\", { className: \"jp-agent-execution-progress-fill\", style: { width: `${progressPercent}%` } })),\n                React.createElement(\"div\", { className: \"jp-agent-execution-steps\" }, plan.steps.map((step) => {\n                    const stepStatus = getStepStatus(step.stepNumber);\n                    return (React.createElement(\"div\", { key: step.stepNumber, className: `jp-agent-execution-step jp-agent-execution-step--${stepStatus}` },\n                        React.createElement(\"div\", { className: \"jp-agent-execution-step-indicator\" },\n                            stepStatus === 'completed' && (React.createElement(\"svg\", { viewBox: \"0 0 16 16\", fill: \"currentColor\" },\n                                React.createElement(\"path\", { d: \"M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z\" }))),\n                            stepStatus === 'failed' && (React.createElement(\"svg\", { viewBox: \"0 0 16 16\", fill: \"currentColor\" },\n                                React.createElement(\"path\", { d: \"M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z\" }))),\n                            stepStatus === 'current' && React.createElement(\"div\", { className: \"jp-agent-execution-step-spinner\" }),\n                            stepStatus === 'pending' && React.createElement(\"span\", null, step.stepNumber)),\n                        React.createElement(\"div\", { className: \"jp-agent-execution-step-content\" },\n                            React.createElement(\"span\", { className: `jp-agent-execution-step-desc ${stepStatus === 'completed' ? 'jp-agent-execution-step-desc--done' : ''}` }, step.description),\n                            React.createElement(\"div\", { className: \"jp-agent-execution-step-tools\" }, step.toolCalls.map((tc, i) => (React.createElement(\"span\", { key: i, className: \"jp-agent-execution-tool-tag\" }, tc.tool)))))));\n                })))),\n            result && (React.createElement(\"div\", { className: `jp-agent-execution-result jp-agent-execution-result--${result.success ? 'success' : 'error'}` },\n                result.finalAnswer && (React.createElement(\"p\", { className: \"jp-agent-execution-result-message\" }, result.finalAnswer)),\n                result.error && (React.createElement(\"p\", { className: \"jp-agent-execution-result-error\" }, result.error)),\n                React.createElement(\"div\", { className: \"jp-agent-execution-result-stats\" },\n                    React.createElement(\"span\", null,\n                        result.createdCells.length,\n                        \"\\uAC1C \\uC140 \\uC0DD\\uC131\"),\n                    React.createElement(\"span\", null,\n                        result.modifiedCells.length,\n                        \"\\uAC1C \\uC140 \\uC218\\uC815\"),\n                    result.executionTime && (React.createElement(\"span\", null,\n                        (result.executionTime / 1000).toFixed(1),\n                        \"\\uCD08\")))))));\n    };\n    // 메시지가 Chat 메시지인지 확인\n    const isChatMessage = (msg) => {\n        return !('type' in msg) || msg.type !== 'agent_execution';\n    };\n    return (React.createElement(\"div\", { className: \"jp-agent-panel\" },\n        showSettings && (React.createElement(SettingsPanel, { onClose: () => setShowSettings(false), onSave: handleSaveConfig, currentConfig: llmConfig || undefined })),\n        React.createElement(\"div\", { className: \"jp-agent-header\" },\n            React.createElement(\"h2\", null, \"HDSP Agent\"),\n            React.createElement(\"div\", { className: \"jp-agent-header-buttons\" },\n                React.createElement(\"button\", { className: \"jp-agent-clear-button\", onClick: clearChat, title: \"\\uB300\\uD654 \\uCD08\\uAE30\\uD654\" },\n                    React.createElement(\"svg\", { width: \"16\", height: \"16\", viewBox: \"0 0 24 24\", fill: \"none\", stroke: \"currentColor\", strokeWidth: \"2\", strokeLinecap: \"round\", strokeLinejoin: \"round\" },\n                        React.createElement(\"polyline\", { points: \"3 6 5 6 21 6\" }),\n                        React.createElement(\"path\", { d: \"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\" }),\n                        React.createElement(\"line\", { x1: \"10\", y1: \"11\", x2: \"10\", y2: \"17\" }),\n                        React.createElement(\"line\", { x1: \"14\", y1: \"11\", x2: \"14\", y2: \"17\" }))),\n                React.createElement(\"button\", { className: \"jp-agent-settings-button-icon\", onClick: () => setShowSettings(true), title: \"\\uC124\\uC815\" },\n                    React.createElement(\"svg\", { width: \"16\", height: \"16\", viewBox: \"0 0 24 24\", fill: \"none\", stroke: \"currentColor\", strokeWidth: \"2\", strokeLinecap: \"round\", strokeLinejoin: \"round\" },\n                        React.createElement(\"line\", { x1: \"4\", y1: \"21\", x2: \"4\", y2: \"14\" }),\n                        React.createElement(\"line\", { x1: \"4\", y1: \"10\", x2: \"4\", y2: \"3\" }),\n                        React.createElement(\"line\", { x1: \"12\", y1: \"21\", x2: \"12\", y2: \"12\" }),\n                        React.createElement(\"line\", { x1: \"12\", y1: \"8\", x2: \"12\", y2: \"3\" }),\n                        React.createElement(\"line\", { x1: \"20\", y1: \"21\", x2: \"20\", y2: \"16\" }),\n                        React.createElement(\"line\", { x1: \"20\", y1: \"12\", x2: \"20\", y2: \"3\" }),\n                        React.createElement(\"line\", { x1: \"1\", y1: \"14\", x2: \"7\", y2: \"14\" }),\n                        React.createElement(\"line\", { x1: \"9\", y1: \"8\", x2: \"15\", y2: \"8\" }),\n                        React.createElement(\"line\", { x1: \"17\", y1: \"16\", x2: \"23\", y2: \"16\" }))))),\n        React.createElement(\"div\", { className: \"jp-agent-messages\" },\n            messages.length === 0 ? (React.createElement(\"div\", { className: \"jp-agent-empty-state\" },\n                React.createElement(\"p\", null, \"\\uC548\\uB155\\uD558\\uC138\\uC694! HDSP Agent\\uC785\\uB2C8\\uB2E4.\"),\n                React.createElement(\"p\", { className: \"jp-agent-empty-hint\" }, inputMode === 'agent'\n                    ? '노트북 작업을 자연어로 요청하세요. 예: \"데이터 시각화 해줘\"'\n                    : '메시지를 입력하거나 아래 버튼으로 Agent 모드를 선택하세요.'))) : (messages.map(msg => {\n                if (isChatMessage(msg)) {\n                    // 일반 Chat 메시지\n                    return (React.createElement(\"div\", { key: msg.id, className: `jp-agent-message jp-agent-message-${msg.role}` },\n                        React.createElement(\"div\", { className: \"jp-agent-message-header\" },\n                            React.createElement(\"span\", { className: \"jp-agent-message-role\" }, msg.role === 'user' ? '사용자' : 'Agent'),\n                            React.createElement(\"span\", { className: \"jp-agent-message-time\" }, new Date(msg.timestamp).toLocaleTimeString())),\n                        React.createElement(\"div\", { className: `jp-agent-message-content${streamingMessageId === msg.id ? ' streaming' : ''}`, dangerouslySetInnerHTML: {\n                                __html: msg.role === 'assistant'\n                                    ? formatMarkdownToHtml(msg.content)\n                                    : escapeHtml(msg.content).replace(/\\n/g, '<br>')\n                            } })));\n                }\n                else {\n                    // Agent 실행 메시지\n                    return (React.createElement(\"div\", { key: msg.id, className: \"jp-agent-message jp-agent-message-agent-execution\" }, renderAgentExecutionMessage(msg)));\n                }\n            })),\n            isLoading && !isStreaming && !isAgentRunning && (React.createElement(\"div\", { className: \"jp-agent-message jp-agent-message-assistant\" },\n                React.createElement(\"div\", { className: \"jp-agent-message-header\" },\n                    React.createElement(\"span\", { className: \"jp-agent-message-role\" }, \"Agent\")),\n                React.createElement(\"div\", { className: \"jp-agent-message-content jp-agent-loading\" },\n                    React.createElement(\"span\", { className: \"jp-agent-loading-dot\" }, \".\"),\n                    React.createElement(\"span\", { className: \"jp-agent-loading-dot\" }, \".\"),\n                    React.createElement(\"span\", { className: \"jp-agent-loading-dot\" }, \".\")))),\n            React.createElement(\"div\", { ref: messagesEndRef })),\n        React.createElement(\"div\", { className: \"jp-agent-input-container\" },\n            React.createElement(\"div\", { className: \"jp-agent-input-wrapper\" },\n                React.createElement(\"textarea\", { className: `jp-agent-input ${inputMode === 'agent' ? 'jp-agent-input--agent-mode' : ''}`, value: input, onChange: (e) => setInput(e.target.value), onKeyDown: handleKeyDown, placeholder: inputMode === 'agent'\n                        ? '노트북 작업을 입력하세요... (예: 데이터 시각화 해줘)'\n                        : '메시지를 입력하세요...', rows: 3, disabled: isLoading || isAgentRunning }),\n                React.createElement(\"button\", { className: \"jp-agent-send-button\", onClick: handleSendMessage, disabled: !input.trim() || isLoading || isStreaming || isAgentRunning, title: \"\\uC804\\uC1A1 (Enter)\" }, isAgentRunning ? '실행 중...' : '전송')),\n            React.createElement(\"div\", { className: \"jp-agent-mode-bar\" },\n                React.createElement(\"div\", { className: \"jp-agent-mode-toggle-container\" },\n                    React.createElement(\"button\", { className: `jp-agent-mode-toggle ${inputMode === 'agent' ? 'jp-agent-mode-toggle--active' : ''}`, onClick: toggleMode, title: `${inputMode === 'agent' ? 'Agent' : 'Chat'} 모드 (⇧Tab)` },\n                        React.createElement(\"svg\", { className: \"jp-agent-mode-icon\", viewBox: \"0 0 16 16\", fill: \"currentColor\", width: \"14\", height: \"14\" }, inputMode === 'agent' ? (\n                        // 무한대 아이콘 (Agent 모드)\n                        React.createElement(\"path\", { d: \"M4.5 8c0-1.38 1.12-2.5 2.5-2.5.9 0 1.68.48 2.12 1.2L8 8l1.12 1.3c-.44.72-1.22 1.2-2.12 1.2-1.38 0-2.5-1.12-2.5-2.5zm6.88 1.3c.44-.72 1.22-1.2 2.12-1.2 1.38 0 2.5 1.12 2.5 2.5s-1.12 2.5-2.5 2.5c-.9 0-1.68-.48-2.12-1.2L12.5 10.6c.3.24.68.4 1.1.4.83 0 1.5-.67 1.5-1.5S14.43 8 13.6 8c-.42 0-.8.16-1.1.4l-1.12 1.3zM7 9.5c-.42 0-.8-.16-1.1-.4L4.78 7.8c-.44.72-1.22 1.2-2.12 1.2C1.28 9 .17 7.88.17 6.5S1.29 4 2.67 4c.9 0 1.68.48 2.12 1.2L5.9 6.5c-.3-.24-.68-.4-1.1-.4C3.97 6.1 3.3 6.77 3.3 7.6s.67 1.5 1.5 1.5c.42 0 .8-.16 1.1-.4l1.12-1.3L8 8l-1 1.5z\" })) : (\n                        // 채팅 아이콘 (Chat 모드)\n                        React.createElement(\"path\", { d: \"M8 1C3.58 1 0 4.13 0 8c0 1.5.5 2.88 1.34 4.04L.5 15l3.37-.92A8.56 8.56 0 008 15c4.42 0 8-3.13 8-7s-3.58-7-8-7zM4.5 9a1 1 0 110-2 1 1 0 010 2zm3.5 0a1 1 0 110-2 1 1 0 010 2zm3.5 0a1 1 0 110-2 1 1 0 010 2z\" }))),\n                        React.createElement(\"span\", { className: \"jp-agent-mode-label\" }, inputMode === 'agent' ? 'Agent' : 'Chat'),\n                        React.createElement(\"svg\", { className: \"jp-agent-mode-chevron\", viewBox: \"0 0 16 16\", fill: \"currentColor\", width: \"12\", height: \"12\" },\n                            React.createElement(\"path\", { d: \"M4.47 5.47a.75.75 0 011.06 0L8 7.94l2.47-2.47a.75.75 0 111.06 1.06l-3 3a.75.75 0 01-1.06 0l-3-3a.75.75 0 010-1.06z\" }))),\n                    showModeDropdown && (React.createElement(\"div\", { className: \"jp-agent-mode-dropdown\" },\n                        React.createElement(\"button\", { className: `jp-agent-mode-option ${inputMode === 'chat' ? 'jp-agent-mode-option--selected' : ''}`, onClick: () => { setInputMode('chat'); setShowModeDropdown(false); } },\n                            React.createElement(\"svg\", { viewBox: \"0 0 16 16\", fill: \"currentColor\", width: \"14\", height: \"14\" },\n                                React.createElement(\"path\", { d: \"M8 1C3.58 1 0 4.13 0 8c0 1.5.5 2.88 1.34 4.04L.5 15l3.37-.92A8.56 8.56 0 008 15c4.42 0 8-3.13 8-7s-3.58-7-8-7zM4.5 9a1 1 0 110-2 1 1 0 010 2zm3.5 0a1 1 0 110-2 1 1 0 010 2zm3.5 0a1 1 0 110-2 1 1 0 010 2z\" })),\n                            React.createElement(\"span\", null, \"Chat\"),\n                            React.createElement(\"span\", { className: \"jp-agent-mode-shortcut\" }, \"\\uC77C\\uBC18 \\uB300\\uD654\")),\n                        React.createElement(\"button\", { className: `jp-agent-mode-option ${inputMode === 'agent' ? 'jp-agent-mode-option--selected' : ''}`, onClick: () => { setInputMode('agent'); setShowModeDropdown(false); } },\n                            React.createElement(\"svg\", { viewBox: \"0 0 16 16\", fill: \"currentColor\", width: \"14\", height: \"14\" },\n                                React.createElement(\"path\", { d: \"M4.5 8c0-1.38 1.12-2.5 2.5-2.5.9 0 1.68.48 2.12 1.2L8 8l1.12 1.3c-.44.72-1.22 1.2-2.12 1.2-1.38 0-2.5-1.12-2.5-2.5z\" })),\n                            React.createElement(\"span\", null, \"Agent\"),\n                            React.createElement(\"span\", { className: \"jp-agent-mode-shortcut\" }, \"\\uB178\\uD2B8\\uBD81 \\uC790\\uB3D9 \\uC2E4\\uD589\"))))),\n                React.createElement(\"div\", { className: \"jp-agent-mode-hints\" },\n                    React.createElement(\"span\", { className: \"jp-agent-mode-hint\" }, \"\\u21E7Tab \\uBAA8\\uB4DC \\uC804\\uD658\"))))));\n});\nChatPanel.displayName = 'ChatPanel';\n/**\n * Agent Panel Widget\n */\nexport class AgentPanelWidget extends ReactWidget {\n    constructor(apiService, notebookTracker) {\n        super();\n        this.chatPanelRef = React.createRef();\n        this.apiService = apiService;\n        this.notebookTracker = notebookTracker;\n        this.id = 'hdsp-agent-panel';\n        this.title.label = 'HDSP';\n        this.title.caption = 'HDSP Agent Assistant';\n        // Using JupyterLab's built-in robot icon\n        this.addClass('jp-agent-widget');\n    }\n    render() {\n        return (React.createElement(ChatPanel, { ref: this.chatPanelRef, apiService: this.apiService, notebookTracker: this.notebookTracker }));\n    }\n    /**\n     * Add a message from cell action\n     * @param action - The action type (explain, fix, custom_prompt)\n     * @param cellContent - The cell content\n     * @param displayPrompt - The user-facing prompt to show in the UI\n     * @param llmPrompt - The actual prompt to send to the LLM\n     * @param cellId - The cell ID for applying code (optional)\n     * @param cellIndex - The cell index (0-based) for applying code (optional)\n     */\n    addCellActionMessage(action, cellContent, displayPrompt, llmPrompt, cellId, cellIndex) {\n        console.log('[AgentPanel] Cell action:', action);\n        console.log('[AgentPanel] Display prompt:', displayPrompt);\n        console.log('[AgentPanel] LLM prompt:', llmPrompt);\n        console.log('[AgentPanel] Cell ID:', cellId);\n        console.log('[AgentPanel] Cell Index:', cellIndex);\n        if (!this.chatPanelRef.current) {\n            console.error('[AgentPanel] ChatPanel ref not available');\n            return;\n        }\n        // Store cell index for code application (preferred method)\n        if (cellIndex !== undefined && this.chatPanelRef.current.setCurrentCellIndex) {\n            this.chatPanelRef.current.setCurrentCellIndex(cellIndex);\n        }\n        // Store cell ID for code application (fallback)\n        if (cellId && this.chatPanelRef.current.setCurrentCellId) {\n            this.chatPanelRef.current.setCurrentCellId(cellId);\n        }\n        // Set the display prompt in the input field\n        this.chatPanelRef.current.setInput(displayPrompt);\n        // Store the LLM prompt\n        this.chatPanelRef.current.setLlmPrompt(llmPrompt);\n        // Automatically execute after a short delay to ensure state is updated\n        setTimeout(() => {\n            if (this.chatPanelRef.current) {\n                this.chatPanelRef.current.handleSendMessage().catch(error => {\n                    console.error('[AgentPanel] Failed to send message automatically:', error);\n                });\n            }\n        }, 100);\n    }\n    /**\n     * Analyze entire notebook before saving\n     * @param cells - Array of collected cells with content, output, and imports\n     * @param onComplete - Callback to execute after analysis (perform save)\n     */\n    analyzeNotebook(cells, onComplete) {\n        console.log('[AgentPanel] analyzeNotebook called with', cells.length, 'cells');\n        if (!this.chatPanelRef.current) {\n            console.error('[AgentPanel] ChatPanel ref not available');\n            onComplete();\n            return;\n        }\n        // Create summary of notebook\n        const totalCells = cells.length;\n        const cellsWithErrors = cells.filter(cell => cell.output && (cell.output.includes('Error') ||\n            cell.output.includes('Traceback') ||\n            cell.output.includes('Exception'))).length;\n        const cellsWithImports = cells.filter(cell => cell.imports && cell.imports.length > 0).length;\n        const localImports = cells.reduce((acc, cell) => {\n            if (cell.imports) {\n                return acc + cell.imports.filter((imp) => imp.isLocal).length;\n            }\n            return acc;\n        }, 0);\n        // Create display prompt\n        const displayPrompt = `전체 노트북 검수 요청 (${totalCells}개 셀)`;\n        // Create detailed LLM prompt with all cells\n        let llmPrompt = `다음은 저장하기 전의 Jupyter 노트북 전체 내용입니다. 모든 셀을 검토하고 개선 사항을 제안해주세요.\n\n## 노트북 요약\n- 전체 셀 수: ${totalCells}개\n- 에러가 있는 셀: ${cellsWithErrors}개\n- Import가 있는 셀: ${cellsWithImports}개\n- 로컬 모듈 import: ${localImports}개\n\n## 전체 셀 내용\n\n`;\n        cells.forEach((cell, index) => {\n            llmPrompt += `### 셀 ${index + 1} (ID: ${cell.id})\n\\`\\`\\`python\n${cell.content}\n\\`\\`\\`\n`;\n            if (cell.output) {\n                llmPrompt += `\n**실행 결과:**\n\\`\\`\\`\n${cell.output}\n\\`\\`\\`\n`;\n            }\n            if (cell.imports && cell.imports.length > 0) {\n                llmPrompt += `\n**Imports:**\n`;\n                cell.imports.forEach((imp) => {\n                    llmPrompt += `- \\`${imp.module}\\` (${imp.isLocal ? '로컬' : '표준 라이브러리'})\\n`;\n                });\n            }\n            llmPrompt += '\\n---\\n\\n';\n        });\n        llmPrompt += `\n## 검수 요청 사항\n\n다음 형식으로 응답해주세요:\n\n### 1. 전반적인 코드 품질 평가\n(노트북 전체의 코드 품질, 구조, 일관성 등을 평가)\n\n### 2. 발견된 주요 이슈\n(에러, 경고, 잠재적 문제점 등을 나열)\n\n### 3. 셀별 개선 제안\n각 셀에 대해 구체적인 개선 사항이 있다면:\n- **셀 X**: (개선 사항)\n  \\`\\`\\`python\n  (개선된 코드)\n  \\`\\`\\`\n\n### 4. 전반적인 개선 권장사항\n(노트북 전체를 개선하기 위한 일반적인 제안)\n\n### 5. 저장 권장 여부\n- ✅ **저장 권장**: (이유)\n- ⚠️ **수정 후 저장 권장**: (이유)\n- ❌ **저장 비권장**: (이유)\n`;\n        // Set the display prompt in the input field\n        this.chatPanelRef.current.setInput(displayPrompt);\n        // Store the LLM prompt\n        this.chatPanelRef.current.setLlmPrompt(llmPrompt);\n        // Automatically execute after a short delay to ensure state is updated\n        setTimeout(() => {\n            if (this.chatPanelRef.current) {\n                this.chatPanelRef.current.handleSendMessage().catch(error => {\n                    console.error('[AgentPanel] Failed to send message automatically:', error);\n                }).finally(() => {\n                    // Store the onComplete callback to be executed after user reviews the analysis\n                    // For now, we'll execute it immediately\n                    // TODO: Add UI button to allow user to review and then save\n                    console.log('[AgentPanel] Analysis complete, executing onComplete callback');\n                    onComplete();\n                });\n            }\n        }, 100);\n    }\n}\n","/**\n * Prompt Generation Dialog Component\n * Dialog for entering prompts to generate notebooks\n */\nimport React, { useState } from 'react';\nimport { Dialog, DialogTitle, DialogContent, DialogActions, TextField, Button, Typography, Box, Chip } from '@mui/material';\nimport AutoFixHighIcon from '@mui/icons-material/AutoFixHigh';\nconst EXAMPLE_PROMPTS = [\n    '타이타닉 생존자 예측을 dask와 lgbm으로 생성해줘',\n    '주식 데이터 분석 및 시각화 노트북 만들어줘',\n    'Iris 데이터셋으로 분류 모델 학습하기',\n    '시계열 데이터 분석 및 예측 모델 만들기'\n];\nexport const PromptGenerationDialog = ({ open, onClose, onGenerate }) => {\n    const [prompt, setPrompt] = useState('');\n    const [isGenerating, setIsGenerating] = useState(false);\n    const [progress, setProgress] = useState(0);\n    const [statusMessage, setStatusMessage] = useState('');\n    const handleGenerate = () => {\n        if (prompt.trim()) {\n            setIsGenerating(true);\n            onGenerate(prompt.trim());\n            setPrompt('');\n            setIsGenerating(false);\n            onClose();\n        }\n    };\n    const handleKeyPress = (event) => {\n        if (event.key === 'Enter' && event.ctrlKey) {\n            handleGenerate();\n        }\n    };\n    const handleExampleClick = (example) => {\n        setPrompt(example);\n    };\n    return (React.createElement(Dialog, { open: open, onClose: onClose, maxWidth: \"md\", fullWidth: true, PaperProps: {\n            sx: {\n                borderRadius: 2,\n                minHeight: '400px'\n            }\n        } },\n        React.createElement(DialogTitle, null,\n            React.createElement(Box, { display: \"flex\", alignItems: \"center\", gap: 1 },\n                React.createElement(AutoFixHighIcon, { color: \"primary\" }),\n                React.createElement(Typography, { variant: \"h6\" }, \"HDSP \\uD504\\uB86C\\uD504\\uD2B8\\uB85C \\uB178\\uD2B8\\uBD81 \\uC0DD\\uC131\"))),\n        React.createElement(DialogContent, null,\n            React.createElement(Box, { display: \"flex\", flexDirection: \"column\", gap: 2, mt: 1 },\n                React.createElement(Typography, { variant: \"body2\", color: \"text.secondary\" }, \"\\uC6D0\\uD558\\uB294 \\uB178\\uD2B8\\uBD81\\uC758 \\uB0B4\\uC6A9\\uC744 \\uC790\\uC5F0\\uC5B4\\uB85C \\uC124\\uBA85\\uD574\\uC8FC\\uC138\\uC694. AI\\uAC00 \\uC790\\uB3D9\\uC73C\\uB85C \\uB178\\uD2B8\\uBD81\\uC744 \\uC0DD\\uC131\\uD569\\uB2C8\\uB2E4.\"),\n                React.createElement(TextField, { autoFocus: true, multiline: true, rows: 6, fullWidth: true, variant: \"outlined\", placeholder: \"\\uC608: \\uD0C0\\uC774\\uD0C0\\uB2C9 \\uC0DD\\uC874\\uC790 \\uC608\\uCE21\\uC744 dask\\uC640 lgbm\\uC73C\\uB85C \\uC0DD\\uC131\\uD574\\uC918\", value: prompt, onChange: (e) => setPrompt(e.target.value), onKeyPress: handleKeyPress, disabled: isGenerating, sx: {\n                        '& .MuiOutlinedInput-root': {\n                            fontSize: '14px'\n                        }\n                    } }),\n                React.createElement(Box, null,\n                    React.createElement(Typography, { variant: \"caption\", color: \"text.secondary\", display: \"block\", mb: 1 }, \"\\uC608\\uC2DC \\uD504\\uB86C\\uD504\\uD2B8 (\\uD074\\uB9AD\\uD558\\uC5EC \\uC0AC\\uC6A9):\"),\n                    React.createElement(Box, { display: \"flex\", flexWrap: \"wrap\", gap: 1 }, EXAMPLE_PROMPTS.map((example, index) => (React.createElement(Chip, { key: index, label: example, variant: \"outlined\", size: \"small\", onClick: () => handleExampleClick(example), sx: {\n                            cursor: 'pointer',\n                            '&:hover': {\n                                backgroundColor: 'action.hover'\n                            }\n                        } }))))),\n                React.createElement(Box, { sx: {\n                        backgroundColor: 'action.hover',\n                        borderRadius: 1,\n                        padding: 2\n                    } },\n                    React.createElement(Typography, { variant: \"caption\", color: \"text.secondary\" },\n                        \"\\uD83D\\uDCA1 \",\n                        React.createElement(\"strong\", null, \"\\uD301:\"),\n                        React.createElement(\"br\", null),\n                        \"\\u2022 \\uC0AC\\uC6A9\\uD560 \\uB77C\\uC774\\uBE0C\\uB7EC\\uB9AC\\uB97C \\uBA85\\uC2DC\\uD558\\uBA74 \\uB354 \\uC815\\uD655\\uD569\\uB2C8\\uB2E4\",\n                        React.createElement(\"br\", null),\n                        \"\\u2022 \\uBD84\\uC11D \\uBAA9\\uC801\\uACFC \\uB370\\uC774\\uD130\\uB97C \\uAD6C\\uCCB4\\uC801\\uC73C\\uB85C \\uC124\\uBA85\\uD558\\uC138\\uC694\",\n                        React.createElement(\"br\", null),\n                        \"\\u2022 Ctrl + Enter\\uB85C \\uBE60\\uB974\\uAC8C \\uC0DD\\uC131\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4\",\n                        React.createElement(\"br\", null),\n                        \"\\u2022 \\uC0DD\\uC131\\uC740 \\uBC31\\uADF8\\uB77C\\uC6B4\\uB4DC\\uC5D0\\uC11C \\uC9C4\\uD589\\uB418\\uBA70, \\uC644\\uB8CC\\uB418\\uBA74 \\uC54C\\uB9BC\\uC744 \\uBC1B\\uC2B5\\uB2C8\\uB2E4\")))),\n        React.createElement(DialogActions, { sx: { padding: 2, paddingTop: 0 } },\n            React.createElement(Button, { onClick: onClose, disabled: isGenerating }, \"\\uCDE8\\uC18C\"),\n            React.createElement(Button, { onClick: handleGenerate, variant: \"contained\", disabled: !prompt.trim() || isGenerating, startIcon: React.createElement(AutoFixHighIcon, null) }, \"\\uC0DD\\uC131 \\uC2DC\\uC791\"))));\n};\n","/**\n * Settings Panel Component\n * Allows users to configure LLM provider settings\n */\nimport React, { useState, useEffect } from 'react';\nexport const SettingsPanel = ({ onClose, onSave, currentConfig }) => {\n    const [provider, setProvider] = useState(currentConfig?.provider || 'gemini');\n    const [isTesting, setIsTesting] = useState(false);\n    const [testResult, setTestResult] = useState(null);\n    // Gemini settings\n    const [geminiApiKey, setGeminiApiKey] = useState(currentConfig?.gemini?.apiKey || '');\n    // Validate gemini model - only allow valid options\n    const validateGeminiModel = (model) => {\n        const validModels = ['gemini-3-pro-preview', 'gemini-2.5-pro', 'gemini-2.5-flash'];\n        if (model && validModels.includes(model)) {\n            return model;\n        }\n        console.warn(`[SettingsPanel] Invalid Gemini model \"${model}\", defaulting to gemini-2.5-pro`);\n        return 'gemini-2.5-pro';\n    };\n    const [geminiModel, setGeminiModel] = useState(validateGeminiModel(currentConfig?.gemini?.model));\n    // vLLM settings\n    const [vllmEndpoint, setVllmEndpoint] = useState(currentConfig?.vllm?.endpoint || 'http://localhost:8000');\n    const [vllmApiKey, setVllmApiKey] = useState(currentConfig?.vllm?.apiKey || '');\n    const [vllmModel, setVllmModel] = useState(currentConfig?.vllm?.model || 'meta-llama/Llama-2-7b-chat-hf');\n    // OpenAI settings\n    const [openaiApiKey, setOpenaiApiKey] = useState(currentConfig?.openai?.apiKey || '');\n    const [openaiModel, setOpenaiModel] = useState(currentConfig?.openai?.model || 'gpt-4');\n    // Update state when currentConfig changes\n    useEffect(() => {\n        if (currentConfig) {\n            setProvider(currentConfig.provider || 'gemini');\n            setGeminiApiKey(currentConfig.gemini?.apiKey || '');\n            setGeminiModel(validateGeminiModel(currentConfig.gemini?.model));\n            setVllmEndpoint(currentConfig.vllm?.endpoint || 'http://localhost:8000');\n            setVllmApiKey(currentConfig.vllm?.apiKey || '');\n            setVllmModel(currentConfig.vllm?.model || 'meta-llama/Llama-2-7b-chat-hf');\n            setOpenaiApiKey(currentConfig.openai?.apiKey || '');\n            setOpenaiModel(currentConfig.openai?.model || 'gpt-4');\n        }\n    }, [currentConfig]);\n    // Helper: Get cookie value by name\n    const getCookie = (name) => {\n        const value = `; ${document.cookie}`;\n        const parts = value.split(`; ${name}=`);\n        if (parts.length === 2) {\n            return parts.pop()?.split(';').shift() || '';\n        }\n        return '';\n    };\n    // Helper: Build LLM config from state\n    const buildLLMConfig = () => ({\n        provider,\n        gemini: {\n            apiKey: geminiApiKey,\n            model: geminiModel\n        },\n        vllm: {\n            endpoint: vllmEndpoint,\n            apiKey: vllmApiKey,\n            model: vllmModel\n        },\n        openai: {\n            apiKey: openaiApiKey,\n            model: openaiModel\n        }\n    });\n    const handleTest = async () => {\n        setIsTesting(true);\n        setTestResult(null);\n        try {\n            const config = buildLLMConfig();\n            // Test API call\n            const response = await fetch('/hdsp-agent/test-llm', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'X-XSRFToken': getCookie('_xsrf')\n                },\n                body: JSON.stringify(config)\n            });\n            if (response.ok) {\n                const data = await response.json();\n                setTestResult(`✅ 성공: ${data.message}`);\n            }\n            else {\n                const error = await response.json();\n                setTestResult(`❌ 실패: ${error.error}`);\n            }\n        }\n        catch (error) {\n            setTestResult(`❌ 오류: ${error instanceof Error ? error.message : '알 수 없는 오류'}`);\n        }\n        finally {\n            setIsTesting(false);\n        }\n    };\n    const handleSave = () => {\n        const config = buildLLMConfig();\n        onSave(config);\n        onClose();\n    };\n    return (React.createElement(\"div\", { className: \"jp-agent-settings-overlay\" },\n        React.createElement(\"div\", { className: \"jp-agent-settings-dialog\" },\n            React.createElement(\"div\", { className: \"jp-agent-settings-header\" },\n                React.createElement(\"h2\", null, \"LLM \\uC124\\uC815\"),\n                React.createElement(\"button\", { className: \"jp-agent-settings-close\", onClick: onClose, title: \"\\uB2EB\\uAE30\" }, \"\\u00D7\")),\n            React.createElement(\"div\", { className: \"jp-agent-settings-content\" },\n                React.createElement(\"div\", { className: \"jp-agent-settings-group\" },\n                    React.createElement(\"label\", { className: \"jp-agent-settings-label\" }, \"\\uD504\\uB85C\\uBC14\\uC774\\uB354\"),\n                    React.createElement(\"select\", { className: \"jp-agent-settings-select\", value: provider, onChange: (e) => setProvider(e.target.value) },\n                        React.createElement(\"option\", { value: \"gemini\" }, \"Google Gemini\"),\n                        React.createElement(\"option\", { value: \"vllm\" }, \"vLLM\"),\n                        React.createElement(\"option\", { value: \"openai\" }, \"OpenAI\"))),\n                provider === 'gemini' && (React.createElement(\"div\", { className: \"jp-agent-settings-provider\" },\n                    React.createElement(\"h3\", null, \"Gemini \\uC124\\uC815\"),\n                    React.createElement(\"div\", { className: \"jp-agent-settings-group\" },\n                        React.createElement(\"label\", { className: \"jp-agent-settings-label\" }, \"API \\uD0A4\"),\n                        React.createElement(\"input\", { type: \"password\", className: \"jp-agent-settings-input\", value: geminiApiKey, onChange: (e) => setGeminiApiKey(e.target.value), placeholder: \"Gemini API \\uD0A4\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694\" })),\n                    React.createElement(\"div\", { className: \"jp-agent-settings-group\" },\n                        React.createElement(\"label\", { className: \"jp-agent-settings-label\" }, \"\\uBAA8\\uB378\"),\n                        React.createElement(\"select\", { className: \"jp-agent-settings-select\", value: geminiModel, onChange: (e) => setGeminiModel(e.target.value) },\n                            React.createElement(\"option\", { value: \"gemini-3-pro-preview\" }, \"Gemini 3.0 Pro\"),\n                            React.createElement(\"option\", { value: \"gemini-2.5-pro\" }, \"Gemini 2.5 Pro\"),\n                            React.createElement(\"option\", { value: \"gemini-2.5-flash\" }, \"Gemini 2.5 Flash\"))))),\n                provider === 'vllm' && (React.createElement(\"div\", { className: \"jp-agent-settings-provider\" },\n                    React.createElement(\"h3\", null, \"vLLM \\uC124\\uC815\"),\n                    React.createElement(\"div\", { className: \"jp-agent-settings-group\" },\n                        React.createElement(\"label\", { className: \"jp-agent-settings-label\" }, \"\\uC11C\\uBC84 \\uC8FC\\uC18C\"),\n                        React.createElement(\"input\", { type: \"text\", className: \"jp-agent-settings-input\", value: vllmEndpoint, onChange: (e) => setVllmEndpoint(e.target.value), placeholder: \"http://localhost:8000\" })),\n                    React.createElement(\"div\", { className: \"jp-agent-settings-group\" },\n                        React.createElement(\"label\", { className: \"jp-agent-settings-label\" }, \"API \\uD0A4 (\\uC120\\uD0DD\\uC0AC\\uD56D)\"),\n                        React.createElement(\"input\", { type: \"password\", className: \"jp-agent-settings-input\", value: vllmApiKey, onChange: (e) => setVllmApiKey(e.target.value), placeholder: \"API \\uD0A4\\uAC00 \\uD544\\uC694\\uD55C \\uACBD\\uC6B0 \\uC785\\uB825\" })),\n                    React.createElement(\"div\", { className: \"jp-agent-settings-group\" },\n                        React.createElement(\"label\", { className: \"jp-agent-settings-label\" }, \"\\uBAA8\\uB378 \\uC774\\uB984\"),\n                        React.createElement(\"input\", { type: \"text\", className: \"jp-agent-settings-input\", value: vllmModel, onChange: (e) => setVllmModel(e.target.value), placeholder: \"meta-llama/Llama-2-7b-chat-hf\" })))),\n                provider === 'openai' && (React.createElement(\"div\", { className: \"jp-agent-settings-provider\" },\n                    React.createElement(\"h3\", null, \"OpenAI \\uC124\\uC815\"),\n                    React.createElement(\"div\", { className: \"jp-agent-settings-group\" },\n                        React.createElement(\"label\", { className: \"jp-agent-settings-label\" }, \"API \\uD0A4\"),\n                        React.createElement(\"input\", { type: \"password\", className: \"jp-agent-settings-input\", value: openaiApiKey, onChange: (e) => setOpenaiApiKey(e.target.value), placeholder: \"sk-...\" })),\n                    React.createElement(\"div\", { className: \"jp-agent-settings-group\" },\n                        React.createElement(\"label\", { className: \"jp-agent-settings-label\" }, \"\\uBAA8\\uB378\"),\n                        React.createElement(\"select\", { className: \"jp-agent-settings-select\", value: openaiModel, onChange: (e) => setOpenaiModel(e.target.value) },\n                            React.createElement(\"option\", { value: \"gpt-4\" }, \"GPT-4\"),\n                            React.createElement(\"option\", { value: \"gpt-4-turbo\" }, \"GPT-4 Turbo\"),\n                            React.createElement(\"option\", { value: \"gpt-3.5-turbo\" }, \"GPT-3.5 Turbo\")))))),\n            testResult && (React.createElement(\"div\", { className: \"jp-agent-settings-test-result\" }, testResult)),\n            React.createElement(\"div\", { className: \"jp-agent-settings-footer\" },\n                React.createElement(\"button\", { className: \"jp-agent-settings-button jp-agent-settings-button-secondary\", onClick: onClose }, \"\\uCDE8\\uC18C\"),\n                React.createElement(\"button\", { className: \"jp-agent-settings-button jp-agent-settings-button-test\", onClick: handleTest, disabled: isTesting }, isTesting ? '테스트 중...' : 'API 테스트'),\n                React.createElement(\"button\", { className: \"jp-agent-settings-button jp-agent-settings-button-primary\", onClick: handleSave }, \"\\uC800\\uC7A5\")))));\n};\n","/**\n * Task Progress Widget Component\n * Floating widget showing notebook generation progress\n */\nimport React, { useState } from 'react';\nimport { Card, CardContent, Typography, LinearProgress, Box, IconButton, Collapse, Chip, Button } from '@mui/material';\nimport CloseIcon from '@mui/icons-material/Close';\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess';\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport CancelIcon from '@mui/icons-material/Cancel';\nexport const TaskProgressWidget = ({ taskStatus, onClose, onCancel, onOpenNotebook }) => {\n    const [expanded, setExpanded] = useState(true);\n    const [showDetails, setShowDetails] = useState(false);\n    const { status, progress, message, prompt, error, notebookPath } = taskStatus;\n    const isComplete = status === 'completed';\n    const isFailed = status === 'failed';\n    const isCancelled = status === 'cancelled';\n    const isRunning = status === 'running';\n    const isDone = isComplete || isFailed || isCancelled;\n    // Helper: Map status to color\n    const getStatusColor = (currentStatus) => {\n        switch (currentStatus) {\n            case 'completed': return 'success';\n            case 'failed': return 'error';\n            case 'cancelled': return 'default';\n            default: return 'primary';\n        }\n    };\n    // Helper: Map status to icon\n    const getStatusIcon = (currentStatus) => {\n        switch (currentStatus) {\n            case 'completed': return React.createElement(CheckCircleIcon, { fontSize: \"small\" });\n            case 'failed': return React.createElement(ErrorIcon, { fontSize: \"small\" });\n            case 'cancelled': return React.createElement(CancelIcon, { fontSize: \"small\" });\n            default: return null;\n        }\n    };\n    // Helper: Map status to Korean text\n    const getStatusText = (currentStatus) => {\n        const statusTextMap = {\n            'pending': '대기 중',\n            'running': '생성 중',\n            'completed': '완료',\n            'failed': '실패',\n            'cancelled': '취소됨'\n        };\n        return statusTextMap[currentStatus] || currentStatus;\n    };\n    return (React.createElement(Card, { sx: {\n            position: 'fixed',\n            bottom: 20,\n            right: 20,\n            width: expanded ? 380 : 320,\n            maxWidth: '90vw',\n            boxShadow: 3,\n            zIndex: 1300,\n            transition: 'all 0.3s ease'\n        } },\n        React.createElement(CardContent, { sx: { padding: 2, '&:last-child': { paddingBottom: 2 } } },\n            React.createElement(Box, { display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", mb: 1 },\n                React.createElement(Box, { display: \"flex\", alignItems: \"center\", gap: 1 },\n                    React.createElement(Typography, { variant: \"subtitle2\", fontWeight: \"bold\" }, \"\\uB178\\uD2B8\\uBD81 \\uC0DD\\uC131\"),\n                    React.createElement(Chip, { label: getStatusText(status), size: \"small\", color: getStatusColor(status), icon: getStatusIcon(status) || undefined })),\n                React.createElement(Box, { display: \"flex\" },\n                    React.createElement(IconButton, { size: \"small\", onClick: () => setShowDetails(!showDetails) }, showDetails ? (React.createElement(ExpandLessIcon, { fontSize: \"small\" })) : (React.createElement(ExpandMoreIcon, { fontSize: \"small\" }))),\n                    React.createElement(IconButton, { size: \"small\", onClick: onClose },\n                        React.createElement(CloseIcon, { fontSize: \"small\" })))),\n            !isDone && (React.createElement(Box, { mb: 2 },\n                React.createElement(LinearProgress, { variant: \"determinate\", value: progress, sx: { height: 6, borderRadius: 1 } }),\n                React.createElement(Box, { display: \"flex\", justifyContent: \"space-between\", mt: 0.5 },\n                    React.createElement(Typography, { variant: \"caption\", color: \"text.secondary\" }, message),\n                    React.createElement(Typography, { variant: \"caption\", color: \"text.secondary\" },\n                        progress,\n                        \"%\")))),\n            isComplete && (React.createElement(Box, { mb: 2 },\n                React.createElement(Typography, { variant: \"body2\", color: \"success.main\" },\n                    \"\\u2713 \",\n                    message))),\n            isFailed && error && (React.createElement(Box, { mb: 2 },\n                React.createElement(Typography, { variant: \"body2\", color: \"error.main\" },\n                    \"\\u2717 \",\n                    error))),\n            React.createElement(Collapse, { in: showDetails },\n                React.createElement(Box, { sx: {\n                        backgroundColor: 'action.hover',\n                        borderRadius: 1,\n                        padding: 1.5,\n                        mb: 2\n                    } },\n                    React.createElement(Typography, { variant: \"caption\", color: \"text.secondary\", display: \"block\", mb: 0.5 }, \"\\uD504\\uB86C\\uD504\\uD2B8:\"),\n                    React.createElement(Typography, { variant: \"body2\", sx: { wordBreak: 'break-word' } }, prompt),\n                    notebookPath && (React.createElement(React.Fragment, null,\n                        React.createElement(Typography, { variant: \"caption\", color: \"text.secondary\", display: \"block\", mt: 1, mb: 0.5 }, \"\\uC800\\uC7A5 \\uC704\\uCE58:\"),\n                        React.createElement(Typography, { variant: \"caption\", sx: { wordBreak: 'break-all', fontFamily: 'monospace' } }, notebookPath))))),\n            React.createElement(Box, { display: \"flex\", gap: 1, justifyContent: \"flex-end\" },\n                isRunning && (React.createElement(Button, { size: \"small\", variant: \"outlined\", onClick: onCancel }, \"\\uCDE8\\uC18C\")),\n                isComplete && notebookPath && (React.createElement(Button, { size: \"small\", variant: \"contained\", onClick: onOpenNotebook }, \"\\uB178\\uD2B8\\uBD81 \\uC5F4\\uAE30\")),\n                isDone && (React.createElement(Button, { size: \"small\", variant: \"text\", onClick: onClose }, \"\\uB2EB\\uAE30\"))))));\n};\n","/**\n * Jupyter Agent Extension Entry Point\n */\n// Import plugins\nimport { sidebarPlugin } from './plugins/sidebar-plugin';\nimport { cellButtonsPlugin } from './plugins/cell-buttons-plugin';\nimport { promptGenerationPlugin } from './plugins/prompt-generation-plugin';\nimport { saveInterceptorPlugin } from './plugins/save-interceptor-plugin';\n// Import styles\n// import '../style/index.css';\n/**\n * The main plugin export\n * Note: sidebarPlugin must load before cellButtonsPlugin\n * saveInterceptorPlugin loads last to intercept save operations\n */\nconst plugins = [\n    sidebarPlugin,\n    cellButtonsPlugin,\n    promptGenerationPlugin,\n    saveInterceptorPlugin\n];\nexport default plugins;\n","/**\n * Cell Buttons Plugin\n * Injects E, F, ? action buttons into notebook cells\n * Communicates with sidebar panel instead of Chrome extension\n */\nimport { INotebookTracker } from '@jupyterlab/notebook';\nimport { CellAction } from '../types';\n/**\n * Cell Buttons Plugin\n */\nexport const cellButtonsPlugin = {\n    id: '@hdsp-agent/cell-buttons',\n    autoStart: true,\n    requires: [INotebookTracker],\n    activate: (app, notebookTracker) => {\n        console.log('[CellButtonsPlugin] Activated');\n        // Store app reference globally for later use\n        window.jupyterapp = app;\n        // Handle new notebooks\n        notebookTracker.widgetAdded.connect((sender, panel) => {\n            console.log('[CellButtonsPlugin] Notebook widget added:', panel.id);\n            // Wait for session to be ready\n            panel.sessionContext.ready.then(() => {\n                observeNotebook(panel);\n            }).catch(err => {\n                console.error('[CellButtonsPlugin] Error waiting for session:', err);\n            });\n        });\n        // Handle current notebook if exists\n        if (notebookTracker.currentWidget) {\n            observeNotebook(notebookTracker.currentWidget);\n        }\n        // Handle notebook focus changes\n        notebookTracker.currentChanged.connect((sender, panel) => {\n            if (panel) {\n                observeNotebook(panel);\n            }\n        });\n    }\n};\n/**\n * Observe a notebook for cell changes and inject buttons\n */\nfunction observeNotebook(panel) {\n    const notebook = panel.content;\n    // Initial injection with delay to ensure cells are rendered\n    setTimeout(() => {\n        injectButtonsIntoAllCells(notebook, panel);\n        // Retry after longer delay for cells that weren't ready\n        setTimeout(() => {\n            injectButtonsIntoAllCells(notebook, panel);\n        }, 500);\n    }, 200);\n    // Watch for cell changes (add/remove/reorder)\n    const cellsChangedHandler = () => {\n        setTimeout(() => {\n            injectButtonsIntoAllCells(notebook, panel);\n        }, 100);\n    };\n    // Remove any previous listeners to avoid duplicates\n    try {\n        notebook.model?.cells.changed.disconnect(cellsChangedHandler);\n    }\n    catch {\n        // Ignore if not connected\n    }\n    // Connect new listener\n    notebook.model?.cells.changed.connect(cellsChangedHandler);\n}\n/**\n * Inject buttons into all cells in a notebook\n */\nfunction injectButtonsIntoAllCells(notebook, panel) {\n    for (let i = 0; i < notebook.widgets.length; i++) {\n        const cell = notebook.widgets[i];\n        injectButtonsIntoCell(cell, panel);\n    }\n}\n/**\n * Inject buttons into a single cell\n * Buttons are placed outside the cell (above), aligned with code start position\n */\nfunction injectButtonsIntoCell(cell, panel) {\n    // Safety checks\n    if (!cell || !cell.model) {\n        return;\n    }\n    const cellNode = cell.node;\n    if (!cellNode || !cellNode.classList.contains('jp-Cell')) {\n        return;\n    }\n    // Check if buttons already exist (using our unique class name)\n    if (cellNode.querySelector('.jp-hdsp-cell-buttons')) {\n        return;\n    }\n    // Find the prompt area to get the correct left offset\n    const promptNode = cellNode.querySelector('.jp-InputPrompt, .jp-OutputPrompt');\n    const promptWidth = promptNode ? promptNode.getBoundingClientRect().width : 64;\n    // Find the input wrapper to insert before\n    const inputWrapper = cellNode.querySelector('.jp-Cell-inputWrapper');\n    if (!inputWrapper) {\n        return;\n    }\n    // Create button container with unique class name to avoid conflicts\n    const buttonContainer = document.createElement('div');\n    buttonContainer.className = 'jp-hdsp-cell-buttons';\n    buttonContainer.style.cssText = `\n    display: flex;\n    gap: 4px;\n    padding: 4px 8px;\n    padding-left: ${promptWidth}px;\n    background: transparent;\n  `;\n    // Create E button (Explain)\n    const explainBtn = createButton('E', '설명 요청', () => {\n        handleCellAction(CellAction.EXPLAIN, cell);\n    });\n    // Create F button (Fix)\n    const fixBtn = createButton('F', '수정 제안 요청', () => {\n        handleCellAction(CellAction.FIX, cell);\n    });\n    // Create ? button (Custom Prompt)\n    const customBtn = createButton('?', '질문하기', () => {\n        handleCellAction(CellAction.CUSTOM_PROMPT, cell);\n    });\n    buttonContainer.appendChild(explainBtn);\n    buttonContainer.appendChild(fixBtn);\n    buttonContainer.appendChild(customBtn);\n    // Insert before the input wrapper (outside the cell, above it)\n    inputWrapper.parentNode?.insertBefore(buttonContainer, inputWrapper);\n}\n/**\n * Create a button element\n */\nfunction createButton(label, title, onClick) {\n    const btn = document.createElement('button');\n    btn.className = 'jp-agent-button';\n    btn.textContent = label;\n    btn.title = title;\n    btn.setAttribute('aria-label', title);\n    btn.onclick = onClick;\n    // Add inline styles as fallback\n    btn.style.cssText = `\n    width: 24px !important;\n    height: 24px !important;\n    border: 1px solid #ddd !important;\n    border-radius: 4px !important;\n    background: white !important;\n    cursor: pointer !important;\n    display: inline-flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    font-size: 12px !important;\n    font-weight: bold !important;\n    color: #333 !important;\n    padding: 0 !important;\n    margin: 0 2px !important;\n    opacity: 1 !important;\n    visibility: visible !important;\n  `;\n    return btn;\n}\n/**\n * Handle cell action button click\n */\nasync function handleCellAction(action, cell) {\n    const cellContent = cell?.model?.sharedModel?.getSource() || '';\n    if (!cellContent.trim()) {\n        showNotification('셀 내용이 비어있습니다.', 'warning');\n        return;\n    }\n    const cellIndex = getCellIndex(cell);\n    if (action === CellAction.CUSTOM_PROMPT) {\n        // For custom prompt, show dialog (no confirmation needed)\n        showCustomPromptDialog(cell);\n    }\n    else {\n        // Get cell output\n        const cellOutput = getCellOutput(cell);\n        // Determine confirmation dialog content based on action\n        let title = '';\n        let message = '';\n        switch (action) {\n            case CellAction.EXPLAIN:\n                title = `셀 ${cellIndex}번째: 설명 요청`;\n                message = '이 셀의 코드 설명을 보시겠습니까?';\n                break;\n            case CellAction.FIX:\n                title = `셀 ${cellIndex}번째: 수정 제안 요청`;\n                message = '이 셀의 코드 개선 제안을 받으시겠습니까?';\n                break;\n        }\n        // Show confirmation dialog first\n        const confirmed = await showConfirmDialog(title, message);\n        if (confirmed) {\n            // User confirmed, send to sidebar panel\n            sendToSidebarPanel(action, cell, cellContent, cellIndex, cellOutput);\n        }\n    }\n}\n/**\n * Get the index of a cell in the notebook\n */\nfunction getCellIndex(cell) {\n    const app = window.jupyterapp;\n    const notebookTracker = app?.shell?.currentWidget?.content;\n    if (!notebookTracker) {\n        return -1;\n    }\n    const widgets = notebookTracker.widgets;\n    for (let i = 0; i < widgets.length; i++) {\n        if (widgets[i] === cell) {\n            return i + 1; // Return 1-based index\n        }\n    }\n    return -1;\n}\n/**\n * Extract output from a code cell\n */\nfunction getCellOutput(cell) {\n    // cell.model이 null일 수 있으므로 안전하게 체크\n    if (!cell?.model || cell.model.type !== 'code') {\n        return '';\n    }\n    const codeCell = cell;\n    const outputs = codeCell.model?.outputs;\n    if (!outputs || outputs.length === 0) {\n        return '';\n    }\n    const outputTexts = [];\n    for (let i = 0; i < outputs.length; i++) {\n        const output = outputs.get(i);\n        const outputType = output.type;\n        if (outputType === 'stream') {\n            // stdout, stderr\n            const text = output.text;\n            if (Array.isArray(text)) {\n                outputTexts.push(text.join(''));\n            }\n            else {\n                outputTexts.push(text);\n            }\n        }\n        else if (outputType === 'execute_result' || outputType === 'display_data') {\n            // Execution results or display data\n            const data = output.data;\n            if (data['text/plain']) {\n                const text = data['text/plain'];\n                if (Array.isArray(text)) {\n                    outputTexts.push(text.join(''));\n                }\n                else {\n                    outputTexts.push(text);\n                }\n            }\n        }\n        else if (outputType === 'error') {\n            // Error output\n            const traceback = output.traceback;\n            if (Array.isArray(traceback)) {\n                outputTexts.push(traceback.join('\\n'));\n            }\n        }\n    }\n    return outputTexts.join('\\n');\n}\n/**\n * Get or assign cell ID to a cell\n */\nfunction getOrAssignCellId(cell) {\n    const cellModel = cell.model;\n    let cellId;\n    // Try to get cell ID from metadata\n    try {\n        if (cellModel.metadata && typeof cellModel.metadata.get === 'function') {\n            cellId = cellModel.metadata.get('jupyterAgentCellId');\n        }\n        else if (cellModel.metadata?.jupyterAgentCellId) {\n            cellId = cellModel.metadata.jupyterAgentCellId;\n        }\n    }\n    catch (e) {\n        // Ignore errors\n    }\n    if (!cellId) {\n        cellId = `cell-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n        // Try to set cell ID in metadata\n        try {\n            if (cellModel.metadata && typeof cellModel.metadata.set === 'function') {\n                cellModel.metadata.set('jupyterAgentCellId', cellId);\n            }\n            else if (cellModel.metadata) {\n                cellModel.metadata.jupyterAgentCellId = cellId;\n            }\n        }\n        catch (e) {\n            // Ignore errors\n        }\n    }\n    return cellId;\n}\n/**\n * Send cell action to sidebar panel\n */\nfunction sendToSidebarPanel(action, cell, cellContent, cellIndex, cellOutput) {\n    const agentPanel = window._hdspAgentPanel;\n    if (!agentPanel) {\n        console.error('[CellButtonsPlugin] Agent panel not found. Make sure sidebar plugin is loaded.');\n        return;\n    }\n    // Get or assign cell ID\n    const cellId = getOrAssignCellId(cell);\n    // Activate the sidebar panel\n    const app = window.jupyterapp;\n    if (app) {\n        app.shell.activateById(agentPanel.id);\n    }\n    // Create user-facing display prompt\n    let displayPrompt = '';\n    // Create actual LLM prompt (based on chrome_agent)\n    // Note: Use original content, not escaped. JSON.stringify will handle escaping.\n    let llmPrompt = '';\n    switch (action) {\n        case CellAction.EXPLAIN:\n            // User sees: \"Cell x: 설명 요청\" (chrome_agent와 동일)\n            displayPrompt = `${cellIndex}번째 셀: 설명 요청`;\n            // LLM receives: chrome_agent와 동일한 프롬프트\n            llmPrompt = `다음 Jupyter 셀의 내용을 자세히 설명해주세요:\n\n\\`\\`\\`python\n${cellContent}\n\\`\\`\\``;\n            break;\n        case CellAction.FIX:\n            // Check if there's an error in the output\n            const hasError = cellOutput && (cellOutput.includes('Error') ||\n                cellOutput.includes('Traceback') ||\n                cellOutput.includes('Exception') ||\n                cellOutput.includes('에러') ||\n                cellOutput.includes('오류'));\n            if (hasError && cellOutput) {\n                // 에러가 있는 경우 (chrome_agent와 동일)\n                displayPrompt = `${cellIndex}번째 셀: 에러 수정 요청`;\n                llmPrompt = `다음 Jupyter 셀 코드에 에러가 발생했습니다.\n\n원본 코드:\n\\`\\`\\`python\n${cellContent}\n\\`\\`\\`\n\n에러:\n\\`\\`\\`\n${cellOutput}\n\\`\\`\\`\n\n다음 형식으로 응답해주세요:\n\n## 에러 원인\n(에러가 발생한 원인을 간단히 설명)\n\n## 수정 방법\n\n### 방법 1: (수정 방법 제목)\n(이 방법에 대한 간단한 설명)\n\\`\\`\\`python\n(수정된 코드)\n\\`\\`\\`\n\n### 방법 2: (수정 방법 제목)\n(이 방법에 대한 간단한 설명)\n\\`\\`\\`python\n(수정된 코드)\n\\`\\`\\`\n\n### 방법 3: (수정 방법 제목) (있는 경우)\n(이 방법에 대한 간단한 설명)\n\\`\\`\\`python\n(수정된 코드)\n\\`\\`\\`\n\n최소 2개, 최대 3개의 다양한 수정 방법을 제안해주세요.`;\n            }\n            else {\n                // 에러가 없는 경우 - 코드 리뷰/개선 제안 (chrome_agent와 동일)\n                displayPrompt = `${cellIndex}번째 셀: 개선 제안 요청`;\n                llmPrompt = `다음 Jupyter 셀 코드를 리뷰하고 개선 방법을 제안해주세요.\n\n코드:\n\\`\\`\\`python\n${cellContent}\n\\`\\`\\`\n\n다음 형식으로 응답해주세요:\n\n## 코드 분석\n(현재 코드의 기능과 특징을 간단히 설명)\n\n## 개선 방법\n\n### 방법 1: (개선 방법 제목)\n(이 방법에 대한 간단한 설명)\n\\`\\`\\`python\n(개선된 코드)\n\\`\\`\\`\n\n### 방법 2: (개선 방법 제목)\n(이 방법에 대한 간단한 설명)\n\\`\\`\\`python\n(개선된 코드)\n\\`\\`\\`\n\n### 방법 3: (개선 방법 제목) (있는 경우)\n(이 방법에 대한 간단한 설명)\n\\`\\`\\`python\n(개선된 코드)\n\\`\\`\\`\n\n최소 2개, 최대 3개의 다양한 개선 방법을 제안해주세요.`;\n            }\n            break;\n    }\n    // Send both prompts to panel with cell ID and cell index\n    if (agentPanel.addCellActionMessage) {\n        // cellIndex is 1-based (for display), convert to 0-based for array access\n        const cellIndexZeroBased = cellIndex - 1;\n        agentPanel.addCellActionMessage(action, cellContent, displayPrompt, llmPrompt, cellId, cellIndexZeroBased);\n    }\n}\n/**\n * Helper: Remove existing dialog if present\n */\nfunction removeExistingDialog(className) {\n    const existingDialog = document.querySelector(`.${className}`);\n    if (existingDialog) {\n        existingDialog.remove();\n    }\n}\n/**\n * Helper: Create dialog overlay element\n */\nfunction createDialogOverlay(className) {\n    const dialogOverlay = document.createElement('div');\n    dialogOverlay.className = className;\n    dialogOverlay.style.cssText = `\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.3);\n    z-index: 10000;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  `;\n    return dialogOverlay;\n}\n/**\n * Helper: Create dialog container element\n */\nfunction createDialogContainer(maxWidth = '400px') {\n    const dialogContainer = document.createElement('div');\n    dialogContainer.style.cssText = `\n    background: #fafafa;\n    border: 1px solid #e0e0e0;\n    border-radius: 4px;\n    padding: 24px;\n    max-width: ${maxWidth};\n    width: 90%;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n  `;\n    return dialogContainer;\n}\n/**\n * Show confirmation dialog\n * Based on chrome_agent's showConfirmDialog implementation\n */\nfunction showConfirmDialog(title, message) {\n    return new Promise((resolve) => {\n        removeExistingDialog('jp-agent-confirm-dialog');\n        const dialogOverlay = createDialogOverlay('jp-agent-confirm-dialog');\n        const dialogContainer = createDialogContainer();\n        // Dialog content\n        dialogContainer.innerHTML = `\n      <div style=\"margin-bottom: 20px;\">\n        <h3 style=\"margin: 0 0 12px 0; color: #424242; font-size: 16px; font-weight: 500;\">\n          ${escapeHtml(title)}\n        </h3>\n        <p style=\"margin: 0; color: #616161; font-size: 14px; line-height: 1.5;\">\n          ${escapeHtml(message)}\n        </p>\n      </div>\n      <div style=\"display: flex; gap: 12px; justify-content: flex-end;\">\n        <button class=\"jp-agent-confirm-cancel-btn\" style=\"\n          background: transparent;\n          color: #616161;\n          border: 1px solid #d1d5db;\n          border-radius: 3px;\n          padding: 8px 16px;\n          font-size: 13px;\n          font-weight: 500;\n          cursor: pointer;\n          transition: all 0.15s ease;\n        \">취소</button>\n        <button class=\"jp-agent-confirm-submit-btn\" style=\"\n          background: #1976d2;\n          color: white;\n          border: 1px solid #1976d2;\n          border-radius: 3px;\n          padding: 8px 16px;\n          font-size: 13px;\n          font-weight: 500;\n          cursor: pointer;\n          transition: all 0.15s ease;\n        \">확인</button>\n      </div>\n    `;\n        dialogOverlay.appendChild(dialogContainer);\n        document.body.appendChild(dialogOverlay);\n        // Button event listeners\n        const cancelBtn = dialogContainer.querySelector('.jp-agent-confirm-cancel-btn');\n        const submitBtn = dialogContainer.querySelector('.jp-agent-confirm-submit-btn');\n        // Cancel button\n        cancelBtn.addEventListener('click', () => {\n            dialogOverlay.remove();\n            resolve(false);\n        });\n        cancelBtn.addEventListener('mouseenter', () => {\n            cancelBtn.style.background = '#f5f5f5';\n        });\n        cancelBtn.addEventListener('mouseleave', () => {\n            cancelBtn.style.background = 'transparent';\n        });\n        // Submit button\n        submitBtn.addEventListener('click', () => {\n            submitBtn.disabled = true;\n            submitBtn.textContent = '처리 중...';\n            // Small delay to show processing state\n            setTimeout(() => {\n                dialogOverlay.remove();\n                resolve(true);\n            }, 100);\n        });\n        submitBtn.addEventListener('mouseenter', () => {\n            if (!submitBtn.disabled) {\n                submitBtn.style.background = '#1565c0';\n            }\n        });\n        submitBtn.addEventListener('mouseleave', () => {\n            if (!submitBtn.disabled) {\n                submitBtn.style.background = '#1976d2';\n            }\n        });\n        // ESC key to close\n        const handleEsc = (e) => {\n            if (e.key === 'Escape') {\n                dialogOverlay.remove();\n                document.removeEventListener('keydown', handleEsc);\n                resolve(false);\n            }\n        };\n        document.addEventListener('keydown', handleEsc);\n        // Close on overlay click\n        dialogOverlay.addEventListener('click', (e) => {\n            if (e.target === dialogOverlay) {\n                dialogOverlay.remove();\n                document.removeEventListener('keydown', handleEsc);\n                resolve(false);\n            }\n        });\n    });\n}\n/**\n * Escape HTML to prevent XSS\n */\nfunction escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n}\n/**\n * Escape content for markdown code blocks\n * Based on chrome_agent's escapeContent function\n */\nfunction escapeContent(content) {\n    if (!content)\n        return '';\n    // 백슬래시를 먼저 escape (다른 escape 처리 전에 수행)\n    let escaped = content.replace(/\\\\/g, '\\\\\\\\');\n    // 백틱 escape (마크다운 코드 블록 안에서 문제 방지)\n    escaped = escaped.replace(/`/g, '\\\\`');\n    return escaped;\n}\n/**\n * Get notification background color\n */\nfunction getNotificationColor(type) {\n    switch (type) {\n        case 'error': return '#f56565';\n        case 'warning': return '#ed8936';\n        default: return '#4299e1';\n    }\n}\n/**\n * Create notification element with styles\n */\nfunction createNotificationElement(message, backgroundColor) {\n    const notification = document.createElement('div');\n    notification.style.cssText = `\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    padding: 12px 16px;\n    border-radius: 6px;\n    color: white;\n    font-size: 14px;\n    font-weight: 500;\n    z-index: 10001;\n    opacity: 0;\n    transition: opacity 0.3s ease;\n    max-width: 300px;\n    word-wrap: break-word;\n    background: ${backgroundColor};\n  `;\n    notification.textContent = message;\n    return notification;\n}\n/**\n * Animate notification appearance and removal\n */\nfunction animateNotification(notification) {\n    // Show animation\n    setTimeout(() => notification.style.opacity = '1', 10);\n    // Remove after 3 seconds\n    setTimeout(() => {\n        notification.style.opacity = '0';\n        setTimeout(() => {\n            if (notification.parentNode) {\n                notification.parentNode.removeChild(notification);\n            }\n        }, 300);\n    }, 3000);\n}\n/**\n * Show notification (simple implementation)\n */\nfunction showNotification(message, type = 'info') {\n    const notification = createNotificationElement(message, getNotificationColor(type));\n    document.body.appendChild(notification);\n    animateNotification(notification);\n}\n/**\n * Show custom prompt dialog\n * Based on chrome_agent's showCustomPromptDialog implementation\n */\nfunction showCustomPromptDialog(cell) {\n    const cellContent = cell?.model?.sharedModel?.getSource() || '';\n    const cellIndex = getCellIndex(cell);\n    const cellId = getOrAssignCellId(cell);\n    console.log('커스텀 프롬프트 다이얼로그 표시', cellIndex, cellId);\n    removeExistingDialog('jp-agent-custom-prompt-dialog');\n    const dialogOverlay = createDialogOverlay('jp-agent-custom-prompt-dialog');\n    const dialogContainer = createDialogContainer('500px');\n    // 다이얼로그 내용\n    dialogContainer.innerHTML = `\n    <div style=\"margin-bottom: 20px;\">\n      <h3 style=\"margin: 0 0 8px 0; color: #424242; font-size: 16px; font-weight: 500;\">\n        셀에 대해 질문하기\n      </h3>\n      <p style=\"margin: 0; color: #757575; font-size: 13px;\">\n        물리적 위치: 셀 ${cellIndex + 1}번째 (위에서 아래로 카운트)\n      </p>\n    </div>\n    <div style=\"margin-bottom: 20px;\">\n      <textarea class=\"jp-agent-custom-prompt-input\"\n        placeholder=\"이 셀에 대해 질문할 내용을 입력하세요...\"\n        style=\"\n          width: 100%;\n          min-height: 100px;\n          padding: 12px;\n          border: 1px solid #d1d5db;\n          border-radius: 4px;\n          font-size: 14px;\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n          resize: vertical;\n          box-sizing: border-box;\n        \"\n      ></textarea>\n    </div>\n    <div style=\"display: flex; gap: 12px; justify-content: flex-end;\">\n      <button class=\"jp-agent-custom-prompt-cancel-btn\" style=\"\n        background: transparent;\n        color: #616161;\n        border: 1px solid #d1d5db;\n        border-radius: 3px;\n        padding: 8px 16px;\n        font-size: 13px;\n        font-weight: 500;\n        cursor: pointer;\n        transition: all 0.15s ease;\n      \">취소</button>\n      <button class=\"jp-agent-custom-prompt-submit-btn\" style=\"\n        background: transparent;\n        color: #1976d2;\n        border: 1px solid #1976d2;\n        border-radius: 3px;\n        padding: 8px 16px;\n        font-size: 13px;\n        font-weight: 500;\n        cursor: pointer;\n        transition: all 0.15s ease;\n      \">질문</button>\n    </div>\n  `;\n    dialogOverlay.appendChild(dialogContainer);\n    document.body.appendChild(dialogOverlay);\n    // 입력 필드에 포커스\n    const inputField = dialogContainer.querySelector('.jp-agent-custom-prompt-input');\n    setTimeout(() => inputField?.focus(), 100);\n    // 버튼 이벤트 리스너\n    const cancelBtn = dialogContainer.querySelector('.jp-agent-custom-prompt-cancel-btn');\n    const submitBtn = dialogContainer.querySelector('.jp-agent-custom-prompt-submit-btn');\n    // 취소 버튼\n    cancelBtn.addEventListener('click', () => {\n        dialogOverlay.remove();\n    });\n    cancelBtn.addEventListener('mouseenter', () => {\n        cancelBtn.style.background = '#f5f5f5';\n        cancelBtn.style.borderColor = '#9ca3af';\n    });\n    cancelBtn.addEventListener('mouseleave', () => {\n        cancelBtn.style.background = 'transparent';\n        cancelBtn.style.borderColor = '#d1d5db';\n    });\n    // 제출 버튼\n    const handleSubmit = async () => {\n        const promptText = inputField?.value.trim() || '';\n        if (!promptText) {\n            showNotification('질문 내용을 입력해주세요.', 'warning');\n            return;\n        }\n        dialogOverlay.remove();\n        // Get cell output\n        const cellOutput = getCellOutput(cell);\n        // Create display prompt: \"Cell x: Custom request\"\n        const displayPrompt = `${cellIndex}번째 셀: ${promptText}`;\n        // Create LLM prompt with code and output\n        let llmPrompt = `${promptText}\\n\\n셀 내용:\\n\\`\\`\\`\\n${cellContent}\\n\\`\\`\\``;\n        if (cellOutput) {\n            llmPrompt += `\\n\\n실행 결과:\\n\\`\\`\\`\\n${cellOutput}\\n\\`\\`\\``;\n        }\n        const agentPanel = window._hdspAgentPanel;\n        if (agentPanel) {\n            // Activate the sidebar panel\n            const app = window.jupyterapp;\n            if (app) {\n                app.shell.activateById(agentPanel.id);\n            }\n            // Send both prompts with cell ID and cell index\n            if (agentPanel.addCellActionMessage) {\n                // cellIndex is 1-based (for display), convert to 0-based for array access\n                const cellIndexZeroBased = cellIndex - 1;\n                agentPanel.addCellActionMessage(CellAction.CUSTOM_PROMPT, cellContent, displayPrompt, llmPrompt, cellId, cellIndexZeroBased);\n            }\n        }\n    };\n    submitBtn.addEventListener('click', handleSubmit);\n    submitBtn.addEventListener('mouseenter', () => {\n        submitBtn.style.background = 'rgba(25, 118, 210, 0.1)';\n    });\n    submitBtn.addEventListener('mouseleave', () => {\n        submitBtn.style.background = 'transparent';\n    });\n    // Enter 키로 제출 (Shift+Enter는 줄바꿈)\n    inputField?.addEventListener('keydown', (e) => {\n        if (e.key === 'Enter' && !e.shiftKey) {\n            e.preventDefault();\n            handleSubmit();\n        }\n    });\n    // 오버레이 클릭 시 다이얼로그 닫기\n    dialogOverlay.addEventListener('click', (e) => {\n        if (e.target === dialogOverlay) {\n            dialogOverlay.remove();\n        }\n    });\n    // ESC 키로 다이얼로그 닫기\n    const handleEscapeKey = (e) => {\n        if (e.key === 'Escape') {\n            dialogOverlay.remove();\n            document.removeEventListener('keydown', handleEscapeKey);\n        }\n    };\n    document.addEventListener('keydown', handleEscapeKey);\n}\n","/**\n * Prompt Generation Plugin\n * Adds \"프롬프트 생성\" to Jupyter Launcher\n */\nimport { ILauncher } from '@jupyterlab/launcher';\nimport { ICommandPalette, ReactWidget, Notification } from '@jupyterlab/apputils';\nimport { IDocumentManager } from '@jupyterlab/docmanager';\nimport { LabIcon } from '@jupyterlab/ui-components';\nimport { Widget } from '@lumino/widgets';\nimport React from 'react';\nimport { ThemeProvider, createTheme } from '@mui/material';\nimport hdspIconSvg from '../styles/icons/hdsp-icon.svg';\nimport { PromptGenerationDialog } from '../components/PromptGenerationDialog';\nimport { TaskProgressWidget } from '../components/TaskProgressWidget';\nimport { TaskService } from '../services/TaskService';\n/**\n * Plugin constants\n */\nconst PLUGIN_ID = '@hdsp-agent/prompt-generation';\nconst COMMAND_ID = 'hdsp-agent:generate-from-prompt';\nconst CATEGORY = 'HDSP Agent';\n/**\n * HDSP Icon\n */\nconst hdspIcon = new LabIcon({\n    name: 'hdsp-agent:hdsp-icon',\n    svgstr: hdspIconSvg\n});\n/**\n * Task Manager Widget\n * Manages active notebook generation tasks\n */\nclass TaskManagerWidget extends ReactWidget {\n    constructor(app, docManager) {\n        super();\n        this.app = app;\n        this.docManager = docManager;\n        this.taskService = new TaskService();\n        this.activeTasks = new Map();\n        this.addClass('jp-TaskManagerWidget');\n    }\n    /**\n     * Start a new notebook generation task\n     */\n    async startGeneration(prompt) {\n        try {\n            // Start generation\n            const response = await this.taskService.generateNotebook({ prompt });\n            const taskId = response.taskId;\n            // Subscribe to progress\n            this.taskService.subscribeToTaskProgress(taskId, (status) => {\n                this.activeTasks.set(taskId, status);\n                this.update();\n                // Show notification on completion\n                if (status.status === 'completed' && status.notebookPath) {\n                    Notification.success(`노트북 생성 완료: ${status.notebookPath.split('/').pop()}`, {\n                        autoClose: 5000\n                    });\n                }\n                else if (status.status === 'failed') {\n                    Notification.error(`노트북 생성 실패: ${status.error}`, {\n                        autoClose: 10000\n                    });\n                }\n            }, (error) => {\n                console.error('Task progress error:', error);\n                Notification.error('진행상황 연결 실패', { autoClose: 5000 });\n            }, () => {\n                // Task completed, keep in list for user to review\n                this.update();\n            });\n            // Show initial notification\n            Notification.info('노트북 생성을 시작했습니다', { autoClose: 3000 });\n            this.update();\n        }\n        catch (error) {\n            console.error('Failed to start generation:', error);\n            Notification.error(`생성 시작 실패: ${error.message}`, {\n                autoClose: 5000\n            });\n        }\n    }\n    /**\n     * Cancel a task\n     */\n    async cancelTask(taskId) {\n        try {\n            await this.taskService.cancelTask(taskId);\n            this.activeTasks.delete(taskId);\n            this.update();\n            Notification.info('작업을 취소했습니다', { autoClose: 3000 });\n        }\n        catch (error) {\n            console.error('Failed to cancel task:', error);\n            Notification.error(`취소 실패: ${error.message}`, { autoClose: 5000 });\n        }\n    }\n    /**\n     * Close/remove task from display\n     */\n    closeTask(taskId) {\n        this.taskService.unsubscribeFromTask(taskId);\n        this.activeTasks.delete(taskId);\n        this.update();\n    }\n    /**\n     * Open generated notebook\n     */\n    async openNotebook(notebookPath, taskId) {\n        try {\n            // Extract just the filename from the path\n            const filename = notebookPath.split('/').pop() || notebookPath;\n            // Open the notebook\n            await this.docManager.openOrReveal(filename);\n            // Close the task widget after opening\n            this.closeTask(taskId);\n            Notification.success(`노트북을 열었습니다: ${filename}`, {\n                autoClose: 3000\n            });\n        }\n        catch (error) {\n            console.error('Failed to open notebook:', error);\n            Notification.error(`노트북 열기 실패: ${error.message}`, {\n                autoClose: 5000\n            });\n        }\n    }\n    render() {\n        const theme = createTheme();\n        const tasks = Array.from(this.activeTasks.entries());\n        return (React.createElement(ThemeProvider, { theme: theme },\n            React.createElement(\"div\", { style: { position: 'fixed', bottom: 0, right: 0, zIndex: 1300 } }, tasks.map(([taskId, status], index) => (React.createElement(\"div\", { key: taskId, style: {\n                    marginBottom: index < tasks.length - 1 ? '10px' : '0'\n                } },\n                React.createElement(TaskProgressWidget, { taskStatus: status, onClose: () => this.closeTask(taskId), onCancel: () => this.cancelTask(taskId), onOpenNotebook: () => status.notebookPath &&\n                        this.openNotebook(status.notebookPath, taskId) })))))));\n    }\n    dispose() {\n        this.taskService.dispose();\n        super.dispose();\n    }\n}\n/**\n * Dialog Widget for prompt input\n */\nclass PromptDialogWidget extends ReactWidget {\n    constructor(onGenerate, onClose) {\n        super();\n        this._onGenerate = onGenerate;\n        this._onClose = onClose;\n    }\n    render() {\n        const theme = createTheme();\n        return (React.createElement(ThemeProvider, { theme: theme },\n            React.createElement(PromptGenerationDialog, { open: true, onClose: this._onClose, onGenerate: this._onGenerate })));\n    }\n}\n/**\n * Prompt Generation Plugin\n */\nexport const promptGenerationPlugin = {\n    id: PLUGIN_ID,\n    autoStart: true,\n    requires: [IDocumentManager],\n    optional: [ILauncher, ICommandPalette],\n    activate: (app, docManager, launcher, palette) => {\n        console.log('[PromptGenerationPlugin] Activating');\n        try {\n            // Create task manager widget\n            const taskManager = new TaskManagerWidget(app, docManager);\n            taskManager.id = 'hdsp-agent-task-manager';\n            taskManager.title.label = 'Task Manager';\n            // Add to shell but keep it as a floating overlay (not in main area)\n            // The widget renders itself as a fixed position element\n            Widget.attach(taskManager, document.body);\n            // Add command\n            app.commands.addCommand(COMMAND_ID, {\n                label: '프롬프트로 노트북 만들기',\n                caption: '프롬프트로 노트북 만들기',\n                icon: hdspIcon,\n                execute: () => {\n                    // Create dialog widget\n                    let dialogWidget = null;\n                    const onGenerate = async (prompt) => {\n                        if (dialogWidget) {\n                            dialogWidget.dispose();\n                            dialogWidget = null;\n                        }\n                        await taskManager.startGeneration(prompt);\n                    };\n                    const onClose = () => {\n                        if (dialogWidget) {\n                            dialogWidget.dispose();\n                            dialogWidget = null;\n                        }\n                    };\n                    dialogWidget = new PromptDialogWidget(onGenerate, onClose);\n                    dialogWidget.id = 'hdsp-agent-prompt-dialog';\n                    dialogWidget.title.label = '';\n                    app.shell.add(dialogWidget, 'main');\n                }\n            });\n            // Add to launcher\n            if (launcher) {\n                launcher.add({\n                    command: COMMAND_ID,\n                    category: 'Notebook',\n                    rank: 1\n                });\n            }\n            // Add to command palette\n            if (palette) {\n                palette.addItem({\n                    command: COMMAND_ID,\n                    category: CATEGORY\n                });\n            }\n            console.log('[PromptGenerationPlugin] Activated successfully');\n        }\n        catch (error) {\n            console.error('[PromptGenerationPlugin] Failed to activate:', error);\n        }\n    }\n};\n","/**\n * Save Interceptor Plugin\n * Intercepts notebook save operations to offer code review before saving\n * Based on chrome_agent's save interception functionality\n */\nimport { INotebookTracker } from '@jupyterlab/notebook';\nimport { ICommandPalette } from '@jupyterlab/apputils';\n/**\n * Save Interceptor Plugin\n */\nexport const saveInterceptorPlugin = {\n    id: '@hdsp-agent/save-interceptor',\n    autoStart: true,\n    requires: [INotebookTracker],\n    optional: [ICommandPalette],\n    activate: (app, notebookTracker, palette) => {\n        console.log('[SaveInterceptorPlugin] Activated');\n        let isSaving = false;\n        let originalSaveCommand = null;\n        // Store original save command and wrap it\n        if (app.commands.hasCommand('docmanager:save')) {\n            console.log('[SaveInterceptorPlugin] Found docmanager:save command');\n            const commandRegistry = app.commands;\n            const commandId = 'docmanager:save';\n            // Get the original command's execute function\n            const originalCommand = commandRegistry._commands.get(commandId);\n            if (originalCommand) {\n                originalSaveCommand = originalCommand.execute.bind(originalCommand);\n                console.log('[SaveInterceptorPlugin] Stored original save command');\n                // Replace the execute function\n                originalCommand.execute = async (args) => {\n                    const currentWidget = notebookTracker.currentWidget;\n                    console.log('[SaveInterceptorPlugin] Save command triggered', {\n                        hasCurrentWidget: !!currentWidget,\n                        isSaving: isSaving,\n                        widgetType: currentWidget?.constructor?.name\n                    });\n                    // Only intercept for notebooks\n                    if (!currentWidget) {\n                        console.log('[SaveInterceptorPlugin] No current widget, allowing default save');\n                        return originalSaveCommand(args);\n                    }\n                    if (isSaving) {\n                        console.log('[SaveInterceptorPlugin] Already in save process, executing actual save');\n                        return originalSaveCommand(args);\n                    }\n                    console.log('[SaveInterceptorPlugin] Intercepting save, showing modal');\n                    await handleSaveIntercept(currentWidget, app, originalSaveCommand, args, () => isSaving = true, () => isSaving = false);\n                };\n                console.log('[SaveInterceptorPlugin] Wrapped save command installed');\n            }\n            else {\n                console.error('[SaveInterceptorPlugin] Could not find original save command');\n            }\n        }\n        // Also intercept keyboard shortcut as backup\n        document.addEventListener('keydown', async (e) => {\n            if ((e.ctrlKey || e.metaKey) && e.key === 's') {\n                const currentWidget = notebookTracker.currentWidget;\n                if (!currentWidget) {\n                    return; // Not in a notebook, let default save happen\n                }\n                console.log('[SaveInterceptorPlugin] Save shortcut (Ctrl/Cmd+S) detected');\n                e.preventDefault();\n                e.stopPropagation();\n                if (isSaving) {\n                    console.log('[SaveInterceptorPlugin] Already saving, ignoring duplicate request');\n                    return;\n                }\n                if (!originalSaveCommand) {\n                    console.error('[SaveInterceptorPlugin] No original save command stored');\n                    return;\n                }\n                await handleSaveIntercept(currentWidget, app, originalSaveCommand, undefined, () => isSaving = true, () => isSaving = false);\n            }\n        }, true); // Use capture phase to intercept before JupyterLab\n        console.log('[SaveInterceptorPlugin] Save interception enabled');\n    }\n};\n/**\n * Handle save intercept - show modal and collect cells if needed\n */\nasync function handleSaveIntercept(panel, app, originalSaveCommand, args, setSaving, clearSaving) {\n    // Show confirmation modal\n    const shouldAnalyze = await showSaveConfirmModal();\n    if (shouldAnalyze === null) {\n        // User cancelled\n        clearSaving();\n        return;\n    }\n    if (shouldAnalyze) {\n        // Collect all cells and send for analysis\n        await performAnalysisSave(panel, app, originalSaveCommand, args, setSaving, clearSaving);\n    }\n    else {\n        // Direct save without analysis\n        await performDirectSave(panel, app, originalSaveCommand, args, setSaving, clearSaving);\n    }\n}\n/**\n * Show save confirmation modal\n * Returns: true for analysis, false for direct save, null for cancel\n */\nfunction showSaveConfirmModal() {\n    return new Promise((resolve) => {\n        // Remove existing modal if any\n        const existingModal = document.querySelector('.jp-agent-save-confirm-modal');\n        if (existingModal) {\n            existingModal.remove();\n        }\n        // Create modal overlay\n        const modalOverlay = document.createElement('div');\n        modalOverlay.className = 'jp-agent-save-confirm-modal';\n        modalOverlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0, 0, 0, 0.3);\n      z-index: 10000;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    `;\n        // Create modal container\n        const modalContainer = document.createElement('div');\n        modalContainer.style.cssText = `\n      background: var(--jp-layout-color1);\n      border: 1px solid var(--jp-border-color1);\n      border-radius: 4px;\n      padding: 24px;\n      max-width: 400px;\n      width: 90%;\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n      font-family: var(--jp-ui-font-family);\n    `;\n        // Modal content\n        modalContainer.innerHTML = `\n      <div style=\"margin-bottom: 20px;\">\n        <h3 style=\"margin: 0 0 12px 0; color: var(--jp-ui-font-color1); font-size: 16px; font-weight: 500;\">\n          저장 전에 코드 검수를 하겠습니까?\n        </h3>\n        <p style=\"margin: 0; color: var(--jp-ui-font-color2); font-size: 14px; line-height: 1.5;\">\n          노트북을 저장하기 전에 모든 셀의 코드와 출력을 분석하여 최적화 제안을 받으시겠습니까?\n        </p>\n      </div>\n      <div style=\"display: flex; gap: 12px; justify-content: flex-end;\">\n        <button class=\"jp-agent-save-direct-btn\" style=\"\n          background: transparent;\n          color: var(--jp-ui-font-color2);\n          border: 1px solid var(--jp-border-color2);\n          border-radius: 3px;\n          padding: 8px 16px;\n          font-size: 13px;\n          font-weight: 500;\n          cursor: pointer;\n          transition: all 0.15s ease;\n        \">그냥 저장하기</button>\n        <button class=\"jp-agent-save-analysis-btn\" style=\"\n          background: var(--jp-brand-color1);\n          color: white;\n          border: 1px solid var(--jp-brand-color1);\n          border-radius: 3px;\n          padding: 8px 16px;\n          font-size: 13px;\n          font-weight: 500;\n          cursor: pointer;\n          transition: all 0.15s ease;\n        \">검수 후 저장하기</button>\n      </div>\n    `;\n        modalOverlay.appendChild(modalContainer);\n        document.body.appendChild(modalOverlay);\n        // Button event listeners\n        const directSaveBtn = modalContainer.querySelector('.jp-agent-save-direct-btn');\n        const analysisSaveBtn = modalContainer.querySelector('.jp-agent-save-analysis-btn');\n        // Direct save button\n        directSaveBtn.addEventListener('click', () => {\n            console.log('[SaveInterceptorPlugin] User chose direct save');\n            modalOverlay.remove();\n            resolve(false);\n        });\n        directSaveBtn.addEventListener('mouseenter', () => {\n            directSaveBtn.style.background = 'var(--jp-layout-color2)';\n        });\n        directSaveBtn.addEventListener('mouseleave', () => {\n            directSaveBtn.style.background = 'transparent';\n        });\n        // Analysis save button\n        analysisSaveBtn.addEventListener('click', () => {\n            console.log('[SaveInterceptorPlugin] User chose analysis save');\n            modalOverlay.remove();\n            resolve(true);\n        });\n        analysisSaveBtn.addEventListener('mouseenter', () => {\n            analysisSaveBtn.style.opacity = '0.9';\n        });\n        analysisSaveBtn.addEventListener('mouseleave', () => {\n            analysisSaveBtn.style.opacity = '1';\n        });\n        // Close on overlay click\n        modalOverlay.addEventListener('click', (e) => {\n            if (e.target === modalOverlay) {\n                console.log('[SaveInterceptorPlugin] User cancelled save');\n                modalOverlay.remove();\n                resolve(null);\n            }\n        });\n        // ESC key to close\n        const handleEscapeKey = (e) => {\n            if (e.key === 'Escape') {\n                console.log('[SaveInterceptorPlugin] User cancelled save with ESC');\n                modalOverlay.remove();\n                document.removeEventListener('keydown', handleEscapeKey);\n                resolve(null);\n            }\n        };\n        document.addEventListener('keydown', handleEscapeKey);\n    });\n}\n/**\n * Perform direct save without analysis\n */\nasync function performDirectSave(panel, app, originalSaveCommand, args, setSaving, clearSaving) {\n    console.log('[SaveInterceptorPlugin] Performing direct save');\n    setSaving();\n    try {\n        // Use the original save command\n        if (originalSaveCommand) {\n            await originalSaveCommand(args);\n            showNotification('저장이 완료되었습니다.', 'success');\n        }\n        else {\n            // Fallback: Use JupyterLab's document manager to save\n            const context = panel.context;\n            if (context) {\n                await context.save();\n                showNotification('저장이 완료되었습니다.', 'success');\n            }\n        }\n    }\n    catch (error) {\n        console.error('[SaveInterceptorPlugin] Save failed:', error);\n        showNotification('저장에 실패했습니다.', 'error');\n    }\n    finally {\n        clearSaving();\n    }\n}\n/**\n * Perform analysis save - collect cells and send to AgentPanel\n */\nasync function performAnalysisSave(panel, app, originalSaveCommand, args, setSaving, clearSaving) {\n    console.log('[SaveInterceptorPlugin] Performing analysis save');\n    try {\n        // Collect all code cells\n        const cells = await collectAllCodeCells(panel);\n        if (cells.length === 0) {\n            showNotification('분석할 코드 셀이 없습니다. 그냥 저장합니다.', 'warning');\n            await performDirectSave(panel, app, originalSaveCommand, args, setSaving, clearSaving);\n            return;\n        }\n        showNotification('코드 분석을 시작합니다...', 'info');\n        // Get AgentPanel instance\n        const agentPanel = window._hdspAgentPanel;\n        if (!agentPanel) {\n            console.error('[SaveInterceptorPlugin] Agent panel not found');\n            showNotification('Agent panel을 찾을 수 없습니다. 그냥 저장합니다.', 'warning');\n            await performDirectSave(panel, app, originalSaveCommand, args, setSaving, clearSaving);\n            return;\n        }\n        // Activate the sidebar panel\n        if (app) {\n            app.shell.activateById(agentPanel.id);\n        }\n        // Send cells to AgentPanel for analysis\n        if (agentPanel.analyzeNotebook) {\n            agentPanel.analyzeNotebook(cells, async () => {\n                // Callback after analysis complete - perform save\n                await performDirectSave(panel, app, originalSaveCommand, args, setSaving, clearSaving);\n            });\n        }\n        else {\n            console.error('[SaveInterceptorPlugin] analyzeNotebook method not found on AgentPanel');\n            showNotification('분석 기능을 사용할 수 없습니다. 그냥 저장합니다.', 'warning');\n            await performDirectSave(panel, app, originalSaveCommand, args, setSaving, clearSaving);\n        }\n    }\n    catch (error) {\n        console.error('[SaveInterceptorPlugin] Analysis save failed:', error);\n        showNotification('분석에 실패했습니다. 그냥 저장합니다.', 'warning');\n        await performDirectSave(panel, app, originalSaveCommand, args, setSaving, clearSaving);\n    }\n}\n/**\n * Collect all code cells with content, output, and imports\n * Based on chrome_agent's collectAllCodeCells implementation\n */\nasync function collectAllCodeCells(panel) {\n    const notebook = panel.content;\n    const cells = [];\n    for (let i = 0; i < notebook.widgets.length; i++) {\n        const cell = notebook.widgets[i];\n        // Only collect code cells - null safety 추가\n        if (!cell?.model || cell.model.type !== 'code') {\n            continue;\n        }\n        const content = cell.model.sharedModel?.getSource() || '';\n        if (!content.trim()) {\n            continue;\n        }\n        // Get or assign cell ID\n        const cellId = getOrAssignCellId(cell);\n        // Extract output\n        const output = getCellOutput(cell);\n        // Extract imports\n        const imports = extractImports(content);\n        // Get local module sources (simplified - would need kernel API access for full implementation)\n        const localImports = imports.filter(imp => imp.isLocal);\n        const localModuleSources = {};\n        // Note: Full module source extraction would require kernel websocket connection\n        // This is a simplified version for now\n        for (const imp of localImports) {\n            if (!imp.module.startsWith('.')) {\n                // Could implement kernel-based source extraction here\n                localModuleSources[imp.module] = `# Source for ${imp.module} would be fetched from kernel`;\n            }\n        }\n        cells.push({\n            index: i,\n            id: cellId,\n            content: content,\n            type: 'code',\n            output: output,\n            imports: imports,\n            localModuleSources: Object.keys(localModuleSources).length > 0 ? localModuleSources : undefined\n        });\n    }\n    console.log(`[SaveInterceptorPlugin] Collected ${cells.length} code cells`);\n    return cells;\n}\n/**\n * Get or assign cell ID to a cell\n */\nfunction getOrAssignCellId(cell) {\n    const cellModel = cell.model;\n    let cellId;\n    // Try to get cell ID from metadata\n    try {\n        if (cellModel.metadata && typeof cellModel.metadata.get === 'function') {\n            cellId = cellModel.metadata.get('jupyterAgentCellId');\n        }\n        else if (cellModel.metadata?.jupyterAgentCellId) {\n            cellId = cellModel.metadata.jupyterAgentCellId;\n        }\n    }\n    catch (e) {\n        // Ignore errors\n    }\n    if (!cellId) {\n        cellId = `cell-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n        // Try to set cell ID in metadata\n        try {\n            if (cellModel.metadata && typeof cellModel.metadata.set === 'function') {\n                cellModel.metadata.set('jupyterAgentCellId', cellId);\n            }\n            else if (cellModel.metadata) {\n                cellModel.metadata.jupyterAgentCellId = cellId;\n            }\n        }\n        catch (e) {\n            // Ignore errors\n        }\n    }\n    return cellId;\n}\n/**\n * Extract output from a code cell\n */\nfunction getCellOutput(cell) {\n    // cell.model이 null일 수 있으므로 안전하게 체크\n    if (!cell?.model || cell.model.type !== 'code') {\n        return '';\n    }\n    const codeCell = cell;\n    const outputs = codeCell.model?.outputs;\n    if (!outputs || outputs.length === 0) {\n        return '';\n    }\n    const outputTexts = [];\n    for (let i = 0; i < outputs.length; i++) {\n        const output = outputs.get(i);\n        const outputType = output.type;\n        if (outputType === 'stream') {\n            // stdout, stderr\n            const text = output.text;\n            if (Array.isArray(text)) {\n                outputTexts.push(text.join(''));\n            }\n            else {\n                outputTexts.push(text);\n            }\n        }\n        else if (outputType === 'execute_result' || outputType === 'display_data') {\n            // Execution results or display data\n            const data = output.data;\n            if (data['text/plain']) {\n                const text = data['text/plain'];\n                if (Array.isArray(text)) {\n                    outputTexts.push(text.join(''));\n                }\n                else {\n                    outputTexts.push(text);\n                }\n            }\n        }\n        else if (outputType === 'error') {\n            // Error output\n            const traceback = output.traceback;\n            if (Array.isArray(traceback)) {\n                outputTexts.push(traceback.join('\\n'));\n            }\n        }\n    }\n    return outputTexts.join('\\n');\n}\n/**\n * Extract imports from Python code\n * Based on chrome_agent's extractImports implementation\n */\nfunction extractImports(cellContent) {\n    const imports = [];\n    const lines = cellContent.split('\\n');\n    for (const line of lines) {\n        const trimmed = line.trim();\n        // Skip comments and empty lines\n        if (trimmed.startsWith('#') || trimmed === '')\n            continue;\n        // Relative import: from . import ... or from .. import ...\n        const relativeMatch = trimmed.match(/^from\\s+(\\.+[\\w.]*)\\s+import\\s+([\\w,\\s*]+)/);\n        if (relativeMatch) {\n            imports.push({\n                module: relativeMatch[1],\n                items: relativeMatch[2],\n                isLocal: true\n            });\n            continue;\n        }\n        // from X import Y form\n        const fromImportMatch = trimmed.match(/^from\\s+([\\w.]+)\\s+import\\s+([\\w,\\s*]+)/);\n        if (fromImportMatch) {\n            const moduleName = fromImportMatch[1];\n            imports.push({\n                module: moduleName,\n                items: fromImportMatch[2],\n                isLocal: isLocalImport(moduleName)\n            });\n            continue;\n        }\n        // import X, Y, Z form\n        const importMatch = trimmed.match(/^import\\s+([\\w,\\s.]+)/);\n        if (importMatch) {\n            const modules = importMatch[1].split(',').map(m => m.trim().split(' as ')[0]);\n            modules.forEach(moduleName => {\n                imports.push({\n                    module: moduleName,\n                    items: moduleName,\n                    isLocal: isLocalImport(moduleName)\n                });\n            });\n        }\n    }\n    return imports;\n}\n/**\n * Determine if a module import is local (not a standard library)\n */\nfunction isLocalImport(moduleName) {\n    // Relative paths are always local\n    if (moduleName.startsWith('.')) {\n        return true;\n    }\n    // Common Python libraries (not exhaustive)\n    const commonLibraries = [\n        'numpy', 'np', 'pandas', 'pd', 'matplotlib', 'sklearn', 'scipy',\n        'torch', 'tensorflow', 'tf', 'keras', 'PIL', 'cv2', 'requests',\n        'json', 'os', 'sys', 'datetime', 'time', 'math', 'random',\n        'collections', 'itertools', 'functools', 're', 'pathlib',\n        'typing', 'dataclasses', 'abc', 'argparse', 'logging',\n        'pickle', 'csv', 'sqlite3', 'http', 'urllib', 'email',\n        'plotly', 'seaborn', 'statsmodels', 'xgboost', 'lightgbm',\n        'transformers', 'datasets', 'accelerate', 'peft',\n        'openai', 'anthropic', 'langchain', 'llama_index'\n    ];\n    // Get top-level module name\n    const topLevelModule = moduleName.split('.')[0];\n    // If not in common libraries, consider it local\n    return !commonLibraries.includes(topLevelModule);\n}\n/**\n * Get notification background color based on type\n */\nfunction getNotificationColor(type) {\n    const colors = {\n        success: '#48bb78',\n        error: '#f56565',\n        warning: '#ed8936',\n        info: '#4299e1'\n    };\n    return colors[type] || colors.info;\n}\n/**\n * Create notification element with styles\n */\nfunction createNotificationElement(message, backgroundColor) {\n    const notification = document.createElement('div');\n    notification.style.cssText = `\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    padding: 12px 20px;\n    border-radius: 8px;\n    color: white;\n    font-size: 14px;\n    font-weight: 500;\n    z-index: 10001;\n    opacity: 0;\n    transition: opacity 0.3s ease;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n    max-width: 300px;\n    word-wrap: break-word;\n    background: ${backgroundColor};\n  `;\n    notification.textContent = message;\n    return notification;\n}\n/**\n * Animate notification appearance and removal\n */\nfunction animateNotification(notification) {\n    // Show animation\n    setTimeout(() => {\n        notification.style.opacity = '1';\n    }, 10);\n    // Remove after 3 seconds\n    setTimeout(() => {\n        notification.style.opacity = '0';\n        setTimeout(() => {\n            if (notification.parentNode) {\n                notification.parentNode.removeChild(notification);\n            }\n        }, 300);\n    }, 3000);\n}\n/**\n * Show notification\n */\nfunction showNotification(message, type = 'info') {\n    const notification = createNotificationElement(message, getNotificationColor(type));\n    document.body.appendChild(notification);\n    animateNotification(notification);\n}\n","/**\n * Sidebar Plugin\n * Adds Agent panel to JupyterLab sidebar\n */\nimport { ILayoutRestorer } from '@jupyterlab/application';\nimport { ICommandPalette, WidgetTracker } from '@jupyterlab/apputils';\nimport { INotebookTracker } from '@jupyterlab/notebook';\nimport { AgentPanelWidget } from '../components/AgentPanel';\nimport { ApiService } from '../services/ApiService';\n/**\n * Sidebar plugin namespace\n */\nconst PLUGIN_ID = '@hdsp-agent/sidebar';\nconst COMMAND_ID = 'hdsp-agent:toggle-sidebar';\n/**\n * Agent Sidebar Plugin\n */\nexport const sidebarPlugin = {\n    id: PLUGIN_ID,\n    autoStart: true,\n    requires: [],\n    optional: [ILayoutRestorer, ICommandPalette, INotebookTracker],\n    activate: (app, restorer, palette, notebookTracker) => {\n        console.log('[SidebarPlugin] Activating Jupyter Agent Sidebar');\n        try {\n            // Create API service\n            const apiService = new ApiService();\n            // Create agent panel widget with notebook tracker\n            const agentPanel = new AgentPanelWidget(apiService, notebookTracker);\n            // Create tracker for panel state restoration if restorer available\n            if (restorer) {\n                const tracker = new WidgetTracker({\n                    namespace: 'hdsp-agent'\n                });\n                // Add panel to tracker\n                tracker.add(agentPanel);\n                // Restore panel state\n                restorer.restore(tracker, {\n                    command: COMMAND_ID,\n                    name: () => 'hdsp-agent'\n                });\n            }\n            // Add panel to right sidebar\n            app.shell.add(agentPanel, 'right', { rank: 100 });\n            // Add command to toggle sidebar\n            app.commands.addCommand(COMMAND_ID, {\n                label: 'HDSP Agent 사이드바 토글',\n                caption: 'HDSP Agent 패널 표시/숨기기',\n                execute: () => {\n                    if (agentPanel.isVisible) {\n                        agentPanel.close();\n                    }\n                    else {\n                        app.shell.activateById(agentPanel.id);\n                    }\n                }\n            });\n            // Add command to palette\n            if (palette) {\n                palette.addItem({\n                    command: COMMAND_ID,\n                    category: 'HDSP Agent',\n                    args: {}\n                });\n            }\n            // Store reference globally for cell buttons to access\n            window._hdspAgentPanel = agentPanel;\n            console.log('[SidebarPlugin] HDSP Agent Sidebar activated successfully');\n        }\n        catch (error) {\n            console.error('[SidebarPlugin] Failed to activate:', error);\n        }\n    }\n};\n","/**\n * AgentOrchestrator - Plan-and-Execute 오케스트레이터\n *\n * HuggingFace Jupyter Agent 패턴 기반:\n * - 사용자 요청을 단계별 실행 계획으로 분해\n * - Tool Calling을 통한 순차 실행\n * - Self-Healing (에러 발생 시 자동 수정 및 재시도)\n */\nimport { ApiService } from './ApiService';\nimport { ToolExecutor } from './ToolExecutor';\nimport { SafetyChecker } from '../utils/SafetyChecker';\nimport { DEFAULT_AUTO_AGENT_CONFIG, EXECUTION_SPEED_DELAYS, } from '../types/auto-agent';\nexport class AgentOrchestrator {\n    constructor(notebook, sessionContext, apiService, config) {\n        this.abortController = null;\n        this.isRunning = false;\n        // Step-by-step 모드를 위한 상태\n        this.stepByStepResolver = null;\n        this.isPaused = false;\n        // Validation & Reflection 설정\n        this.enablePreValidation = true;\n        this.enableReflection = true;\n        this.notebook = notebook;\n        this.apiService = apiService || new ApiService();\n        this.toolExecutor = new ToolExecutor(notebook, sessionContext);\n        this.safetyChecker = new SafetyChecker({\n            enableSafetyCheck: config?.enableSafetyCheck ?? true,\n            maxExecutionTime: (config?.executionTimeout ?? 30000) / 1000,\n        });\n        this.config = { ...DEFAULT_AUTO_AGENT_CONFIG, ...config };\n        // ToolExecutor에 자동 스크롤 설정 연동\n        this.toolExecutor.setAutoScroll(this.config.autoScrollToCell);\n    }\n    /**\n     * 메인 실행 함수: 사용자 요청을 받아 자동 실행\n     */\n    async executeTask(userRequest, notebook, onProgress) {\n        if (this.isRunning) {\n            return {\n                success: false,\n                plan: null,\n                executedSteps: [],\n                createdCells: [],\n                modifiedCells: [],\n                error: 'Auto-Agent가 이미 실행 중입니다',\n                totalAttempts: 0,\n            };\n        }\n        this.isRunning = true;\n        this.abortController = new AbortController();\n        const createdCells = [];\n        const modifiedCells = [];\n        const executedSteps = [];\n        const startTime = Date.now();\n        try {\n            // ═══════════════════════════════════════════════════════════════════════\n            // PHASE 1: PLANNING - 작업 분해\n            // ═══════════════════════════════════════════════════════════════════════\n            onProgress({ phase: 'planning', message: '작업 계획 수립 중...' });\n            const notebookContext = this.extractNotebookContext(notebook);\n            const planResponse = await this.apiService.generateExecutionPlan({\n                request: userRequest,\n                notebookContext,\n                availableTools: ['jupyter_cell', 'markdown', 'final_answer'],\n            });\n            const plan = planResponse.plan;\n            onProgress({\n                phase: 'planned',\n                plan,\n                message: `${plan.totalSteps}단계 실행 계획 생성됨`,\n            });\n            // ═══════════════════════════════════════════════════════════════════════\n            // PHASE 2: EXECUTION - 단계별 실행 (Adaptive Replanning 포함)\n            // ═══════════════════════════════════════════════════════════════════════\n            console.log('[Orchestrator] Starting execution phase with', plan.steps.length, 'steps');\n            let currentPlan = plan;\n            let stepIndex = 0;\n            let replanAttempts = 0;\n            const MAX_REPLAN_ATTEMPTS = 3;\n            while (stepIndex < currentPlan.steps.length) {\n                const step = currentPlan.steps[stepIndex];\n                console.log('[Orchestrator] Executing step', step.stepNumber, ':', step.description);\n                // 중단 요청 확인\n                if (this.abortController.signal.aborted) {\n                    return {\n                        success: false,\n                        plan: currentPlan,\n                        executedSteps,\n                        createdCells,\n                        modifiedCells,\n                        error: '사용자에 의해 취소됨',\n                        totalAttempts: this.countTotalAttempts(executedSteps),\n                        executionTime: Date.now() - startTime,\n                    };\n                }\n                onProgress({\n                    phase: 'executing',\n                    currentStep: step.stepNumber,\n                    totalSteps: currentPlan.totalSteps,\n                    description: step.description,\n                });\n                const stepResult = await this.executeStepWithRetry(step, notebook, onProgress);\n                // 생성/수정된 셀 추적 및 하이라이트/스크롤\n                stepResult.toolResults.forEach((tr) => {\n                    if (tr.cellIndex !== undefined) {\n                        if (tr.wasModified) {\n                            modifiedCells.push(tr.cellIndex);\n                        }\n                        else {\n                            createdCells.push(tr.cellIndex);\n                        }\n                        // 셀 하이라이트 및 스크롤\n                        this.scrollToAndHighlightCell(tr.cellIndex);\n                    }\n                });\n                // 단계 실패 시 Adaptive Replanning 시도\n                if (!stepResult.success) {\n                    console.log('[Orchestrator] Step failed, attempting adaptive replanning');\n                    if (replanAttempts >= MAX_REPLAN_ATTEMPTS) {\n                        onProgress({\n                            phase: 'failed',\n                            message: `최대 재계획 시도 횟수(${MAX_REPLAN_ATTEMPTS})를 초과했습니다.`,\n                        });\n                        return {\n                            success: false,\n                            plan: currentPlan,\n                            executedSteps,\n                            createdCells,\n                            modifiedCells,\n                            error: `Step ${step.stepNumber} 실패: ${stepResult.error}`,\n                            totalAttempts: this.countTotalAttempts(executedSteps),\n                            executionTime: Date.now() - startTime,\n                        };\n                    }\n                    onProgress({\n                        phase: 'replanning',\n                        message: '계획 수정 중...',\n                        currentStep: step.stepNumber,\n                    });\n                    // 실패 정보 구성\n                    const executionError = {\n                        type: 'runtime',\n                        message: stepResult.error || '알 수 없는 오류',\n                        traceback: stepResult.toolResults.find(r => r.traceback)?.traceback || [],\n                        recoverable: true,\n                    };\n                    // 마지막 실행 출력\n                    const lastOutput = stepResult.toolResults\n                        .map(r => r.output)\n                        .filter(Boolean)\n                        .join('\\n');\n                    try {\n                        const replanResponse = await this.apiService.replanExecution({\n                            originalRequest: userRequest,\n                            executedSteps: executedSteps.map(s => currentPlan.steps.find(p => p.stepNumber === s.stepNumber)).filter(Boolean),\n                            failedStep: step,\n                            error: executionError,\n                            executionOutput: lastOutput,\n                        });\n                        console.log('[Orchestrator] Replan decision:', replanResponse.decision);\n                        console.log('[Orchestrator] Replan reasoning:', replanResponse.reasoning);\n                        // Replan 결과에 따른 계획 수정\n                        currentPlan = this.applyReplanChanges(currentPlan, stepIndex, replanResponse);\n                        // ★ 업데이트된 계획을 UI에 반영 (plan item list에 새 스텝 표시)\n                        onProgress({\n                            phase: 'planned',\n                            plan: currentPlan,\n                            message: `계획 수정됨 (${this.getReplanDecisionLabel(replanResponse.decision)})`,\n                            currentStep: step.stepNumber,\n                            totalSteps: currentPlan.totalSteps,\n                        });\n                        replanAttempts++;\n                        // stepIndex는 그대로 유지 (수정된 현재 단계를 다시 실행)\n                        continue;\n                    }\n                    catch (replanError) {\n                        console.error('[Orchestrator] Replan failed:', replanError);\n                        onProgress({\n                            phase: 'failed',\n                            message: `Step ${step.stepNumber} 실패 (재계획 실패): ${stepResult.error}`,\n                        });\n                        return {\n                            success: false,\n                            plan: currentPlan,\n                            executedSteps,\n                            createdCells,\n                            modifiedCells,\n                            error: `Step ${step.stepNumber} 실패: ${stepResult.error}`,\n                            totalAttempts: this.countTotalAttempts(executedSteps),\n                            executionTime: Date.now() - startTime,\n                        };\n                    }\n                }\n                // 성공한 단계 기록\n                executedSteps.push(stepResult);\n                replanAttempts = 0; // 성공 시 재계획 시도 횟수 리셋\n                // ═══════════════════════════════════════════════════════════════════════\n                // REFLECTION: 실행 결과 분석 및 적응적 조정\n                // ═══════════════════════════════════════════════════════════════════════\n                if (this.enableReflection && stepResult.toolResults.length > 0) {\n                    // Reflection 시작 알림\n                    onProgress({\n                        phase: 'reflecting',\n                        reflectionStatus: 'analyzing',\n                        currentStep: step.stepNumber,\n                        message: '실행 결과 분석 중...',\n                    });\n                    const remainingSteps = currentPlan.steps.slice(stepIndex + 1);\n                    const reflection = await this.performReflection(step, stepResult.toolResults, remainingSteps);\n                    if (reflection) {\n                        const { shouldContinue, action, reason } = this.shouldContinueAfterReflection(reflection);\n                        console.log('[Orchestrator] Reflection decision:', { shouldContinue, action, reason });\n                        // Reflection 결과 UI 업데이트\n                        const confidencePercent = Math.round(reflection.evaluation.confidence_score * 100);\n                        if (reflection.evaluation.checkpoint_passed) {\n                            onProgress({\n                                phase: 'reflecting',\n                                reflectionStatus: 'passed',\n                                currentStep: step.stepNumber,\n                                confidenceScore: confidencePercent,\n                                message: `검증 통과 (신뢰도: ${confidencePercent}%)`,\n                            });\n                        }\n                        else {\n                            onProgress({\n                                phase: 'reflecting',\n                                reflectionStatus: 'adjusting',\n                                currentStep: step.stepNumber,\n                                confidenceScore: confidencePercent,\n                                message: `조정 권고: ${reason}`,\n                            });\n                        }\n                        // Reflection 결과가 retry 또는 replan을 요구하면 해당 로직으로 이동\n                        if (!shouldContinue) {\n                            if (action === 'replan') {\n                                console.log('[Orchestrator] Reflection recommends replan, triggering adaptive replanning');\n                            }\n                            else if (action === 'retry') {\n                                console.log('[Orchestrator] Reflection recommends retry - but step succeeded, continuing');\n                            }\n                        }\n                    }\n                }\n                // 다음 스텝 전에 지연 적용 (사용자가 결과를 확인할 시간)\n                await this.applyStepDelay();\n                // final_answer 도구 호출 시 완료\n                if (stepResult.isFinalAnswer) {\n                    onProgress({\n                        phase: 'completed',\n                        message: stepResult.finalAnswer || '작업 완료',\n                    });\n                    return {\n                        success: true,\n                        plan: currentPlan,\n                        executedSteps,\n                        createdCells,\n                        modifiedCells,\n                        finalAnswer: stepResult.finalAnswer,\n                        totalAttempts: this.countTotalAttempts(executedSteps),\n                        executionTime: Date.now() - startTime,\n                    };\n                }\n                stepIndex++;\n            }\n            // 모든 단계 성공\n            onProgress({\n                phase: 'completed',\n                message: '모든 단계 성공적으로 완료',\n            });\n            return {\n                success: true,\n                plan,\n                executedSteps,\n                createdCells,\n                modifiedCells,\n                totalAttempts: this.countTotalAttempts(executedSteps),\n                executionTime: Date.now() - startTime,\n            };\n        }\n        catch (error) {\n            onProgress({\n                phase: 'failed',\n                message: error.message || '알 수 없는 오류 발생',\n            });\n            return {\n                success: false,\n                plan: null,\n                executedSteps,\n                createdCells,\n                modifiedCells,\n                error: error.message || '알 수 없는 오류 발생',\n                totalAttempts: this.countTotalAttempts(executedSteps),\n                executionTime: Date.now() - startTime,\n            };\n        }\n        finally {\n            this.isRunning = false;\n            this.abortController = null;\n        }\n    }\n    /**\n     * 출력 결과가 부정적인지 분석 (에러는 아니지만 실패 의미를 가진 출력)\n     * Fast Fail: 모든 에러 → Adaptive Replanning으로 처리\n     */\n    analyzeOutputForFailure(output) {\n        if (!output) {\n            return { isNegative: false };\n        }\n        const negativePatterns = [\n            // 환경/의존성 에러\n            { pattern: /ModuleNotFoundError/i, reason: '모듈을 찾을 수 없음 (패키지 설치 필요)' },\n            { pattern: /ImportError/i, reason: 'import 에러 (패키지 설치 필요)' },\n            { pattern: /No module named/i, reason: '모듈이 없음 (패키지 설치 필요)' },\n            { pattern: /cannot import name/i, reason: 'import 실패' },\n            // 파일/경로 관련 오류\n            { pattern: /FileNotFoundError|No such file or directory|파일을 찾을 수 없습니다/i, reason: '파일을 찾을 수 없음' },\n            // 런타임 에러\n            { pattern: /NameError:\\s*name\\s*'([^']+)'\\s*is not defined/i, reason: '변수가 정의되지 않음' },\n            { pattern: /KeyError/i, reason: '키를 찾을 수 없음' },\n            { pattern: /IndexError/i, reason: '인덱스 범위 초과' },\n            { pattern: /TypeError/i, reason: '타입 오류' },\n            { pattern: /ValueError/i, reason: '값 오류' },\n            { pattern: /AttributeError/i, reason: '속성 오류' },\n            // 명시적 실패 메시지\n            { pattern: /실패|failed|Fail/i, reason: '명시적 오류 메시지 감지' },\n            { pattern: /not found|cannot find|없습니다|찾을 수 없/i, reason: '리소스를 찾을 수 없음' },\n            // 빈 결과\n            { pattern: /empty|Empty DataFrame|0\\s+rows/i, reason: '결과가 비어있음' },\n        ];\n        for (const { pattern, reason } of negativePatterns) {\n            if (pattern.test(output)) {\n                console.log('[Orchestrator] Negative output detected:', reason);\n                return { isNegative: true, reason };\n            }\n        }\n        return { isNegative: false };\n    }\n    /**\n     * 단계 실행 (Fast Fail 방식)\n     * 에러 발생 시 재시도 없이 바로 실패 반환 → Adaptive Replanning으로 처리\n     * + Pre-Validation: 실행 전 Pyflakes/AST 검증\n     */\n    async executeStepWithRetry(step, notebook, onProgress) {\n        console.log('[Orchestrator] executeStep called for step:', step.stepNumber);\n        console.log('[Orchestrator] Step toolCalls:', JSON.stringify(step.toolCalls, null, 2));\n        const toolResults = [];\n        try {\n            // Tool Calling 실행\n            console.log('[Orchestrator] Processing', step.toolCalls.length, 'tool calls');\n            for (const toolCall of step.toolCalls) {\n                console.log('[Orchestrator] Processing toolCall:', toolCall.tool);\n                // 중단 요청 확인\n                if (this.abortController?.signal.aborted) {\n                    return {\n                        success: false,\n                        stepNumber: step.stepNumber,\n                        toolResults,\n                        attempts: 1,\n                        error: '사용자에 의해 취소됨',\n                    };\n                }\n                onProgress({\n                    phase: 'tool_calling',\n                    tool: toolCall.tool,\n                    attempt: 1,\n                    currentStep: step.stepNumber,\n                });\n                // jupyter_cell인 경우: 안전성 검사 + Pre-Validation\n                if (toolCall.tool === 'jupyter_cell') {\n                    const params = toolCall.parameters;\n                    // 1. 안전성 검사\n                    const safetyResult = this.safetyChecker.checkCodeSafety(params.code);\n                    if (!safetyResult.safe) {\n                        return {\n                            success: false,\n                            stepNumber: step.stepNumber,\n                            toolResults,\n                            attempts: 1,\n                            error: `안전성 검사 실패: ${safetyResult.blockedPatterns?.join(', ')}`,\n                        };\n                    }\n                    // 2. Pre-Validation (Pyflakes/AST 기반)\n                    onProgress({\n                        phase: 'validating',\n                        validationStatus: 'checking',\n                        currentStep: step.stepNumber,\n                        message: '코드 품질 검증 중...',\n                    });\n                    const validation = await this.validateCodeBeforeExecution(params.code);\n                    if (validation) {\n                        if (validation.hasErrors) {\n                            console.log('[Orchestrator] Pre-validation detected errors:', validation.summary);\n                            onProgress({\n                                phase: 'validating',\n                                validationStatus: 'failed',\n                                currentStep: step.stepNumber,\n                                message: `검증 실패: ${validation.summary}`,\n                            });\n                            // Fast Fail: 검증 오류 → 바로 Adaptive Replanning\n                            return {\n                                success: false,\n                                stepNumber: step.stepNumber,\n                                toolResults,\n                                attempts: 1,\n                                error: `사전 검증 오류: ${validation.summary}`,\n                            };\n                        }\n                        else if (validation.hasWarnings) {\n                            onProgress({\n                                phase: 'validating',\n                                validationStatus: 'warning',\n                                currentStep: step.stepNumber,\n                                message: `경고 감지: ${validation.issues.length}건 (실행 계속)`,\n                            });\n                        }\n                        else {\n                            onProgress({\n                                phase: 'validating',\n                                validationStatus: 'passed',\n                                currentStep: step.stepNumber,\n                                message: '코드 검증 통과',\n                            });\n                        }\n                    }\n                }\n                // 타임아웃과 함께 실행\n                console.log('[Orchestrator] Calling toolExecutor.executeTool for:', toolCall.tool);\n                const result = await this.executeWithTimeout(() => this.toolExecutor.executeTool(toolCall), this.config.executionTimeout);\n                console.log('[Orchestrator] Tool execution result:', JSON.stringify(result));\n                toolResults.push(result);\n                // jupyter_cell 실행 실패 시 → Fast Fail\n                if (!result.success && toolCall.tool === 'jupyter_cell') {\n                    const errorMsg = result.error || '알 수 없는 오류';\n                    console.log('[Orchestrator] jupyter_cell execution failed:', errorMsg.substring(0, 100));\n                    return {\n                        success: false,\n                        stepNumber: step.stepNumber,\n                        toolResults,\n                        attempts: 1,\n                        error: errorMsg,\n                    };\n                }\n                // final_answer 도구 감지\n                if (toolCall.tool === 'final_answer') {\n                    return {\n                        success: true,\n                        stepNumber: step.stepNumber,\n                        toolResults,\n                        attempts: 1,\n                        isFinalAnswer: true,\n                        finalAnswer: result.output,\n                    };\n                }\n            }\n            // 모든 도구 실행 성공\n            if (toolResults.length > 0 && toolResults.every((r) => r.success)) {\n                // 출력 결과 분석: 실행은 성공했지만 출력이 부정적인 경우\n                const allOutputs = toolResults\n                    .map((r) => {\n                    const output = r.output;\n                    if (!output)\n                        return '';\n                    if (typeof output === 'string')\n                        return output;\n                    if (typeof output === 'object') {\n                        // Jupyter output format: {text/plain: ..., text/html: ...}\n                        if ('text/plain' in output)\n                            return output['text/plain'];\n                        try {\n                            return JSON.stringify(output);\n                        }\n                        catch {\n                            return '[object]';\n                        }\n                    }\n                    return String(output);\n                })\n                    .join('\\n');\n                const outputAnalysis = this.analyzeOutputForFailure(allOutputs);\n                if (outputAnalysis.isNegative) {\n                    console.log('[Orchestrator] Negative output detected:', outputAnalysis.reason);\n                    // Fast Fail: 부정적 출력 → 바로 Adaptive Replanning\n                    return {\n                        success: false,\n                        stepNumber: step.stepNumber,\n                        toolResults,\n                        attempts: 1,\n                        error: outputAnalysis.reason || '출력 결과에서 문제 감지',\n                    };\n                }\n                return {\n                    success: true,\n                    stepNumber: step.stepNumber,\n                    toolResults,\n                    attempts: 1,\n                };\n            }\n            // 도구 실행 결과가 없는 경우\n            return {\n                success: false,\n                stepNumber: step.stepNumber,\n                toolResults,\n                attempts: 1,\n                error: '도구 실행 결과 없음',\n            };\n        }\n        catch (error) {\n            const isTimeout = error.message?.includes('timeout');\n            if (isTimeout) {\n                // 타임아웃 시 커널 인터럽트\n                await this.toolExecutor.interruptKernel();\n            }\n            return {\n                success: false,\n                stepNumber: step.stepNumber,\n                toolResults,\n                attempts: 1,\n                error: error.message || '알 수 없는 오류',\n            };\n        }\n    }\n    /**\n     * 노트북 컨텍스트 추출\n     */\n    extractNotebookContext(notebook) {\n        const cells = notebook.content.model?.cells;\n        const cellCount = cells?.length || 0;\n        // 최근 3개 셀 정보 추출\n        const recentCells = [];\n        if (cells) {\n            const startIndex = Math.max(0, cellCount - 3);\n            for (let i = startIndex; i < cellCount; i++) {\n                const cell = cells.get(i);\n                recentCells.push({\n                    index: i,\n                    type: cell.type,\n                    source: cell.sharedModel.getSource().slice(0, 500),\n                    output: this.toolExecutor.getCellOutput(i).slice(0, 300), // 처음 300자만\n                });\n            }\n        }\n        return {\n            cellCount,\n            recentCells,\n            importedLibraries: this.detectImportedLibraries(notebook),\n            definedVariables: this.detectDefinedVariables(notebook),\n            notebookPath: notebook.context?.path,\n        };\n    }\n    /**\n     * import된 라이브러리 감지\n     */\n    detectImportedLibraries(notebook) {\n        const libraries = new Set();\n        const cells = notebook.content.model?.cells;\n        if (!cells)\n            return [];\n        for (let i = 0; i < cells.length; i++) {\n            const cell = cells.get(i);\n            if (cell.type === 'code') {\n                const source = cell.sharedModel.getSource();\n                // import xxx 패턴\n                const importMatches = source.matchAll(/^import\\s+(\\w+)/gm);\n                for (const match of importMatches) {\n                    libraries.add(match[1]);\n                }\n                // from xxx import 패턴\n                const fromMatches = source.matchAll(/^from\\s+(\\w+)/gm);\n                for (const match of fromMatches) {\n                    libraries.add(match[1]);\n                }\n            }\n        }\n        return Array.from(libraries);\n    }\n    /**\n     * 정의된 변수 감지\n     */\n    detectDefinedVariables(notebook) {\n        const variables = new Set();\n        const cells = notebook.content.model?.cells;\n        if (!cells)\n            return [];\n        for (let i = 0; i < cells.length; i++) {\n            const cell = cells.get(i);\n            if (cell.type === 'code') {\n                const source = cell.sharedModel.getSource();\n                // 간단한 할당 패턴: variable = ...\n                const assignMatches = source.matchAll(/^(\\w+)\\s*=/gm);\n                for (const match of assignMatches) {\n                    // 예약어 제외\n                    if (!['if', 'for', 'while', 'def', 'class', 'import', 'from'].includes(match[1])) {\n                        variables.add(match[1]);\n                    }\n                }\n            }\n        }\n        return Array.from(variables);\n    }\n    /**\n     * Adaptive Replanning 결과 적용\n     */\n    applyReplanChanges(plan, currentStepIndex, replanResponse) {\n        const { decision, changes } = replanResponse;\n        const steps = [...plan.steps];\n        const currentStep = steps[currentStepIndex];\n        console.log('[Orchestrator] Applying replan changes:', decision);\n        switch (decision) {\n            case 'refine':\n                // 현재 단계의 코드만 수정\n                if (changes.refined_code) {\n                    const newToolCalls = currentStep.toolCalls.map(tc => {\n                        if (tc.tool === 'jupyter_cell') {\n                            return {\n                                ...tc,\n                                parameters: {\n                                    ...tc.parameters,\n                                    code: changes.refined_code,\n                                },\n                            };\n                        }\n                        return tc;\n                    });\n                    steps[currentStepIndex] = {\n                        ...currentStep,\n                        toolCalls: newToolCalls,\n                    };\n                }\n                break;\n            case 'insert_steps':\n                // 현재 단계 전에 새로운 단계들 삽입\n                if (changes.new_steps && changes.new_steps.length > 0) {\n                    const newSteps = changes.new_steps.map((newStep, idx) => ({\n                        ...newStep,\n                        stepNumber: currentStep.stepNumber + idx * 0.1, // 임시 번호\n                    }));\n                    steps.splice(currentStepIndex, 0, ...newSteps);\n                    // 단계 번호 재정렬\n                    steps.forEach((step, idx) => {\n                        step.stepNumber = idx + 1;\n                    });\n                }\n                break;\n            case 'replace_step':\n                // 현재 단계를 완전히 교체\n                if (changes.replacement) {\n                    steps[currentStepIndex] = {\n                        ...changes.replacement,\n                        stepNumber: currentStep.stepNumber,\n                    };\n                }\n                break;\n            case 'replan_remaining':\n                // 현재 단계부터 끝까지 새로운 계획으로 교체\n                if (changes.new_plan && changes.new_plan.length > 0) {\n                    const existingSteps = steps.slice(0, currentStepIndex);\n                    const newPlanSteps = changes.new_plan.map((newStep, idx) => ({\n                        ...newStep,\n                        stepNumber: currentStepIndex + idx + 1,\n                    }));\n                    // 새 계획에 final_answer가 없으면 경고 로그\n                    const hasFinalAnswer = newPlanSteps.some(step => step.toolCalls?.some((tc) => tc.tool === 'final_answer'));\n                    if (!hasFinalAnswer) {\n                        console.warn('[Orchestrator] replan_remaining: new_plan does not include final_answer');\n                    }\n                    steps.length = 0;\n                    steps.push(...existingSteps, ...newPlanSteps);\n                }\n                break;\n        }\n        return {\n            ...plan,\n            steps,\n            totalSteps: steps.length,\n        };\n    }\n    /**\n     * 총 시도 횟수 계산\n     */\n    countTotalAttempts(steps) {\n        return steps.reduce((sum, step) => sum + step.attempts, 0);\n    }\n    /**\n     * 타임아웃 래퍼\n     */\n    async executeWithTimeout(fn, timeoutMs) {\n        return new Promise((resolve, reject) => {\n            const timeoutId = setTimeout(() => {\n                reject(new Error(`실행 타임아웃 (${timeoutMs}ms)`));\n            }, timeoutMs);\n            fn()\n                .then((result) => {\n                clearTimeout(timeoutId);\n                resolve(result);\n            })\n                .catch((error) => {\n                clearTimeout(timeoutId);\n                reject(error);\n            });\n        });\n    }\n    /**\n     * 지연 유틸리티\n     */\n    delay(ms) {\n        return new Promise((resolve) => setTimeout(resolve, ms));\n    }\n    /**\n     * 실행 취소\n     */\n    cancel() {\n        if (this.abortController) {\n            this.abortController.abort();\n        }\n    }\n    /**\n     * 실행 상태 확인\n     */\n    getIsRunning() {\n        return this.isRunning;\n    }\n    /**\n     * 설정 업데이트\n     */\n    updateConfig(config) {\n        this.config = { ...this.config, ...config };\n        this.safetyChecker.updateConfig({\n            enableSafetyCheck: this.config.enableSafetyCheck,\n            maxExecutionTime: this.config.executionTimeout / 1000,\n        });\n        // ToolExecutor 자동 스크롤 설정 동기화\n        if (config.autoScrollToCell !== undefined) {\n            this.toolExecutor.setAutoScroll(this.config.autoScrollToCell);\n        }\n    }\n    /**\n     * 현재 실행 중인 셀로 스크롤 및 하이라이트\n     */\n    scrollToAndHighlightCell(cellIndex) {\n        if (!this.config.autoScrollToCell && !this.config.highlightCurrentCell) {\n            return;\n        }\n        const notebookContent = this.notebook.content;\n        const cell = notebookContent.widgets[cellIndex];\n        if (!cell)\n            return;\n        // 셀로 스크롤\n        if (this.config.autoScrollToCell) {\n            cell.node.scrollIntoView({\n                behavior: 'smooth',\n                block: 'center',\n            });\n        }\n        // 셀 하이라이트 (CSS 클래스 추가)\n        if (this.config.highlightCurrentCell) {\n            // 기존 하이라이트 제거\n            notebookContent.widgets.forEach((w) => {\n                w.node.classList.remove('aa-cell-executing');\n            });\n            // 새 하이라이트 추가\n            cell.node.classList.add('aa-cell-executing');\n            // 실행 완료 후 하이라이트 제거 (지연 후)\n            setTimeout(() => {\n                cell.node.classList.remove('aa-cell-executing');\n            }, this.getEffectiveDelay() + 500);\n        }\n    }\n    /**\n     * 현재 설정에 맞는 지연 시간 반환\n     */\n    getEffectiveDelay() {\n        // executionSpeed 프리셋 사용 (stepDelay는 무시하고 프리셋 값을 우선)\n        const presetDelay = EXECUTION_SPEED_DELAYS[this.config.executionSpeed];\n        if (presetDelay !== undefined) {\n            return presetDelay;\n        }\n        // 프리셋이 없으면 stepDelay 사용\n        return this.config.stepDelay || 0;\n    }\n    /**\n     * 스텝 사이 지연 적용 (step-by-step 모드 포함)\n     */\n    async applyStepDelay() {\n        const delay = this.getEffectiveDelay();\n        // step-by-step 모드: 사용자가 다음 버튼을 누를 때까지 대기\n        if (this.config.executionSpeed === 'step-by-step' || delay < 0) {\n            this.isPaused = true;\n            await new Promise((resolve) => {\n                this.stepByStepResolver = resolve;\n            });\n            this.isPaused = false;\n            this.stepByStepResolver = null;\n            return;\n        }\n        // 일반 지연\n        if (delay > 0) {\n            await this.delay(delay);\n        }\n    }\n    /**\n     * Step-by-step 모드에서 다음 스텝 진행\n     */\n    proceedToNextStep() {\n        if (this.stepByStepResolver) {\n            this.stepByStepResolver();\n        }\n    }\n    /**\n     * 일시 정지 상태 확인\n     */\n    getIsPaused() {\n        return this.isPaused;\n    }\n    /**\n     * 현재 실행 속도 설정 반환\n     */\n    getExecutionSpeed() {\n        return this.config.executionSpeed;\n    }\n    // ═══════════════════════════════════════════════════════════════════════════\n    // Code Validation & Reflection Methods\n    // ═══════════════════════════════════════════════════════════════════════════\n    /**\n     * 실행 전 코드 검증 (Pyflakes/AST 기반)\n     *\n     * @param code 검증할 코드\n     * @returns 검증 결과\n     */\n    async validateCodeBeforeExecution(code) {\n        if (!this.enablePreValidation) {\n            return null;\n        }\n        try {\n            console.log('[Orchestrator] Pre-validation: Checking code quality');\n            const notebookContext = this.extractNotebookContext(this.notebook);\n            const validationResult = await this.apiService.validateCode({\n                code,\n                notebookContext,\n            });\n            console.log('[Orchestrator] Validation result:', {\n                valid: validationResult.valid,\n                hasErrors: validationResult.hasErrors,\n                issueCount: validationResult.issues.length,\n            });\n            return validationResult;\n        }\n        catch (error) {\n            console.warn('[Orchestrator] Pre-validation failed:', error.message);\n            // 검증 실패 시에도 실행은 계속 진행 (graceful degradation)\n            return null;\n        }\n    }\n    /**\n     * 실행 후 Reflection 수행\n     *\n     * @param step 실행된 단계\n     * @param toolResults 도구 실행 결과\n     * @param remainingSteps 남은 단계들\n     * @returns Reflection 결과\n     */\n    async performReflection(step, toolResults, remainingSteps) {\n        if (!this.enableReflection) {\n            return null;\n        }\n        try {\n            // jupyter_cell 실행 결과 추출\n            const jupyterResult = toolResults.find(r => r.cellIndex !== undefined);\n            if (!jupyterResult) {\n                return null;\n            }\n            // 실행된 코드 추출\n            const jupyterToolCall = step.toolCalls.find(tc => tc.tool === 'jupyter_cell');\n            const executedCode = jupyterToolCall\n                ? jupyterToolCall.parameters.code\n                : '';\n            // Checkpoint 정보 추출 (EnhancedPlanStep인 경우)\n            const enhancedStep = step;\n            const checkpoint = enhancedStep.checkpoint;\n            // ★ 프론트엔드에서 먼저 출력 분석 수행\n            const outputString = (() => {\n                const output = jupyterResult.output;\n                if (!output)\n                    return '';\n                if (typeof output === 'string')\n                    return output;\n                if (typeof output === 'object') {\n                    if ('text/plain' in output)\n                        return output['text/plain'];\n                    try {\n                        return JSON.stringify(output);\n                    }\n                    catch {\n                        return '[object]';\n                    }\n                }\n                return String(output);\n            })();\n            const localOutputAnalysis = this.analyzeOutputForFailure(outputString);\n            // 부정적 출력이 감지되면 에러 메시지에 추가\n            let effectiveErrorMessage = jupyterResult.error;\n            let effectiveStatus = jupyterResult.success ? 'ok' : 'error';\n            if (localOutputAnalysis.isNegative) {\n                console.log('[Orchestrator] Reflection: Local output analysis detected issue:', localOutputAnalysis.reason);\n                effectiveErrorMessage = effectiveErrorMessage\n                    ? `${effectiveErrorMessage}; 출력 분석: ${localOutputAnalysis.reason}`\n                    : `출력 분석: ${localOutputAnalysis.reason}`;\n                // 실행은 성공했지만 출력이 부정적인 경우도 'error'로 표시\n                if (jupyterResult.success && localOutputAnalysis.isNegative) {\n                    effectiveStatus = 'warning'; // 백엔드에 경고 상태 전달\n                }\n            }\n            console.log('[Orchestrator] Performing reflection for step', step.stepNumber);\n            const reflectResponse = await this.apiService.reflectOnExecution({\n                stepNumber: step.stepNumber,\n                stepDescription: step.description,\n                executedCode,\n                executionStatus: effectiveStatus,\n                executionOutput: outputString,\n                errorMessage: effectiveErrorMessage,\n                expectedOutcome: checkpoint?.expectedOutcome,\n                validationCriteria: checkpoint?.validationCriteria,\n                remainingSteps,\n            });\n            console.log('[Orchestrator] Reflection result:', {\n                checkpointPassed: reflectResponse.reflection.evaluation.checkpoint_passed,\n                confidenceScore: reflectResponse.reflection.evaluation.confidence_score,\n                action: reflectResponse.reflection.recommendations.action,\n            });\n            return reflectResponse.reflection;\n        }\n        catch (error) {\n            console.warn('[Orchestrator] Reflection failed:', error.message);\n            // Reflection 실패 시에도 실행은 계속 진행\n            return null;\n        }\n    }\n    /**\n     * Reflection 결과에 따른 액션 결정\n     *\n     * @param reflection Reflection 결과\n     * @returns true면 계속 진행, false면 재시도/재계획 필요\n     */\n    shouldContinueAfterReflection(reflection) {\n        if (!reflection) {\n            return { shouldContinue: true, action: 'continue', reason: 'No reflection data' };\n        }\n        const { evaluation, recommendations } = reflection;\n        // Checkpoint 통과 및 신뢰도 70% 이상이면 계속 진행\n        if (evaluation.checkpoint_passed && evaluation.confidence_score >= 0.7) {\n            return {\n                shouldContinue: true,\n                action: 'continue',\n                reason: 'Checkpoint passed with high confidence'\n            };\n        }\n        // Recommendation에 따른 결정\n        switch (recommendations.action) {\n            case 'continue':\n                return {\n                    shouldContinue: true,\n                    action: 'continue',\n                    reason: recommendations.reasoning\n                };\n            case 'adjust':\n                // 경미한 조정은 계속 진행 (다음 단계에서 보정)\n                return {\n                    shouldContinue: true,\n                    action: 'adjust',\n                    reason: recommendations.reasoning\n                };\n            case 'retry':\n                return {\n                    shouldContinue: false,\n                    action: 'retry',\n                    reason: recommendations.reasoning\n                };\n            case 'replan':\n                return {\n                    shouldContinue: false,\n                    action: 'replan',\n                    reason: recommendations.reasoning\n                };\n            default:\n                return { shouldContinue: true, action: 'continue', reason: 'Default continue' };\n        }\n    }\n    /**\n     * 검증 결과에 따른 코드 자동 수정 시도\n     *\n     * @param code 원본 코드\n     * @param validation 검증 결과\n     * @returns 수정된 코드 (수정 불가 시 null)\n     */\n    async attemptAutoFix(code, validation) {\n        // 자동 수정 가능한 경우만 처리\n        const autoFixableIssues = validation.issues.filter(issue => issue.category === 'unused_import' || issue.category === 'unused_variable');\n        // 심각한 오류가 있으면 자동 수정 불가\n        if (validation.hasErrors) {\n            return null;\n        }\n        // 경고만 있는 경우 코드 그대로 반환 (실행 가능)\n        if (!validation.hasErrors && autoFixableIssues.length > 0) {\n            console.log('[Orchestrator] Code has warnings but is executable');\n            return code;\n        }\n        return null;\n    }\n    /**\n     * Validation & Reflection 설정 업데이트\n     */\n    setValidationEnabled(enabled) {\n        this.enablePreValidation = enabled;\n        console.log('[Orchestrator] Pre-validation:', enabled ? 'enabled' : 'disabled');\n    }\n    setReflectionEnabled(enabled) {\n        this.enableReflection = enabled;\n        console.log('[Orchestrator] Reflection:', enabled ? 'enabled' : 'disabled');\n    }\n    /**\n     * 현재 설정 확인\n     */\n    getValidationEnabled() {\n        return this.enablePreValidation;\n    }\n    getReflectionEnabled() {\n        return this.enableReflection;\n    }\n    /**\n     * Replan decision 레이블 반환\n     */\n    getReplanDecisionLabel(decision) {\n        switch (decision) {\n            case 'refine':\n                return '코드 수정';\n            case 'insert_steps':\n                return '단계 추가';\n            case 'replace_step':\n                return '단계 교체';\n            case 'replan_remaining':\n                return '남은 계획 재수립';\n            default:\n                return decision;\n        }\n    }\n}\nexport default AgentOrchestrator;\n","/**\n * API Service Layer for REST communication with backend\n */\n// ✅ 핵심 변경 1: ServerConnection 대신 PageConfig 임포트\nimport { URLExt, PageConfig } from '@jupyterlab/coreutils';\nexport class ApiService {\n    // 생성자에서 baseUrl을 선택적으로 받도록 하되, 없으면 자동으로 계산\n    constructor(baseUrl) {\n        if (baseUrl) {\n            this.baseUrl = baseUrl;\n        }\n        else {\n            // ✅ 핵심 변경 2: ServerConnection 대신 PageConfig로 URL 가져오기\n            // PageConfig.getBaseUrl()은 '/user/아이디/프로젝트/' 형태의 주소를 정확히 가져옵니다.\n            const serverRoot = PageConfig.getBaseUrl();\n            // 3. 경로 합치기\n            // 결과: /user/453467/pl2wadmprj/hdsp-agent\n            this.baseUrl = URLExt.join(serverRoot, 'hdsp-agent');\n        }\n        console.log('[ApiService] Base URL initialized:', this.baseUrl); // 디버깅용 로그\n    }\n    /**\n     * Get cookie value by name\n     */\n    getCookie(name) {\n        const value = `; ${document.cookie}`;\n        const parts = value.split(`; ${name}=`);\n        if (parts.length === 2) {\n            return parts.pop()?.split(';').shift() || '';\n        }\n        return '';\n    }\n    /**\n     * Get CSRF token from cookie\n     */\n    getCsrfToken() {\n        return this.getCookie('_xsrf');\n    }\n    /**\n     * Get headers with CSRF token for POST requests\n     */\n    getHeaders() {\n        return {\n            'Content-Type': 'application/json',\n            'X-XSRFToken': this.getCsrfToken()\n        };\n    }\n    /**\n     * Execute cell action (explain, fix, custom)\n     */\n    async cellAction(request) {\n        const response = await fetch(`${this.baseUrl}/cell/action`, {\n            method: 'POST',\n            headers: this.getHeaders(),\n            credentials: 'include',\n            body: JSON.stringify(request)\n        });\n        if (!response.ok) {\n            const error = await response.json().catch(() => ({ message: 'API request failed' }));\n            throw new Error(error.message || 'API request failed');\n        }\n        return response.json();\n    }\n    /**\n     * Send chat message\n     */\n    async sendMessage(request) {\n        const response = await fetch(`${this.baseUrl}/chat/message`, {\n            method: 'POST',\n            headers: this.getHeaders(),\n            credentials: 'include',\n            body: JSON.stringify(request)\n        });\n        if (!response.ok) {\n            const error = await response.json().catch(() => ({\n                message: `Failed to send message (${response.status})`,\n                error: `HTTP ${response.status}: ${response.statusText}`\n            }));\n            console.error('Chat API error:', error);\n            console.error('Response status:', response.status);\n            console.error('Request:', request);\n            throw new Error(error.message || error.error || `Failed to send message (${response.status})`);\n        }\n        return response.json();\n    }\n    /**\n     * Send chat message with streaming response\n     */\n    async sendMessageStream(request, onChunk, onMetadata) {\n        const response = await fetch(`${this.baseUrl}/chat/stream`, {\n            method: 'POST',\n            headers: this.getHeaders(),\n            credentials: 'include',\n            body: JSON.stringify(request)\n        });\n        if (!response.ok) {\n            const error = await response.text();\n            throw new Error(`Failed to send message: ${error}`);\n        }\n        const reader = response.body?.getReader();\n        if (!reader) {\n            throw new Error('Response body is not readable');\n        }\n        const decoder = new TextDecoder();\n        let buffer = '';\n        try {\n            while (true) {\n                const { done, value } = await reader.read();\n                if (done)\n                    break;\n                buffer += decoder.decode(value, { stream: true });\n                // Process complete SSE messages\n                const lines = buffer.split('\\n');\n                buffer = lines.pop() || ''; // Keep incomplete line in buffer\n                for (const line of lines) {\n                    if (line.startsWith('data: ')) {\n                        try {\n                            const data = JSON.parse(line.slice(6));\n                            // Handle errors\n                            if (data.error) {\n                                throw new Error(data.error);\n                            }\n                            // Handle metadata (conversationId, messageId, etc.)\n                            if (data.conversationId && onMetadata) {\n                                onMetadata({\n                                    conversationId: data.conversationId,\n                                    messageId: data.messageId,\n                                    provider: data.metadata?.provider,\n                                    model: data.metadata?.model\n                                });\n                            }\n                            // Handle content chunks\n                            if (data.content) {\n                                onChunk(data.content);\n                            }\n                            // Final metadata update\n                            if (data.done && data.metadata && onMetadata) {\n                                onMetadata({\n                                    provider: data.metadata.provider,\n                                    model: data.metadata.model\n                                });\n                            }\n                        }\n                        catch (e) {\n                            if (e instanceof SyntaxError) {\n                                console.warn('Failed to parse SSE data:', line);\n                            }\n                            else {\n                                throw e;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        finally {\n            reader.releaseLock();\n        }\n    }\n    /**\n     * Save configuration\n     */\n    async saveConfig(config) {\n        const response = await fetch(`${this.baseUrl}/config`, {\n            method: 'POST',\n            headers: this.getHeaders(),\n            credentials: 'include',\n            body: JSON.stringify(config)\n        });\n        if (!response.ok) {\n            const error = await response.json().catch(() => ({ message: 'Failed to save configuration' }));\n            throw new Error(error.message || 'Failed to save configuration');\n        }\n    }\n    /**\n     * Get current configuration\n     */\n    async getConfig() {\n        const response = await fetch(`${this.baseUrl}/config`);\n        if (!response.ok) {\n            throw new Error('Failed to load configuration');\n        }\n        return response.json();\n    }\n    /**\n     * Get health status\n     */\n    async getStatus() {\n        const response = await fetch(`${this.baseUrl}/status`);\n        if (!response.ok) {\n            throw new Error('Failed to get status');\n        }\n        return response.json();\n    }\n    /**\n     * Get available models\n     */\n    async getModels() {\n        const response = await fetch(`${this.baseUrl}/models`);\n        if (!response.ok) {\n            throw new Error('Failed to load models');\n        }\n        return response.json();\n    }\n    // ═══════════════════════════════════════════════════════════════════════════\n    // Auto-Agent API Methods\n    // ═══════════════════════════════════════════════════════════════════════════\n    /**\n     * Generate execution plan for auto-agent task\n     */\n    async generateExecutionPlan(request) {\n        console.log('[ApiService] generateExecutionPlan request:', request);\n        const response = await fetch(`${this.baseUrl}/auto-agent/plan`, {\n            method: 'POST',\n            headers: this.getHeaders(),\n            body: JSON.stringify(request)\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error('[ApiService] Plan API Error:', {\n                status: response.status,\n                statusText: response.statusText,\n                body: errorText,\n                url: `${this.baseUrl}/auto-agent/plan`\n            });\n            let errorMessage = '계획 생성 실패';\n            try {\n                const errorJson = JSON.parse(errorText);\n                errorMessage = errorJson.error || errorJson.message || errorMessage;\n            }\n            catch (e) {\n                errorMessage = errorText || errorMessage;\n            }\n            throw new Error(errorMessage);\n        }\n        const result = await response.json();\n        console.log('[ApiService] Plan API Success:', result);\n        return result;\n    }\n    /**\n     * Refine step code after error (Self-Healing)\n     */\n    async refineStepCode(request) {\n        console.log('[ApiService] refineStepCode request:', request);\n        const response = await fetch(`${this.baseUrl}/auto-agent/refine`, {\n            method: 'POST',\n            headers: this.getHeaders(),\n            body: JSON.stringify(request)\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error('[ApiService] Refine API Error:', {\n                status: response.status,\n                statusText: response.statusText,\n                body: errorText,\n                url: `${this.baseUrl}/auto-agent/refine`\n            });\n            let errorMessage = '코드 수정 실패';\n            try {\n                const errorJson = JSON.parse(errorText);\n                errorMessage = errorJson.error || errorJson.message || errorMessage;\n            }\n            catch (e) {\n                errorMessage = errorText || errorMessage;\n            }\n            throw new Error(errorMessage);\n        }\n        const result = await response.json();\n        console.log('[ApiService] Refine API Success:', result);\n        return result;\n    }\n    /**\n     * Adaptive Replanning - 에러 분석 후 계획 재수립\n     */\n    async replanExecution(request) {\n        console.log('[ApiService] replanExecution request:', request);\n        const response = await fetch(`${this.baseUrl}/auto-agent/replan`, {\n            method: 'POST',\n            headers: this.getHeaders(),\n            body: JSON.stringify(request)\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error('[ApiService] Replan API Error:', {\n                status: response.status,\n                statusText: response.statusText,\n                body: errorText,\n                url: `${this.baseUrl}/auto-agent/replan`\n            });\n            let errorMessage = '계획 재수립 실패';\n            try {\n                const errorJson = JSON.parse(errorText);\n                errorMessage = errorJson.error || errorJson.message || errorMessage;\n            }\n            catch (e) {\n                errorMessage = errorText || errorMessage;\n            }\n            throw new Error(errorMessage);\n        }\n        const result = await response.json();\n        console.log('[ApiService] Replan API Success:', result);\n        return result;\n    }\n    /**\n     * Validate code before execution - 사전 코드 품질 검증 (Pyflakes/AST 기반)\n     */\n    async validateCode(request) {\n        console.log('[ApiService] validateCode request:', request);\n        const response = await fetch(`${this.baseUrl}/auto-agent/validate`, {\n            method: 'POST',\n            headers: this.getHeaders(),\n            credentials: 'include',\n            body: JSON.stringify(request)\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error('[ApiService] Validate API Error:', {\n                status: response.status,\n                statusText: response.statusText,\n                body: errorText,\n                url: `${this.baseUrl}/auto-agent/validate`\n            });\n            let errorMessage = '코드 검증 실패';\n            try {\n                const errorJson = JSON.parse(errorText);\n                errorMessage = errorJson.error || errorJson.message || errorMessage;\n            }\n            catch (e) {\n                errorMessage = errorText || errorMessage;\n            }\n            throw new Error(errorMessage);\n        }\n        const result = await response.json();\n        console.log('[ApiService] Validate API Success:', result);\n        return result;\n    }\n    /**\n     * Reflect on step execution - 실행 결과 분석 및 적응적 조정\n     */\n    async reflectOnExecution(request) {\n        console.log('[ApiService] reflectOnExecution request:', request);\n        const response = await fetch(`${this.baseUrl}/auto-agent/reflect`, {\n            method: 'POST',\n            headers: this.getHeaders(),\n            credentials: 'include',\n            body: JSON.stringify(request)\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error('[ApiService] Reflect API Error:', {\n                status: response.status,\n                statusText: response.statusText,\n                body: errorText,\n                url: `${this.baseUrl}/auto-agent/reflect`\n            });\n            let errorMessage = 'Reflection 실패';\n            try {\n                const errorJson = JSON.parse(errorText);\n                errorMessage = errorJson.error || errorJson.message || errorMessage;\n            }\n            catch (e) {\n                errorMessage = errorText || errorMessage;\n            }\n            throw new Error(errorMessage);\n        }\n        const result = await response.json();\n        console.log('[ApiService] Reflect API Success:', result);\n        return result;\n    }\n    /**\n     * Stream execution plan generation with real-time updates\n     */\n    async generateExecutionPlanStream(request, onPlanUpdate, onReasoning) {\n        const response = await fetch(`${this.baseUrl}/auto-agent/plan/stream`, {\n            method: 'POST',\n            headers: this.getHeaders(),\n            body: JSON.stringify(request)\n        });\n        if (!response.ok) {\n            const error = await response.text();\n            throw new Error(`Failed to generate plan: ${error}`);\n        }\n        const reader = response.body?.getReader();\n        if (!reader) {\n            throw new Error('Response body is not readable');\n        }\n        const decoder = new TextDecoder();\n        let buffer = '';\n        let finalPlan = null;\n        try {\n            while (true) {\n                const { done, value } = await reader.read();\n                if (done)\n                    break;\n                buffer += decoder.decode(value, { stream: true });\n                const lines = buffer.split('\\n');\n                buffer = lines.pop() || '';\n                for (const line of lines) {\n                    if (line.startsWith('data: ')) {\n                        try {\n                            const data = JSON.parse(line.slice(6));\n                            if (data.error) {\n                                throw new Error(data.error);\n                            }\n                            if (data.reasoning && onReasoning) {\n                                onReasoning(data.reasoning);\n                            }\n                            if (data.plan) {\n                                onPlanUpdate(data.plan);\n                                if (data.done) {\n                                    finalPlan = data.plan;\n                                }\n                            }\n                        }\n                        catch (e) {\n                            if (!(e instanceof SyntaxError)) {\n                                throw e;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        finally {\n            reader.releaseLock();\n        }\n        if (!finalPlan) {\n            throw new Error('No plan received from server');\n        }\n        return finalPlan;\n    }\n}\n","/**\n * Task Service - Handles notebook generation tasks and progress tracking\n */\nexport class TaskService {\n    constructor(baseUrl = '/hdsp-agent') {\n        this.baseUrl = baseUrl;\n        this.eventSources = new Map();\n    }\n    /**\n     * Get cookie value by name\n     */\n    getCookie(name) {\n        const value = `; ${document.cookie}`;\n        const parts = value.split(`; ${name}=`);\n        if (parts.length === 2) {\n            return parts.pop()?.split(';').shift() || '';\n        }\n        return '';\n    }\n    /**\n     * Get CSRF token from cookie\n     */\n    getCsrfToken() {\n        return this.getCookie('_xsrf');\n    }\n    /**\n     * Get headers with CSRF token for POST requests\n     */\n    getHeaders() {\n        return {\n            'Content-Type': 'application/json',\n            'X-XSRFToken': this.getCsrfToken()\n        };\n    }\n    /**\n     * Start a new notebook generation task\n     */\n    async generateNotebook(request) {\n        const response = await fetch(`${this.baseUrl}/notebook/generate`, {\n            method: 'POST',\n            headers: this.getHeaders(),\n            body: JSON.stringify(request)\n        });\n        if (!response.ok) {\n            const error = await response\n                .json()\n                .catch(() => ({ message: 'Failed to start notebook generation' }));\n            throw new Error(error.message || 'Failed to start notebook generation');\n        }\n        return response.json();\n    }\n    /**\n     * Get current task status\n     */\n    async getTaskStatus(taskId) {\n        const response = await fetch(`${this.baseUrl}/task/${taskId}/status`);\n        if (!response.ok) {\n            const error = await response\n                .json()\n                .catch(() => ({ message: 'Failed to get task status' }));\n            throw new Error(error.message || 'Failed to get task status');\n        }\n        return response.json();\n    }\n    /**\n     * Subscribe to task progress updates via Server-Sent Events\n     */\n    subscribeToTaskProgress(taskId, onProgress, onError, onComplete) {\n        // Close existing connection if any\n        this.unsubscribeFromTask(taskId);\n        const eventSource = new EventSource(`${this.baseUrl}/task/${taskId}/stream`);\n        eventSource.onmessage = (event) => {\n            try {\n                const data = JSON.parse(event.data);\n                onProgress(data);\n                // Close connection if task is done\n                if (['completed', 'failed', 'cancelled'].includes(data.status)) {\n                    this.unsubscribeFromTask(taskId);\n                    if (onComplete) {\n                        onComplete();\n                    }\n                }\n            }\n            catch (error) {\n                console.error('Failed to parse SSE message:', error);\n                if (onError) {\n                    onError(error);\n                }\n            }\n        };\n        eventSource.onerror = (event) => {\n            console.error('SSE connection error:', event);\n            this.unsubscribeFromTask(taskId);\n            if (onError) {\n                onError(new Error('Connection to server lost'));\n            }\n        };\n        this.eventSources.set(taskId, eventSource);\n        // Return unsubscribe function\n        return () => this.unsubscribeFromTask(taskId);\n    }\n    /**\n     * Unsubscribe from task progress updates\n     */\n    unsubscribeFromTask(taskId) {\n        const eventSource = this.eventSources.get(taskId);\n        if (eventSource) {\n            eventSource.close();\n            this.eventSources.delete(taskId);\n        }\n    }\n    /**\n     * Cancel a running task\n     */\n    async cancelTask(taskId) {\n        const response = await fetch(`${this.baseUrl}/task/${taskId}/cancel`, {\n            method: 'POST',\n            headers: this.getHeaders()\n        });\n        if (!response.ok) {\n            const error = await response\n                .json()\n                .catch(() => ({ message: 'Failed to cancel task' }));\n            throw new Error(error.message || 'Failed to cancel task');\n        }\n        // Close SSE connection\n        this.unsubscribeFromTask(taskId);\n    }\n    /**\n     * Clean up all active connections\n     */\n    dispose() {\n        for (const [taskId, _] of this.eventSources) {\n            this.unsubscribeFromTask(taskId);\n        }\n    }\n}\n","/**\n * ToolExecutor - HF Jupyter Agent 스타일의 Tool 실행기\n *\n * 3가지 도구 실행 및 결과 캡처:\n * - jupyter_cell: 코드 셀 생성/수정/실행\n * - markdown: 마크다운 셀 생성/수정\n * - final_answer: 작업 완료 신호\n */\nimport { NotebookActions } from '@jupyterlab/notebook';\nexport class ToolExecutor {\n    constructor(notebook, sessionContext) {\n        this.autoScrollEnabled = true;\n        this.notebook = notebook;\n        this.sessionContext = sessionContext;\n    }\n    /**\n     * 자동 스크롤 설정\n     */\n    setAutoScroll(enabled) {\n        this.autoScrollEnabled = enabled;\n    }\n    /**\n     * 특정 셀로 스크롤 및 포커스\n     */\n    scrollToCell(cellIndex) {\n        if (!this.autoScrollEnabled)\n            return;\n        const notebookContent = this.notebook.content;\n        const cell = notebookContent.widgets[cellIndex];\n        if (cell) {\n            // 셀로 부드럽게 스크롤\n            cell.node.scrollIntoView({\n                behavior: 'smooth',\n                block: 'center',\n            });\n        }\n    }\n    /**\n     * Tool 실행 라우터\n     */\n    async executeTool(call) {\n        console.log('[ToolExecutor] executeTool called:', JSON.stringify(call, null, 2));\n        let result;\n        switch (call.tool) {\n            case 'jupyter_cell':\n                console.log('[ToolExecutor] Executing jupyter_cell tool');\n                result = await this.executeJupyterCell(call.parameters);\n                break;\n            case 'markdown':\n                console.log('[ToolExecutor] Executing markdown tool');\n                result = await this.executeMarkdown(call.parameters);\n                break;\n            case 'final_answer':\n                console.log('[ToolExecutor] Executing final_answer tool');\n                result = await this.executeFinalAnswer(call.parameters);\n                break;\n            default:\n                result = {\n                    success: false,\n                    error: `Unknown tool: ${call.tool}`,\n                };\n        }\n        console.log('[ToolExecutor] Tool result:', JSON.stringify(result, null, 2));\n        return result;\n    }\n    /**\n     * jupyter_cell 도구: 셀 생성/수정/실행\n     */\n    async executeJupyterCell(params) {\n        console.log('[ToolExecutor] executeJupyterCell params:', params);\n        const notebookContent = this.notebook.content;\n        console.log('[ToolExecutor] notebook content available:', !!notebookContent);\n        console.log('[ToolExecutor] notebook model available:', !!notebookContent?.model);\n        let cellIndex;\n        let wasModified = false;\n        try {\n            if (params.cellIndex !== undefined) {\n                // 기존 셀 수정\n                console.log('[ToolExecutor] Modifying existing cell at index:', params.cellIndex);\n                cellIndex = params.cellIndex;\n                this.updateCellContent(cellIndex, params.code);\n                wasModified = true;\n            }\n            else {\n                // 새 셀 생성\n                console.log('[ToolExecutor] Creating new code cell');\n                cellIndex = await this.createCodeCell(params.code, params.insertAfter);\n                console.log('[ToolExecutor] Created cell at index:', cellIndex);\n            }\n            // 셀 생성/수정 후 해당 셀로 스크롤 (실행 전)\n            this.scrollToCell(cellIndex);\n            // 셀 실행 및 결과 캡처\n            console.log('[ToolExecutor] Executing cell at index:', cellIndex);\n            const result = await this.executeCellAndCapture(cellIndex);\n            console.log('[ToolExecutor] Cell execution result:', result.status);\n            return {\n                success: result.status === 'ok',\n                output: result.result || result.stdout,\n                error: result.error?.evalue,\n                traceback: result.error?.traceback,\n                cellIndex,\n                wasModified,\n            };\n        }\n        catch (error) {\n            console.error('[ToolExecutor] executeJupyterCell error:', error);\n            return {\n                success: false,\n                error: error.message || 'Failed to execute jupyter_cell',\n                cellIndex: cellIndex,\n                wasModified,\n            };\n        }\n    }\n    /**\n     * markdown 도구: 마크다운 셀 생성/수정\n     */\n    async executeMarkdown(params) {\n        try {\n            let cellIndex;\n            let wasModified = false;\n            if (params.cellIndex !== undefined) {\n                cellIndex = params.cellIndex;\n                this.updateCellContent(cellIndex, params.content);\n                wasModified = true;\n            }\n            else {\n                cellIndex = await this.createMarkdownCell(params.content);\n            }\n            // 마크다운 셀도 생성 후 스크롤\n            this.scrollToCell(cellIndex);\n            return {\n                success: true,\n                cellIndex,\n                wasModified,\n            };\n        }\n        catch (error) {\n            return {\n                success: false,\n                error: error.message || 'Failed to execute markdown',\n            };\n        }\n    }\n    /**\n     * final_answer 도구: 작업 완료 신호\n     */\n    async executeFinalAnswer(params) {\n        return {\n            success: true,\n            output: params.answer,\n        };\n    }\n    /**\n     * 코드 셀 생성 (빈 셀이 있으면 재사용)\n     */\n    async createCodeCell(code, insertAfter) {\n        const notebookContent = this.notebook.content;\n        const model = notebookContent.model;\n        if (!model) {\n            throw new Error('Notebook model not available');\n        }\n        // 노트북 맨 끝의 활성 셀이 빈 코드 셀이면 재사용 (첫 셀 생성 시에만)\n        const activeIndex = notebookContent.activeCellIndex;\n        const isAtEnd = activeIndex === model.cells.length - 1;\n        if (activeIndex >= 0 && insertAfter === undefined && isAtEnd) {\n            const activeCell = model.cells.get(activeIndex);\n            if (activeCell && activeCell.type === 'code') {\n                const source = activeCell.sharedModel.getSource().trim();\n                if (source === '') {\n                    // 빈 셀 재사용\n                    activeCell.sharedModel.setSource(code);\n                    return activeIndex;\n                }\n            }\n        }\n        // 삽입 위치 결정: 항상 노트북 맨 끝에 추가 (순서 보장)\n        // insertAfter가 지정되면 그 다음 위치, 아니면 맨 끝\n        let insertIndex;\n        if (insertAfter !== undefined) {\n            insertIndex = insertAfter + 1;\n        }\n        else {\n            // 맨 끝에 추가하여 순서 보장\n            insertIndex = model.cells.length;\n        }\n        // 새 코드 셀 생성\n        const cellModel = model.sharedModel.insertCell(insertIndex, {\n            cell_type: 'code',\n            source: code,\n            metadata: {},\n        });\n        // 새 셀로 포커스 이동\n        notebookContent.activeCellIndex = insertIndex;\n        return insertIndex;\n    }\n    /**\n     * 마크다운 셀 생성\n     */\n    async createMarkdownCell(content, insertAfter) {\n        const notebookContent = this.notebook.content;\n        const model = notebookContent.model;\n        if (!model) {\n            throw new Error('Notebook model not available');\n        }\n        // 삽입 위치 결정: 항상 노트북 맨 끝에 추가 (순서 보장)\n        // insertAfter가 지정되면 그 다음 위치, 아니면 맨 끝\n        let insertIndex;\n        if (insertAfter !== undefined) {\n            insertIndex = insertAfter + 1;\n        }\n        else {\n            // 맨 끝에 추가하여 순서 보장\n            insertIndex = model.cells.length;\n        }\n        // 새 마크다운 셀 생성\n        model.sharedModel.insertCell(insertIndex, {\n            cell_type: 'markdown',\n            source: content,\n            metadata: {},\n        });\n        // 마크다운 셀 렌더링\n        const cell = notebookContent.widgets[insertIndex];\n        if (cell && cell.rendered !== undefined) {\n            cell.rendered = true;\n        }\n        // 새 셀로 활성 셀 업데이트 (다음 셀이 이 셀 다음에 삽입되도록)\n        notebookContent.activeCellIndex = insertIndex;\n        return insertIndex;\n    }\n    /**\n     * 셀 내용 업데이트\n     */\n    updateCellContent(cellIndex, content) {\n        const notebookContent = this.notebook.content;\n        const cell = notebookContent.widgets[cellIndex];\n        if (!cell || !cell.model?.sharedModel) {\n            throw new Error(`Cell at index ${cellIndex} not found or model not available`);\n        }\n        cell.model.sharedModel.setSource(content);\n    }\n    /**\n     * 셀 실행 및 결과 캡처\n     * NotebookActions.run()을 사용하여 정식으로 셀 실행 (execution_count 업데이트 포함)\n     */\n    async executeCellAndCapture(cellIndex) {\n        const notebookContent = this.notebook.content;\n        const cell = notebookContent.widgets[cellIndex];\n        if (!cell) {\n            throw new Error(`Cell at index ${cellIndex} not found`);\n        }\n        const startTime = Date.now();\n        // 해당 셀 선택\n        notebookContent.activeCellIndex = cellIndex;\n        // NotebookActions.run()을 사용하여 정식 실행 (execution_count 업데이트됨)\n        const success = await NotebookActions.run(notebookContent, this.sessionContext);\n        // 실행 완료 후 결과 캡처\n        const executionTime = Date.now() - startTime;\n        // 셀 출력 분석\n        let stdout = '';\n        let stderr = '';\n        let result = null;\n        let error = undefined;\n        // cell.model과 outputs가 존재하는지 안전하게 체크\n        const outputs = cell.model?.outputs;\n        if (outputs && outputs.length > 0) {\n            for (let i = 0; i < outputs.length; i++) {\n                const output = outputs.get(i);\n                if (output.type === 'stream') {\n                    const streamOutput = output;\n                    if (streamOutput.name === 'stdout') {\n                        stdout += streamOutput.text || '';\n                    }\n                    else if (streamOutput.name === 'stderr') {\n                        stderr += streamOutput.text || '';\n                    }\n                }\n                else if (output.type === 'execute_result' || output.type === 'display_data') {\n                    const data = output.data;\n                    if (!result) {\n                        result = data;\n                    }\n                }\n                else if (output.type === 'error') {\n                    const errorOutput = output;\n                    error = {\n                        ename: errorOutput.ename,\n                        evalue: errorOutput.evalue,\n                        traceback: errorOutput.traceback,\n                    };\n                }\n            }\n        }\n        const status = error ? 'error' : 'ok';\n        return {\n            status,\n            stdout,\n            stderr,\n            result,\n            error,\n            executionTime,\n            cellIndex,\n        };\n    }\n    /**\n     * 현재 노트북의 셀 개수 반환\n     */\n    getCellCount() {\n        return this.notebook.content.model?.cells.length || 0;\n    }\n    /**\n     * 특정 셀의 내용 반환\n     */\n    getCellContent(cellIndex) {\n        const cell = this.notebook.content.widgets[cellIndex];\n        return cell?.model?.sharedModel?.getSource() || '';\n    }\n    /**\n     * 특정 셀의 출력 반환\n     */\n    getCellOutput(cellIndex) {\n        const cell = this.notebook.content.widgets[cellIndex];\n        // cell, cell.model, cell.model.outputs 모두 안전하게 체크\n        const cellOutputs = cell?.model?.outputs;\n        if (!cell || !cellOutputs) {\n            return '';\n        }\n        const outputs = [];\n        for (let i = 0; i < cellOutputs.length; i++) {\n            const output = cellOutputs.get(i);\n            if (output.type === 'stream') {\n                outputs.push(output.text || '');\n            }\n            else if (output.type === 'execute_result' || output.type === 'display_data') {\n                const data = output.data;\n                if (data?.['text/plain']) {\n                    outputs.push(data['text/plain']);\n                }\n            }\n            else if (output.type === 'error') {\n                const errorOutput = output;\n                outputs.push(`${errorOutput.ename}: ${errorOutput.evalue}`);\n            }\n        }\n        return outputs.join('\\n');\n    }\n    /**\n     * 커널 인터럽트\n     */\n    async interruptKernel() {\n        const kernel = this.sessionContext.session?.kernel;\n        if (kernel) {\n            await kernel.interrupt();\n        }\n    }\n    /**\n     * 셀 삭제\n     */\n    deleteCell(cellIndex) {\n        const model = this.notebook.content.model;\n        if (model && cellIndex >= 0 && cellIndex < model.cells.length) {\n            model.sharedModel.deleteCell(cellIndex);\n        }\n    }\n    /**\n     * 여러 셀 실행 (순차)\n     */\n    async executeMultipleCells(cellIndices) {\n        const results = [];\n        for (const index of cellIndices) {\n            const result = await this.executeCellAndCapture(index);\n            results.push(result);\n            if (result.status === 'error') {\n                break; // 에러 발생 시 중단\n            }\n        }\n        return results;\n    }\n}\nexport default ToolExecutor;\n","/**\n * Auto-Agent Type Definitions\n * HuggingFace Jupyter Agent 패턴 기반 Tool Calling 구조\n */\n// 속도 프리셋 (ms 단위 지연) - 전반적으로 느리게 조정\nexport const EXECUTION_SPEED_DELAYS = {\n    'instant': 0,\n    'fast': 800,\n    'normal': 1500,\n    'slow': 3000,\n    'step-by-step': -1, // -1은 수동 진행 의미\n};\nexport const DEFAULT_AUTO_AGENT_CONFIG = {\n    maxRetriesPerStep: 3,\n    executionTimeout: 30000,\n    enableSafetyCheck: true,\n    showDetailedProgress: true,\n    executionSpeed: 'normal',\n    stepDelay: 1500,\n    autoScrollToCell: true,\n    highlightCurrentCell: true,\n};\n","/**\n * Core type definitions for Jupyter Agent extension\n */\nexport var CellAction;\n(function (CellAction) {\n    CellAction[\"EXPLAIN\"] = \"explain\";\n    CellAction[\"FIX\"] = \"fix\";\n    CellAction[\"CUSTOM_PROMPT\"] = \"custom_prompt\";\n})(CellAction || (CellAction = {}));\nexport var AgentEvent;\n(function (AgentEvent) {\n    AgentEvent[\"CELL_ACTION\"] = \"hdsp-agent:cell-action\";\n    AgentEvent[\"CONFIG_CHANGED\"] = \"hdsp-agent:config-changed\";\n    AgentEvent[\"MESSAGE_SENT\"] = \"hdsp-agent:message-sent\";\n    AgentEvent[\"MESSAGE_RECEIVED\"] = \"hdsp-agent:message-received\";\n})(AgentEvent || (AgentEvent = {}));\n","/**\n * SafetyChecker - 코드 안전 검사기\n *\n * 위험한 코드 패턴을 사전에 검출하여 실행 전 경고\n * NBI (Notebook Intelligence) 패턴 참조\n */\nconst DANGEROUS_PATTERNS = [\n    // 시스템 명령 관련\n    {\n        pattern: /rm\\s+-rf\\s+[\\/~]/,\n        description: '재귀 삭제 명령 (rm -rf)',\n        severity: 'critical',\n        category: 'system',\n    },\n    {\n        pattern: /os\\.system\\s*\\(/,\n        description: '시스템 명령 실행 (os.system)',\n        severity: 'critical',\n        category: 'system',\n    },\n    {\n        pattern: /subprocess\\.(run|call|Popen|check_output)\\s*\\(/,\n        description: '서브프로세스 실행 (subprocess)',\n        severity: 'warning',\n        category: 'system',\n    },\n    {\n        pattern: /os\\.exec\\w*\\s*\\(/,\n        description: 'OS exec 명령 실행',\n        severity: 'critical',\n        category: 'system',\n    },\n    // 동적 코드 실행\n    {\n        pattern: /\\beval\\s*\\(/,\n        description: '동적 코드 실행 (eval)',\n        severity: 'critical',\n        category: 'security',\n    },\n    {\n        pattern: /\\bexec\\s*\\(/,\n        description: '동적 코드 실행 (exec)',\n        severity: 'critical',\n        category: 'security',\n    },\n    {\n        pattern: /__import__\\s*\\(/,\n        description: '동적 모듈 임포트 (__import__)',\n        severity: 'warning',\n        category: 'security',\n    },\n    {\n        pattern: /compile\\s*\\([^)]*exec/,\n        description: '동적 코드 컴파일 (compile)',\n        severity: 'critical',\n        category: 'security',\n    },\n    // 파일 시스템 관련\n    {\n        pattern: /open\\s*\\([^)]*,\\s*['\"]w/,\n        description: '파일 쓰기 모드 열기',\n        severity: 'warning',\n        category: 'file',\n    },\n    {\n        pattern: /shutil\\.(rmtree|move|copy)/,\n        description: '파일/디렉토리 조작 (shutil)',\n        severity: 'warning',\n        category: 'file',\n    },\n    {\n        pattern: /os\\.(remove|unlink|rmdir|makedirs|rename)/,\n        description: '파일 시스템 변경 (os)',\n        severity: 'warning',\n        category: 'file',\n    },\n    {\n        pattern: /pathlib\\.Path[^)]*\\.(unlink|rmdir|write)/,\n        description: '파일 시스템 변경 (pathlib)',\n        severity: 'warning',\n        category: 'file',\n    },\n    // 네트워크 관련\n    {\n        pattern: /requests\\.(get|post|put|delete|patch)\\s*\\([^)]*\\)/,\n        description: 'HTTP 요청 (requests)',\n        severity: 'info',\n        category: 'network',\n    },\n    {\n        pattern: /urllib\\.(request|urlopen)/,\n        description: 'URL 요청 (urllib)',\n        severity: 'info',\n        category: 'network',\n    },\n    {\n        pattern: /socket\\./,\n        description: '소켓 통신 (socket)',\n        severity: 'warning',\n        category: 'network',\n    },\n    // 무한 루프 패턴\n    {\n        pattern: /while\\s+True\\s*:/,\n        description: '무한 루프 (while True)',\n        severity: 'warning',\n        category: 'loop',\n    },\n    {\n        pattern: /while\\s+1\\s*:/,\n        description: '무한 루프 (while 1)',\n        severity: 'warning',\n        category: 'loop',\n    },\n    {\n        pattern: /for\\s+\\w+\\s+in\\s+iter\\s*\\(\\s*int\\s*,/,\n        description: '무한 반복자 (iter(int, ...))',\n        severity: 'warning',\n        category: 'loop',\n    },\n    // 민감 정보 관련\n    {\n        pattern: /os\\.environ\\s*\\[/,\n        description: '환경 변수 접근',\n        severity: 'info',\n        category: 'security',\n    },\n    {\n        pattern: /(password|secret|api_key|token)\\s*=\\s*['\"][^'\"]+['\"]/i,\n        description: '하드코딩된 민감 정보',\n        severity: 'warning',\n        category: 'security',\n    },\n    // 위험한 모듈\n    {\n        pattern: /import\\s+pickle|from\\s+pickle\\s+import/,\n        description: 'Pickle 모듈 (역직렬화 취약점)',\n        severity: 'info',\n        category: 'security',\n    },\n    {\n        pattern: /import\\s+ctypes|from\\s+ctypes\\s+import/,\n        description: 'ctypes 모듈 (저수준 메모리 접근)',\n        severity: 'warning',\n        category: 'security',\n    },\n];\nexport class SafetyChecker {\n    constructor(config) {\n        this.config = {\n            enableSafetyCheck: true,\n            blockDangerousPatterns: false,\n            requireConfirmation: true,\n            maxExecutionTime: 30,\n            ...config,\n        };\n    }\n    /**\n     * 코드 안전성 검사\n     */\n    checkCodeSafety(code) {\n        if (!this.config.enableSafetyCheck) {\n            return { safe: true, warnings: [] };\n        }\n        const warnings = [];\n        const blockedPatterns = [];\n        for (const dangerous of DANGEROUS_PATTERNS) {\n            if (dangerous.pattern.test(code)) {\n                const message = `[${dangerous.severity.toUpperCase()}] ${dangerous.description}`;\n                if (dangerous.severity === 'critical' && this.config.blockDangerousPatterns) {\n                    blockedPatterns.push(message);\n                }\n                else {\n                    warnings.push(message);\n                }\n            }\n        }\n        const safe = blockedPatterns.length === 0;\n        return {\n            safe,\n            warnings,\n            blockedPatterns: blockedPatterns.length > 0 ? blockedPatterns : undefined,\n        };\n    }\n    /**\n     * 여러 코드 블록 검사\n     */\n    checkMultipleCodeBlocks(codes) {\n        const allWarnings = [];\n        const allBlockedPatterns = [];\n        for (let i = 0; i < codes.length; i++) {\n            const result = this.checkCodeSafety(codes[i]);\n            result.warnings.forEach((w) => allWarnings.push(`[Block ${i + 1}] ${w}`));\n            if (result.blockedPatterns) {\n                result.blockedPatterns.forEach((b) => allBlockedPatterns.push(`[Block ${i + 1}] ${b}`));\n            }\n        }\n        return {\n            safe: allBlockedPatterns.length === 0,\n            warnings: allWarnings,\n            blockedPatterns: allBlockedPatterns.length > 0 ? allBlockedPatterns : undefined,\n        };\n    }\n    /**\n     * 무한 루프 가능성 검사\n     */\n    checkInfiniteLoopRisk(code) {\n        const loopPatterns = DANGEROUS_PATTERNS.filter((p) => p.category === 'loop');\n        return loopPatterns.some((p) => p.pattern.test(code));\n    }\n    /**\n     * 파일 시스템 변경 위험 검사\n     */\n    checkFileSystemRisk(code) {\n        const filePatterns = DANGEROUS_PATTERNS.filter((p) => p.category === 'file');\n        return filePatterns.some((p) => p.pattern.test(code));\n    }\n    /**\n     * 네트워크 활동 검사\n     */\n    checkNetworkActivity(code) {\n        const networkPatterns = DANGEROUS_PATTERNS.filter((p) => p.category === 'network');\n        return networkPatterns.some((p) => p.pattern.test(code));\n    }\n    /**\n     * 실행 시간 제한 값 반환\n     */\n    getMaxExecutionTime() {\n        return this.config.maxExecutionTime * 1000; // ms로 변환\n    }\n    /**\n     * 확인 필요 여부\n     */\n    requiresConfirmation(result) {\n        if (!this.config.requireConfirmation) {\n            return false;\n        }\n        return result.warnings.length > 0 || (result.blockedPatterns?.length || 0) > 0;\n    }\n    /**\n     * 설정 업데이트\n     */\n    updateConfig(config) {\n        this.config = { ...this.config, ...config };\n    }\n    /**\n     * 현재 설정 반환\n     */\n    getConfig() {\n        return { ...this.config };\n    }\n    /**\n     * 사용자 친화적 경고 메시지 생성\n     */\n    formatWarningsForDisplay(result) {\n        if (result.warnings.length === 0 && !result.blockedPatterns?.length) {\n            return '';\n        }\n        const lines = [];\n        if (result.blockedPatterns && result.blockedPatterns.length > 0) {\n            lines.push('⛔ 차단된 패턴:');\n            result.blockedPatterns.forEach((p) => lines.push(`  • ${p}`));\n        }\n        if (result.warnings.length > 0) {\n            lines.push('⚠️ 경고:');\n            result.warnings.forEach((w) => lines.push(`  • ${w}`));\n        }\n        return lines.join('\\n');\n    }\n}\nexport default SafetyChecker;\n","/**\n * Markdown to HTML converter with syntax highlighting\n * Based on chrome_agent's formatMarkdownToHtml implementation\n */\n/**\n * Escape HTML special characters\n */\nexport function escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n}\n/**\n * Normalize indentation in code blocks\n */\nexport function normalizeIndentation(code) {\n    const lines = code.split('\\n');\n    // Find minimum indent from non-empty lines\n    let minIndent = Infinity;\n    const nonEmptyLines = [];\n    for (let i = 0; i < lines.length; i++) {\n        const line = lines[i];\n        if (line.trim().length > 0) {\n            const match = line.match(/^(\\s*)/);\n            const indent = match ? match[1].length : 0;\n            minIndent = Math.min(minIndent, indent);\n            nonEmptyLines.push(i);\n        }\n    }\n    // If no indent or no non-empty lines, return original\n    if (minIndent === Infinity || minIndent === 0) {\n        return code;\n    }\n    // Remove minimum indent from all lines\n    const normalized = lines.map(line => {\n        if (line.trim().length === 0) {\n            return '';\n        }\n        return line.substring(minIndent);\n    });\n    return normalized.join('\\n');\n}\n/**\n * Highlight Python code with inline styles\n */\nexport function highlightPython(code) {\n    let highlighted = code;\n    // Color styles (matching chrome_agent)\n    const styles = {\n        COMMENT: 'color: #6a9955; font-style: italic;',\n        STRING: 'color: #ce9178;',\n        NUMBER: 'color: #b5cea8;',\n        KEYWORD: 'color: #c586c0; font-weight: bold;',\n        BUILTIN: 'color: #dcdcaa;',\n        FUNCTION: 'color: #4fc1ff; font-weight: bold;',\n        OPERATOR: 'color: #d4d4d4;',\n        BRACKET: 'color: #d4d4d4;'\n    };\n    // Use placeholders to preserve order\n    const placeholders = [];\n    let placeholderIndex = 0;\n    // Comments (process first)\n    highlighted = highlighted.replace(/(#.*$)/gm, (match) => {\n        const id = `__PH${placeholderIndex++}__`;\n        placeholders.push({\n            id,\n            html: `<span style=\"${styles.COMMENT}\">${escapeHtml(match)}</span>`\n        });\n        return id;\n    });\n    // Triple-quoted strings\n    highlighted = highlighted.replace(/(['\"]{3})([\\s\\S]*?)(\\1)/g, (match) => {\n        const id = `__PH${placeholderIndex++}__`;\n        placeholders.push({\n            id,\n            html: `<span style=\"${styles.STRING}\">${escapeHtml(match)}</span>`\n        });\n        return id;\n    });\n    // Regular strings\n    highlighted = highlighted.replace(/(['\"])([^'\"]*?)(\\1)/g, (match) => {\n        const id = `__PH${placeholderIndex++}__`;\n        placeholders.push({\n            id,\n            html: `<span style=\"${styles.STRING}\">${escapeHtml(match)}</span>`\n        });\n        return id;\n    });\n    // Numbers\n    highlighted = highlighted.replace(/\\b(\\d+\\.?\\d*)\\b/g, (match) => {\n        const id = `__PH${placeholderIndex++}__`;\n        placeholders.push({\n            id,\n            html: `<span style=\"${styles.NUMBER}\">${match}</span>`\n        });\n        return id;\n    });\n    // Python keywords\n    const keywords = [\n        'def', 'class', 'if', 'elif', 'else', 'for', 'while', 'return', 'import',\n        'from', 'as', 'try', 'except', 'finally', 'with', 'lambda', 'yield',\n        'async', 'await', 'pass', 'break', 'continue', 'raise', 'assert', 'del',\n        'global', 'nonlocal', 'True', 'False', 'None', 'and', 'or', 'not', 'in', 'is'\n    ];\n    keywords.forEach(keyword => {\n        const regex = new RegExp(`\\\\b${keyword}\\\\b`, 'g');\n        highlighted = highlighted.replace(regex, (match) => {\n            const id = `__PH${placeholderIndex++}__`;\n            placeholders.push({\n                id,\n                html: `<span style=\"${styles.KEYWORD}\">${match}</span>`\n            });\n            return id;\n        });\n    });\n    // Built-in functions\n    const builtins = [\n        'print', 'len', 'range', 'str', 'int', 'float', 'list', 'dict', 'tuple',\n        'set', 'bool', 'type', 'isinstance', 'issubclass', 'hasattr', 'getattr',\n        'setattr', 'delattr', 'dir', 'vars', 'locals', 'globals', 'input', 'open',\n        'file', 'abs', 'all', 'any', 'bin', 'chr', 'ord', 'hex', 'oct', 'pow',\n        'round', 'sum', 'min', 'max', 'sorted', 'reversed', 'enumerate', 'zip',\n        'map', 'filter', 'reduce'\n    ];\n    builtins.forEach(builtin => {\n        const regex = new RegExp(`\\\\b${builtin}\\\\b`, 'g');\n        highlighted = highlighted.replace(regex, (match) => {\n            const id = `__PH${placeholderIndex++}__`;\n            placeholders.push({\n                id,\n                html: `<span style=\"${styles.BUILTIN}\">${match}</span>`\n            });\n            return id;\n        });\n    });\n    // Function definitions - def keyword followed by function name\n    highlighted = highlighted.replace(/(__PH\\d+__\\s+)([a-zA-Z_][a-zA-Z0-9_]*)/g, (match, defPart, funcName) => {\n        const defPlaceholder = placeholders.find(p => p.id === defPart.trim());\n        if (defPlaceholder && defPlaceholder.html.includes('def')) {\n            const id = `__PH${placeholderIndex++}__`;\n            placeholders.push({\n                id,\n                html: `<span style=\"${styles.FUNCTION}\">${funcName}</span>`\n            });\n            return defPart + id;\n        }\n        return match;\n    });\n    // Process remaining text - escape HTML and handle operators/brackets\n    highlighted = highlighted.split(/(__PH\\d+__)/g).map(part => {\n        if (part.match(/^__PH\\d+__$/)) {\n            return part; // Keep placeholder as is\n        }\n        // Escape HTML\n        part = escapeHtml(part);\n        // Operators\n        part = part.replace(/([+\\-*/%=<>!&|^~]+)/g, `<span style=\"${styles.OPERATOR}\">$1</span>`);\n        // Brackets and delimiters\n        part = part.replace(/([()[\\]{}])/g, `<span style=\"${styles.BRACKET}\">$1</span>`);\n        return part;\n    }).join('');\n    // Replace placeholders with actual HTML\n    placeholders.forEach(ph => {\n        highlighted = highlighted.replace(ph.id, ph.html);\n    });\n    return highlighted;\n}\n/**\n * Highlight JavaScript code\n */\nexport function highlightJavaScript(code) {\n    const escaped = escapeHtml(code);\n    const lines = escaped.split('\\n');\n    const keywords = [\n        'function', 'const', 'let', 'var', 'if', 'else', 'for', 'while',\n        'return', 'class', 'import', 'export', 'from', 'async', 'await',\n        'new', 'this', 'null', 'undefined', 'true', 'false', 'typeof'\n    ];\n    let inMultilineComment = false;\n    const highlightedLines = lines.map(line => {\n        // Check for multiline comment continuation\n        if (inMultilineComment) {\n            const endIndex = line.indexOf('*/');\n            if (endIndex !== -1) {\n                inMultilineComment = false;\n                return `<span style=\"color: #6a9955; font-style: italic;\">${line.substring(0, endIndex + 2)}</span>` +\n                    highlightJSTokens(line.substring(endIndex + 2), keywords);\n            }\n            return `<span style=\"color: #6a9955; font-style: italic;\">${line}</span>`;\n        }\n        // Single-line comment\n        const commentMatch = line.match(/^(\\s*)(\\/\\/.*)$/);\n        if (commentMatch) {\n            return commentMatch[1] + `<span style=\"color: #6a9955; font-style: italic;\">${commentMatch[2]}</span>`;\n        }\n        // Multiline comment start\n        const multiCommentStart = line.indexOf('/*');\n        if (multiCommentStart !== -1) {\n            const multiCommentEnd = line.indexOf('*/', multiCommentStart);\n            if (multiCommentEnd !== -1) {\n                return highlightJSTokens(line.substring(0, multiCommentStart), keywords) +\n                    `<span style=\"color: #6a9955; font-style: italic;\">${line.substring(multiCommentStart, multiCommentEnd + 2)}</span>` +\n                    highlightJSTokens(line.substring(multiCommentEnd + 2), keywords);\n            }\n            else {\n                inMultilineComment = true;\n                return highlightJSTokens(line.substring(0, multiCommentStart), keywords) +\n                    `<span style=\"color: #6a9955; font-style: italic;\">${line.substring(multiCommentStart)}</span>`;\n            }\n        }\n        // Comment in middle of line\n        const commentIndex = line.indexOf('//');\n        if (commentIndex !== -1) {\n            return highlightJSTokens(line.substring(0, commentIndex), keywords) +\n                `<span style=\"color: #6a9955; font-style: italic;\">${line.substring(commentIndex)}</span>`;\n        }\n        return highlightJSTokens(line, keywords);\n    });\n    return highlightedLines.join('\\n');\n}\n/**\n * Highlight JavaScript tokens (keywords, strings, numbers)\n */\nfunction highlightJSTokens(line, keywords) {\n    const container = document.createElement('span');\n    let i = 0;\n    while (i < line.length) {\n        // String check (template literal, double quote, single quote)\n        if (line[i] === '`') {\n            let j = i + 1;\n            let escaped = false;\n            while (j < line.length) {\n                if (line[j] === '\\\\' && !escaped) {\n                    escaped = true;\n                    j++;\n                    continue;\n                }\n                if (line[j] === '`' && !escaped)\n                    break;\n                escaped = false;\n                j++;\n            }\n            if (j < line.length && line[j] === '`') {\n                const span = document.createElement('span');\n                span.style.color = '#ce9178';\n                span.textContent = line.substring(i, j + 1);\n                container.appendChild(span);\n                i = j + 1;\n                continue;\n            }\n        }\n        if (line[i] === '\"') {\n            let j = i + 1;\n            let escaped = false;\n            while (j < line.length) {\n                if (line[j] === '\\\\' && !escaped) {\n                    escaped = true;\n                    j++;\n                    continue;\n                }\n                if (line[j] === '\"' && !escaped)\n                    break;\n                escaped = false;\n                j++;\n            }\n            if (j < line.length && line[j] === '\"') {\n                const span = document.createElement('span');\n                span.style.color = '#ce9178';\n                span.textContent = line.substring(i, j + 1);\n                container.appendChild(span);\n                i = j + 1;\n                continue;\n            }\n            // Unclosed string - treat rest as string\n            const span = document.createElement('span');\n            span.style.color = '#ce9178';\n            span.textContent = line.substring(i);\n            container.appendChild(span);\n            break;\n        }\n        if (line[i] === '\\'') {\n            let j = i + 1;\n            let escaped = false;\n            while (j < line.length) {\n                if (line[j] === '\\\\' && !escaped) {\n                    escaped = true;\n                    j++;\n                    continue;\n                }\n                if (line[j] === '\\'' && !escaped)\n                    break;\n                escaped = false;\n                j++;\n            }\n            if (j < line.length && line[j] === '\\'') {\n                const span = document.createElement('span');\n                span.style.color = '#ce9178';\n                span.textContent = line.substring(i, j + 1);\n                container.appendChild(span);\n                i = j + 1;\n                continue;\n            }\n            // Unclosed string\n            const span = document.createElement('span');\n            span.style.color = '#ce9178';\n            span.textContent = line.substring(i);\n            container.appendChild(span);\n            break;\n        }\n        // Number check\n        if (/\\d/.test(line[i])) {\n            let j = i;\n            while (j < line.length && /[\\d.]/.test(line[j])) {\n                j++;\n            }\n            const span = document.createElement('span');\n            span.style.color = '#b5cea8';\n            span.textContent = line.substring(i, j);\n            container.appendChild(span);\n            i = j;\n            continue;\n        }\n        // Word check (keyword or identifier)\n        if (/[a-zA-Z_$]/.test(line[i])) {\n            let j = i;\n            while (j < line.length && /[a-zA-Z0-9_$]/.test(line[j])) {\n                j++;\n            }\n            const word = line.substring(i, j);\n            if (keywords.includes(word)) {\n                const span = document.createElement('span');\n                span.style.color = '#569cd6';\n                span.style.fontWeight = '500';\n                span.textContent = word;\n                container.appendChild(span);\n            }\n            else {\n                const textNode = document.createTextNode(word);\n                container.appendChild(textNode);\n            }\n            i = j;\n            continue;\n        }\n        // Regular character\n        const textNode = document.createTextNode(line[i]);\n        container.appendChild(textNode);\n        i++;\n    }\n    return container.innerHTML;\n}\n/**\n * Format inline markdown (bold, italic, inline code) within text\n */\nexport function formatInlineMarkdown(text) {\n    let html = escapeHtml(text);\n    // Inline code first (to protect from other transformations)\n    html = html.replace(/`([^`]+)`/g, '<code class=\"inline-code\">$1</code>');\n    // Bold text (**text**)\n    html = html.replace(/\\*\\*([^*]+)\\*\\*/g, '<strong>$1</strong>');\n    // Italic text (*text*)\n    html = html.replace(/\\*([^*]+)\\*/g, '<em>$1</em>');\n    return html;\n}\n/**\n * Parse markdown table to HTML\n */\nexport function parseMarkdownTable(tableText) {\n    const lines = tableText.trim().split('\\n');\n    if (lines.length < 2)\n        return escapeHtml(tableText);\n    // Check if it's a valid table (has header separator)\n    const separatorIndex = lines.findIndex(line => /^\\|?\\s*[-:]+[-|\\s:]+\\s*\\|?$/.test(line));\n    if (separatorIndex === -1 || separatorIndex === 0)\n        return escapeHtml(tableText);\n    const headerLines = lines.slice(0, separatorIndex);\n    const separatorLine = lines[separatorIndex];\n    const bodyLines = lines.slice(separatorIndex + 1);\n    // Parse alignment from separator\n    const alignments = [];\n    const separatorCells = separatorLine.split('|').filter(cell => cell.trim());\n    separatorCells.forEach(cell => {\n        const trimmed = cell.trim();\n        if (trimmed.startsWith(':') && trimmed.endsWith(':')) {\n            alignments.push('center');\n        }\n        else if (trimmed.endsWith(':')) {\n            alignments.push('right');\n        }\n        else {\n            alignments.push('left');\n        }\n    });\n    // Build HTML table\n    let html = '<table class=\"markdown-table\">';\n    // Header\n    html += '<thead>';\n    headerLines.forEach(line => {\n        html += '<tr>';\n        const cells = line.split('|').filter((cell, idx, arr) => {\n            // Filter out empty cells from leading/trailing |\n            if (idx === 0 && cell.trim() === '')\n                return false;\n            if (idx === arr.length - 1 && cell.trim() === '')\n                return false;\n            return true;\n        });\n        cells.forEach((cell, idx) => {\n            const align = alignments[idx] || 'left';\n            html += `<th style=\"text-align: ${align};\">${formatInlineMarkdown(cell.trim())}</th>`;\n        });\n        html += '</tr>';\n    });\n    html += '</thead>';\n    // Body\n    if (bodyLines.length > 0) {\n        html += '<tbody>';\n        bodyLines.forEach(line => {\n            if (!line.trim())\n                return;\n            html += '<tr>';\n            const cells = line.split('|').filter((cell, idx, arr) => {\n                if (idx === 0 && cell.trim() === '')\n                    return false;\n                if (idx === arr.length - 1 && cell.trim() === '')\n                    return false;\n                return true;\n            });\n            cells.forEach((cell, idx) => {\n                const align = alignments[idx] || 'left';\n                html += `<td style=\"text-align: ${align};\">${formatInlineMarkdown(cell.trim())}</td>`;\n            });\n            html += '</tr>';\n        });\n        html += '</tbody>';\n    }\n    html += '</table>';\n    return html;\n}\n/**\n * Format markdown text to HTML with syntax highlighting\n */\nexport function formatMarkdownToHtml(text) {\n    // Decode HTML entities if present\n    const textarea = document.createElement('textarea');\n    textarea.innerHTML = text;\n    let html = textarea.value;\n    // Step 1: Protect code blocks by replacing with placeholders\n    const codeBlocks = [];\n    const codeBlockPlaceholders = [];\n    html = html.replace(/```(\\w+)?\\n([\\s\\S]*?)```/g, (match, language, code) => {\n        const lang = (language || 'python').toLowerCase();\n        const trimmedCode = normalizeIndentation(code.trim());\n        const blockId = 'code-block-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);\n        const placeholder = '__CODE_BLOCK_' + blockId + '__';\n        codeBlocks.push({\n            id: blockId,\n            code: trimmedCode,\n            language: lang\n        });\n        // Create HTML for code block\n        const highlightedCode = lang === 'python' || lang === 'py'\n            ? highlightPython(trimmedCode)\n            : lang === 'javascript' || lang === 'js'\n                ? highlightJavaScript(trimmedCode)\n                : escapeHtml(trimmedCode);\n        const htmlBlock = '<div class=\"code-block-container\" data-block-id=\"' + blockId + '\">' +\n            '<div class=\"code-block-header\">' +\n            '<span class=\"code-block-language\">' + escapeHtml(lang) + '</span>' +\n            '<div class=\"code-block-actions\">' +\n            '<button class=\"code-block-apply\" data-block-id=\"' + blockId + '\" title=\"셀에 적용\">셀에 적용</button>' +\n            '<button class=\"code-block-copy\" data-block-id=\"' + blockId + '\" title=\"복사\">복사</button>' +\n            '</div>' +\n            '</div>' +\n            '<pre class=\"code-block language-' + escapeHtml(lang) + '\"><code id=\"' + blockId + '\">' + highlightedCode + '</code></pre>' +\n            '</div>';\n        codeBlockPlaceholders.push({\n            placeholder: placeholder,\n            html: htmlBlock\n        });\n        return placeholder;\n    });\n    // Step 2: Protect inline code\n    const inlineCodePlaceholders = [];\n    html = html.replace(/`([^`]+)`/g, (match, code) => {\n        const placeholder = '__INLINE_CODE_' + Math.random().toString(36).substr(2, 9) + '__';\n        inlineCodePlaceholders.push({\n            placeholder: placeholder,\n            html: '<code class=\"inline-code\">' + escapeHtml(code) + '</code>'\n        });\n        return placeholder;\n    });\n    // Step 3: Parse and protect markdown tables\n    const tablePlaceholders = [];\n    // Match tables: lines starting with | or having | separators, with a separator row (---|---)\n    html = html.replace(/(?:^|\\n)((?:\\|[^\\n]+\\|?\\n)+\\|?\\s*[-:|\\s]+\\s*\\|?\\n(?:\\|[^\\n]+\\|?\\n?)*)/gm, (match, tableBlock) => {\n        const placeholder = '__TABLE_' + Math.random().toString(36).substr(2, 9) + '__';\n        const tableHtml = parseMarkdownTable(tableBlock.trim());\n        tablePlaceholders.push({\n            placeholder: placeholder,\n            html: tableHtml\n        });\n        return '\\n' + placeholder + '\\n';\n    });\n    // Also match tables without leading |\n    html = html.replace(/(?:^|\\n)((?:[^\\n|]+\\|[^\\n]+\\n)+[-:|\\s]+\\n(?:[^\\n|]+\\|[^\\n]+\\n?)*)/gm, (match, tableBlock) => {\n        // Skip if already processed (contains placeholder)\n        if (tableBlock.includes('__TABLE_'))\n            return match;\n        const placeholder = '__TABLE_' + Math.random().toString(36).substr(2, 9) + '__';\n        const tableHtml = parseMarkdownTable(tableBlock.trim());\n        tablePlaceholders.push({\n            placeholder: placeholder,\n            html: tableHtml\n        });\n        return '\\n' + placeholder + '\\n';\n    });\n    // Step 4: Escape HTML for non-placeholder text\n    html = html.split(/(__(?:CODE_BLOCK|INLINE_CODE|TABLE)_[a-z0-9-]+__)/gi)\n        .map((part, index) => {\n        // Odd indices are placeholders - keep as is\n        if (index % 2 === 1)\n            return part;\n        // Even indices are regular text - escape HTML\n        return escapeHtml(part);\n    })\n        .join('');\n    // Step 5: Convert markdown to HTML\n    // Headings (process from h6 to h1 to avoid conflicts)\n    html = html.replace(/^###### (.*$)/gim, '<h6>$1</h6>');\n    html = html.replace(/^##### (.*$)/gim, '<h5>$1</h5>');\n    html = html.replace(/^#### (.*$)/gim, '<h4>$1</h4>');\n    html = html.replace(/^### (.*$)/gim, '<h3>$1</h3>');\n    html = html.replace(/^## (.*$)/gim, '<h2>$1</h2>');\n    html = html.replace(/^# (.*$)/gim, '<h1>$1</h1>');\n    // Horizontal rule (---)\n    html = html.replace(/^---+$/gim, '<hr>');\n    // Links [text](url)\n    html = html.replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, '<a href=\"$2\" target=\"_blank\" rel=\"noopener noreferrer\">$1</a>');\n    // Lists - process BEFORE bold/italic to handle \"* item\" correctly\n    // Unordered lists: - or * at start of line\n    html = html.replace(/^[\\-\\*]\\s+(.*$)/gim, '<li>$1</li>');\n    // Numbered lists: 1. 2. etc\n    html = html.replace(/^\\d+\\.\\s+(.*$)/gim, '<li>$1</li>');\n    // Bold text (must be before italic)\n    html = html.replace(/\\*\\*([^*]+)\\*\\*/g, '<strong>$1</strong>');\n    // Italic text - only match single * not at line start (to avoid conflict with lists)\n    html = html.replace(/(?<!\\*)\\*([^*\\n]+)\\*(?!\\*)/g, '<em>$1</em>');\n    // Line breaks\n    html = html.replace(/\\n/g, '<br>');\n    // Step 6: Restore table placeholders\n    tablePlaceholders.forEach(item => {\n        html = html.replace(item.placeholder, item.html);\n    });\n    // Step 7: Restore inline code placeholders\n    inlineCodePlaceholders.forEach(item => {\n        html = html.replace(item.placeholder, item.html);\n    });\n    // Step 8: Restore code block placeholders\n    codeBlockPlaceholders.forEach(item => {\n        html = html.replace(item.placeholder, item.html);\n    });\n    return html;\n}\n","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M7.5 5.6 10 7 8.6 4.5 10 2 7.5 3.4 5 2l1.4 2.5L5 7zm12 9.8L17 14l1.4 2.5L17 19l2.5-1.4L22 19l-1.4-2.5L22 14zM22 2l-2.5 1.4L17 2l1.4 2.5L17 7l2.5-1.4L22 7l-1.4-2.5zm-7.63 5.29a.996.996 0 0 0-1.41 0L1.29 18.96c-.39.39-.39 1.02 0 1.41l2.34 2.34c.39.39 1.02.39 1.41 0L16.7 11.05c.39-.39.39-1.02 0-1.41zm-1.03 5.49-2.12-2.12 2.44-2.44 2.12 2.12z\"\n}), 'AutoFixHigh');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z\"\n}), 'Cancel');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z\"\n}), 'CheckCircle');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Close');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z\"\n}), 'Error');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z\"\n}), 'ExpandLess');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z\"\n}), 'ExpandMore');"],"names":[],"sourceRoot":""}